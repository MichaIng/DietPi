v8.8
(2022-08-27)

Enhancements:

Bug fixes:

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/XXXX

For all additional issues that may appear after release, please see the following link for active tickets: https://github.com/MichaIng/DietPi/issues

-----------------------------------------------------------------------------------------------------------

v8.7
(2022-07-30)

New images:
- NanoPi R5S | Initial support for FriendlyELEC's new router SBC has been added, with three Ethernet ports, up to 2.5 Gbps, based on the new Rockchip RK3568 SoC.

New software:
- Readarr | The ebook manager of the Servarr family has been added as dietpi-software option.
- Navidrome | An open source web-based music collection server and streamer has been added as dietpi-software option.

Enhancements:
- Quartz64 | The firmware package has been updated to ship with Linux v5.19-rc1. You will be asked during dietpi-update whether you want to upgrade it on your system.
- DietPi-Globals | The network connection checks during first boot, dietpi-update and dietpi-software installs have been enhanced: The timeout can be doubled and network settings can be entered right from the error handler menu. A dedicated IPv6 check is done and if it fails, IPv6 can be disabled from the error handler menu. The DNS check does no ping any more, but only tries to resolve the test domain.
- DietPi-Software | Prowlarr: Logging is now done to /var/log/prowlarr as intended. For this change to take effect, existing instances need to be reinstalled once: dietpi-software reinstall 151
- DietPi-Software | vaultwarden: DEB packages are now hosted on dietpi.com, replacing the time consuming in-place compiling. This also solves issues where builds failed due to insufficient memory.
- DietPi-Software | Pi-hole: The web interface and web server dialogues from the Pi-hole installer are now skipped. Since we force the installation of a web server and PHP, but allow to choose the web server freely, not installing the web interface as well as installing Pi-hole's Lighttpd setup are no reasonable choices.

Bug fixes:
- DietPi-Software | Resolved an issue where "cgroup_enable=memory" was unnecessarily added multiple times on Raspberry Pi when installing or reinstalling container engines. Many thanks to @mdsjip for fixing this issue: https://github.com/MichaIng/DietPi/pull/5600
- DietPi-Software | Webmin: Resolved an issue where the service failed to start. Many thanks to @alucard87pl for reporting this issue: https://github.com/MichaIng/DietPi/issues/5594
- DietPi-Software | Raspotify: Resolved an issue where the service failed to start on ARMv6 RPi models (Raspberry Pi 1 and Zero (1)). It is not supported by latest Raspotify anymore, so we install the latest ARMv6-compatible version instead. Many thanks to @dvelluto for reporting this issue: https://github.com/MichaIng/DietPi/issues/5602
- DietPi-Software | Rclone: Resolved an issue where on ARMv6 the x86_64 package was attempted to be installed. Many thanks to @eddiermar for reporting this issue: https://github.com/MichaIng/DietPi/issues/5601
- DietPi-Software | Unbound: Resolved an issue on Debian Bookworm where the service failed to start because of missing root trust anchors. Many thanks to @smittyj for reporting this issue: https://github.com/MichaIng/DietPi/issues/5612
- DietPi-Software | Tailscale: Resolved an issue where APT updates failed after Tailscale was uninstalled. Many thanks to @SlowRaid for resolving this issue: https://github.com/MichaIng/DietPi/issues/5623
- DietPi-Software | Pi-hole: Resolved an issue where the dialog windows looked ugly when executed via SSH and keyboard inputs caused characters to appear on the screen.
- DietPi-Software | Bazarr: Worked around an issue where on ARMv8 systems the service failed to start since for some reason the previously working aarch64 unrar binary (which is actually an ARMv5tel one) does not work on recent arm64 Debian anymore. A fix with a real aarch64 binary has been sent upstream. Many thanks to @dioxide0363 for reporting this issue: https://dietpi.com/forum/t/bazarr-fails-to-start-on-freshly-installed-dietpi/13658

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/5658

-----------------------------------------------------------------------------------------------------------

v8.6
(2022-07-02)

New images:
- Quartz64 | Support and images for the PINE64 Quartz64 series have been added to DietPi, modern feature-rich SBCs based on the new Rockchip RK3566 SoC.

New software:
- Prometheus Node Exporter: A Prometheus exporter for hardware and OS metrics, written in Go, has been added to the DietPi software catalogue. Many thanks to @alexiri for implementing this software option: https://github.com/MichaIng/DietPi/pull/5551
- Tailscale: A new VPN server option has been added to the DietPi software catalogue. Many thanks to @goldfix for implementing this software option: https://github.com/MichaIng/DietPi/pull/5558
- Rclone: "rsync for cloud storage" has been added to the DietPi software catalogue. Many thanks to @goldfix for implementing this software option: https://github.com/MichaIng/DietPi/pull/5560
- ZeroTier: The free easy to deploy cloud-hosted VPN service has been added to the DietPi software catalogue. Many thanks to @AAS-Crypt for implementing this software option: https://github.com/MichaIng/DietPi/pull/5567

New features:
- DietPi-Software | PiVPN: It is now possible to do an unattended install by placing a config file named "unattended_pivpn.conf" into the boot partition/directory. For example configs, have a look at https://github.com/pivpn/pivpn/tree/master/examples. Many thanks to @bastianpaetzold for implementing this feature: https://github.com/MichaIng/DietPi/pull/5546

Enhancements:
- DietPi-Software | HAProxy: It received some updates and enhancements, using v2.6.0 sources now, enabled support for prometheus metrics, updated cipher suites, and the initial password for the admin panel is now the global software password instead of hardcoded "dietpi". All config file changes affect fresh installs only, while reinstalls will never touch the config file, but update the HAProxy binary only: "dietpi-software reinstall 98"
- DietPi-Software | Amiberry: Our package has been updated to latest v5.3. Run "dietpi-software reinstall 108" to update your instance: https://github.com/BlitterStudio/amiberry/releases/tag/v5.3

Bug fixes:
- Odroid N2 | Resolved an issue where our image didn't boot from Hardkernel eMMC modules with orange PCB. Many thanks to @greentea1 for reporting this issue: https://dietpi.com/forum/t/problem-for-my-n2/13426
- DietPi-VPN | Resolved an issue where NordVPN, IPVanish and PIA connections failed if the killswitch was enabled. Many thanks to @jonyskids for reporting this issue: https://dietpi.com/forum/t/dietpi-vpn-blocking-443/13348
- DietPi-LetsEncrypt | Resolved an issue where Lighttpd needed to be reloaded manually after certificate renewals to serve the new certificate. Many thanks to @Rednox for reporting this issue: https://dietpi.com/forum/t/letsencrypt-renew-cron-issue/13471/6
- DietPi-Software | Radarr: Resolved an issue where the installation on ARMv6 Raspberry Pi models (Raspberry Pi 1 and Zero (1)) failed, since Radarr v4 does not support Mono anymore. The latest v3 will be installed now on these models. Many thanks to @eddiermar for reporting this issue: https://github.com/MichaIng/DietPi/issues/5537
- DietPi-Software | Lidarr: Precautionary, on ARMv6 Raspberry Pi models, the latest v0.8 will be installed from now on, since the upcoming v1 won't support Mono anymore. 
- DietPi-Software | Jellyfin: Resolved an issue where the installation failed due to a missing config file. Many thanks to @TomEighty15 for reporting this issue: https://dietpi.com/forum/t/jellyfin-installation-error/13402
- DietPi-Software | vaultwarden: Resolved an issue where the installation could have failed due to insufficient system memory.
- DietPi-Software | WiringPi: Resolved an issue where the installation failed on Odroids because of a missing dependency. Many thanks to @Guchshenskaya for reporting this issue: https://github.com/MichaIng/DietPi/issues/5543

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/5591

-----------------------------------------------------------------------------------------------------------

v8.5
(2022-05-28)

New software:
- Prowlarr | The indexer manager of the Servarr family has been added as dietpi-software option.

Changes:
- Security | It is now possible to enter the WPA-PSK WiFi key as 64-digit hexadecimal key, as e.g. returned by "wpa_passphrase". It will be converted as needed, stored and applied to wpa_supplicant config automatically in this format. In case of using "dietpi-wifi.txt" on a fresh DietPi installation, please note that this requires an image with DietPi v8.5 pre-installed, i.e. dated after May 28, 2022. Many thanks to @robinemde for doing this suggestion: https://github.com/MichaIng/DietPi/issues/5406
- Security | It is now possible to add public SSH keys to dietpi.txt, to be applied at first boot for public key authentication with "dietpi" and "root" users. Additionally, SSH password authentication can be disabled for all users or "root" only. Have a look at "AUTO_SETUP_SSH_PUBKEY" and "SOFTWARE_DISABLE_SSH_PASSWORD_LOGINS" settings in /boot/dietpi.txt.
- DietPi-Software | Dropbear/OpenSSH: Password authentication is now disabled if set via "SOFTWARE_DISABLE_SSH_PASSWORD_LOGINS" setting in /boot/dietpi.txt.
- DietPi-Software | Amiberry: Updated to latest version 5.2 and shipped now as DEB package. Also the included libSDL2 libraries have been updated to latest stable versions. Additionally builds for all SBCs and architectures, including x86_64, have been added, i.e. Amiberry is now available on all platforms.
- DietPi-Software | WiringPi: Build dependencies have been reduced so that only the actually required tools and headers are installed instead of the whole Build-Essential package.

Fixes:
- DietPi-VPN | Resolved an issue where applying a ProtonVPN connection or starting the killswitch could have failed, if the "gettext-base" package was not installed. Many thanks to @Wilford888 for reporting this issue: https://github.com/MichaIng/DietPi/issues/5501
- DietPi-Software | Spotifyd: Resolved an issue where fresh installs failed because of a missing parent directory. Many thanks to @C0ntroller for reporting this issue: https://github.com/MichaIng/DietPi/issues/5484
- DietPi-Software | WiringPi: Resolved an issue where the install on Odroids failed as of a change in the build scripts of Hardkernel's fork. Many thanks to @MDAR for reporting this issue: https://github.com/MichaIng/DietPi/issues/5485
- DietPi-Software | Gitea: Resolved an issue where the service failed to start after a reinstall when Gitea was installed before DietPi v7.9. Many thanks to @twikedk for reporting this issue: https://github.com/MichaIng/DietPi/issues/5516
- DietPi-Software | vaultwarden: Resolved an issue where web access wasn't possible, since it binds to localhost with recent vaultwarden or web vault release. We restore the previous behaviour on fresh installs and reinstalls, but preserve any stricter value that may have been manually applied, like the local IP. Many thanks to @amibumpin for reporting this issue: https://dietpi.com/forum/t/vaultwarden-update-to-1-25-web-access/13248

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/5522

-----------------------------------------------------------------------------------------------------------

v8.4
(2022-04-30)

New images:
- NanoPi M2/T2/Fire2 | We updated our NanoPi 2 series image to be shipped with Linux 4.4, the latest Linux version for the S5P4418 SoC, provided by FriendlyELEC. It is compatible will all FriendlyELEC S5P4418 SBCs: NanoPi 2, NanoPi M2, NanoPC T2, NanoPi Fire2A, NanoPi 2 Fire and NanoPi S2. Sadly systems running the old image cannot be upgraded, since the new U-Boot requires more space and hence a different partitioning. The new image ships with two scripts to flash U-Boot and to change the U-Boot environment/config: One can now edit /boot/u-boot/env.txt and apply the changes by running /boot/u-boot/flash_env.sh. Run fw_printenv to see the current U-Boot environment, also to get an idea of available settings. Kernel, U-Boot, firmware and these scripts are installed as part of a self-hosted "firmware-nanopi2" package. The kernel sources can be found at https://github.com/friendlyarm/linux/tree/nanopi2-v4.4.y, so that headers can be compiled. We will probably provide a kernel headers package as well, if there is a demand, e.g. to enable the DKMS-based WireGuard VPN server software option.
- Odroid XU4 | We updated our Odroid XU4 image to be shipped with Linux 5.4. Sadly systems running the old image cannot be upgraded, since the new U-Boot config requires a single ext4 partition without a dedicated boot partition.

Removed software:
- OpenBazaar | This software option has been removed from DietPi. The original project has been officially abandoned a while ago and a fork we recently switched to sadly doesn't show any activity anymore, leaving broken installs on ARM and no fully compatible clients. Since we really like the approach, as fast as there is a reliable and trustable revival of OpenBazaar, we will re-implement it, but for now it simply isn't functional. If you have OpenBazaar still installed on your DietPi system, see here for ways to uninstall it: https://github.com/MichaIng/DietPi/pull/5465

CLI changes:
- DietPi-Set_software | The "apt-cache" command has been renamed to "apt" to better reflect its options, which do not cover the APT cache only, but APT lists and the location of the downloaded package archive as well. For backwards compatibility, "apt-cache" however remains valid for now.

Changes:
- Security | Access permissions for /etc/sudoers.d/dietpi have been hardened to comply with best practice. Many thanks to @fmunteanu for reporting this issue: https://github.com/MichaIng/DietPi/issues/5441
- DietPi-Config | It is now possible toggle APT list compression. APT package lists are xz-compressed by default on DietPi, which reduces disk writes during APT updates and disk usage of APT lists by about 80%. But it slows down APT installs/upgrades, especially when a large number of packages is installed/upgraded, since parsing compressed lists for e.g. building the dependency tree is done quite inefficiently. The option can be found in "dietpi-config" > "Advanced Options" > "APT".
- DietPi-Software | The webserver, desktop and browser "preference" menus have been removed, in favour of an interactive dialogue once respective dependant software is to be installed. Those menus have always caused confusion, since selecting e.g. a specific desktop didn't cause this desktop to be installed, unless another software was selected which requires a desktop to work. For automated first run installs, the respective dietpi.txt settings are still respected.
- DietPi-Software | Box86: On ASUS Tinker Board, compiling is now done with an optimised build target flag. You can update Box86 by reinstalling it: dietpi-software reinstall 62
- DietPi-Software | Box64: On Odroid N2, compiling is now done with an optimised build target flag. You can update Box64 by reinstalling it: dietpi-software reinstall 197
- DietPi-Software | VirtualHere: On new installs and reinstalls, VirtualHere is now installed to /opt/virtualhere to align with most other software options. Logging is now done to system log, viewable via "journalctl -u virtualhere", instead of using the /var/log/virtualhere.log plain text file. By default, the system hostname is now used as VirtualHere server name, instead of the hardcoded "DietPi". An existing config file is never touched on reinstalls.
- DietPi-Software | rTorrent: The ruTorrent web interface is now reinstalled cleanly, i.e. configs, 3rd party plugins and themes are preserved but all other files are removed before new ruTorrent files are installed. Many thanks to @shanew1694 for reporting a related issue with remaining obsolete files: https://github.com/MichaIng/DietPi/issues/5161#issuecomment-1013286248

Fixes:
- Network | Resolved an issue on some Armbian based systems where the network interface naming changed unintentionally after a kernel upgrade: https://dietpi.com/phpbb/viewtopic.php?t=10229
- DietPi-Config | Resolved an issue on RPi where disabling and re-enabling Bluetooth failed, since the hciuart.service cannot be restarted until reboot after it was stopped once. In the same turn, this also resolved an issue in DietPi-PREP where the service is still running after package removal, while trying to disabling it fails as of the missing service file. Many thanks to @Mausy5043 for reporting this issue: https://github.com/MichaIng/DietPi/issues/5435
- DietPi-Software | Chromium: Resolved an issue on Raspberry Pi Buster systems where the installation failed because of a syntax error. Many thanks to @bbmak for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=10258
- DietPi-Software | Tor/Unbound: Resolved an issue where IPv6 usage was assumed only based on the dietpi.txt setting instead of on whether IPv6 can really be used for Internet connections. E.g. when a VPN connection is established, usually IPv6 is disabled to prevent IPv6 leaks, without changing the general dietpi.txt setting. Tor and Unbound service starts however fail then, trying to bind to the IPv6 port. If the adapter has an IPv6 address assigned, but no IPv6 default route, binding to the IPv6 port succeeds, but Internet connections via IPv6 are not possible, which isn't better. On the other hand, using IPv4 only while IPv6 is enabled, has no real downsides. Many thanks to @Wgsem for reporting this issue: https://github.com/MichaIng/DietPi/issues/5412
- DietPi-Software | Python 3: Updated the workaround for ARMv6/7 Buster systems where installing numpy or any module which depends on numpy failed. It was accidentally applied only on Raspberry Pi 2 and earlier, while it should have been applied to all ARMv6/7 Buster systems. Additionally, all numpy >=0.21.5 versions are now blocked, since the recent v0.21.6 fails to compile for the same reason.
- DietPi-Software | Single File PHP Gallery: Resolved the failing installation since a new version is available and the old download link has become invalid. Many thanks to @dodo1967 for reporting this issue: https://github.com/MichaIng/DietPi/issues/5415
- DietPi-Software | WiFi Hotspot: Resolved an issue where the WiFi country code was not applied when the WiFi Hotspot was installed via automated first run setup. Many thanks to @matteocarnelos for reporting this issue: https://github.com/MichaIng/DietPi/issues/5407

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/5460

-----------------------------------------------------------------------------------------------------------

v8.3
(2022-04-02)

New images:
- Container | Initial support for container systems has been added to DietPi, using hardware ID 75. For now it is assumed that the container guest does not require an own network stack, but uses the host network interface or one managed by the container engine. This works well with systemd-nspawn which we use for DietPi image generation and for testing DietPi features in CI/CD pipelines. Further support and images for specific container engines, like Docker or LXC with Proxmox and QEMU will follow.

New software:
- PHP Composer | The PHP package manager has been made a dedicated install option.

Changes:
- DietPi-Banner | It is now possible to hide the credits section from the DietPi banner. Run "dietpi-banner" to configure its content. Many thanks to @math-gout for contributing this feature: https://github.com/MichaIng/DietPi/pull/5355
- DietPi-Drive_Manager | Adding an NFS drive now allows to select a specific export from an NFS server, detected via "showmount -e <IP/hostname>". Entering a custom path is still possible, including the single slash "/" which was always used before. If the NFS server has no root export defined via "fsid=0", this solves the issue that the full root directory structure is mounted and allows to mount multiple shares from the same server. Many thanks to @bamyasi for doing this suggestion: https://dietpi.com/phpbb/viewtopic.php?t=5488
- DietPi-Drive_Manager | NFS and Samba network drives can now be mounted to any directory on the server, not necessarily below /mnt.
- DietPi-DDNS | It is now possible to select the IP family to associate with your DDNS domain. For new setups, IPv4 is used by default for best compatibility. If you configured your DDNS domain already, no IP family is forced to not change existing behaviour, unless selected explicitly. We recommend to use IPv4 so that your server can be reached with any client from any network, regardless whether client and network support IPv6 or not. Many thanks to @TomBayne for suggesting this feature: https://github.com/MichaIng/DietPi/issues/5354
- DietPi-Software | motionEye: We worked together with other contributors to revive motionEye and port it over to Python 3, which also allowed us to re-enable it on Debian Bullseye systems. It requires further careful testing before a stable release can be done, but common functionality works. We enabled it with a "beta" mark in DietPi-Software. Visit the new home of motionEye, and if you want, contribute or help testing: https://github.com/motioneye-project/motioneye
- DietPi-Software | Node-RED: The "nodered" service user is now added to the "spi" system group automatically, relevant on Raspberry Pi to grant it access to SPI-attached sensors and similar. Many thanks to @devifast for reporting a related issue: https://dietpi.com/phpbb/viewtopic.php?t=10134
- DietPi-Software | TasmoAdmin: Reduced the downloaded data size from ~150 MiB to ~4 MiB by downloading the runtime files of the latest release only instead of the whole GitHub repository archive.

Fixes:
- NanoPi NEO3 | Resolved an issue where the board became unbootable after an "apt upgrade" because the latest version of the Armbian kernel does not ship a NEO3 device tree anymore. On DietPi upgrade, it is switched to the NanoPi R2 rev00 device tree, which works regarding Ethernet, USB and general GPIO interface: https://forum.armbian.com/topic/20133-nanopi-neo3-dtb-gone-since-linux-dtb-current-rockchip64-22021/
- Raspberry Pi | Resolved an issue where enabling and using onboard WiFi during first run installs was failing if a reboot was done after first run update due to a kernel upgrade. Many thanks to @matteocarnelos for reporting this issue: https://github.com/MichaIng/DietPi/issues/5391
- Network | Resolved an issue where the systemd network targets could have been reached before the network adapter was even detected. Many thanks to @Totila for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=10167
- DietPi-WiFi-Monitor | The first default gateway check is now done after the first tick rate interval instead of immediately after service start. This adds another grace period at boot to reduce the chance that the WiFi monitor reconfigures the interface which is just about to be configured for the first time. This should usually not be required, but may help with cases where the initial DHCP lease or WPA authentication time out or fail.
- DietPi-TimeSync | Resolved an issue where the script threw a syntax error where it shouldn't, which however didn't affect functionality. Many thanks to @adminy for reporting this issue: https://github.com/MichaIng/DietPi/issues/5347
- DietPi-Login | Resolved an issue where a prompt about an unsupported SSH client terminal was incorrectly shown. Many thanks to @jahway603 and @Dagon for reporting this issue: https://github.com/MichaIng/DietPi/issues/5341, https://github.com/MichaIng/DietPi/issues/5366
- DietPi-Drive_Manager | Worked around an issue on Bullseye with legacy Linux versions, where exFAT filesystems failed to mount since the exFAT driver for FUSE is not invoked automatically if the native kernel driver is missing. A symlink for "mount.exfat => mount.exfat-fuse" is now created in these cases to force this invocation, and it is removed as fast as due to a kernel upgrade, the native exFAT driver becomes available. Many thanks to @RunningUtes for reporting this issue: https://github.com/MichaIng/DietPi/issues/5166
- DietPi-Software | Kodi: Resolved an issue on Raspberry Pi Bullseye systems where libraries were missing to run Kodi via KMS/DRM. Many thanks to @derebo for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=10161
- DietPi-Software | Mopidy: Resolved an issue where there installation failed. Many thanks to @amibumpin for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=10188
- DietPi-Software | rTorrent: Resolved an issue where the web interface didn't work with Nginx because the PHP handler wasn't set. Many thanks to @vinhtq115 for providing the solution: https://github.com/MichaIng/DietPi/pull/5375
- DietPi-Software | Webmin: Worked around an issue where the install failed. Many thanks to @omavoss for reporting this issue: https://github.com/MichaIng/DietPi/issues/5386
- DietPi-Software | WireGuard: Resolved an issue where the WireGuard module shipped with the kernel was not detected if it is shipped xz-compressed. Many thanks to @Carbonara for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=10173
- DietPi-Software | Chromium: Resolved an issue on Raspberry Pi Bullseye systems where pages did not load but a "Page Unresponsive" error prompt was shown after a while instead, if KMS/DRM was not used. Many thanks to @pastaholic for reporting this issue: https://github.com/MichaIng/DietPi/issues/5342
- DietPi-Software | Nukkit: Resolved an issue where the service failed to start because of an unintended single quote character in the service file. Many thanks to @richardpdunngb for reporting this issue: https://github.com/MichaIng/DietPi/issues/5396

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/5397

-----------------------------------------------------------------------------------------------------------

v8.2
(2022-03-05)

New images:
- UTM | Support for the UTM virtualizer on macOS has been added and an image is provided on our download page. It supports x86_64 natively and M1 systems via emulation, working but with performance downsides. A native aarch64 M1 image will follow soon.
- ESXi | A new VMware ESXi compatible x86_64 OVA appliance is now available for download. An ESXi-Arm variant will follow soon.
- Proxmox | A VM image for the Proxmox VM and container platform is now available for download.
- Odroid C4 | We replaced the legacy kernel image with a new mainline Linux image, built from scratch, using the methods used for the new Odroid N2(+) image.

New software:
- MicroK8s | The simplest production-grade upstream K8s. Lightweight and focused, added to DietPi as software option with ID 142. Many thanks to @silverraindog for the implementation: https://github.com/MichaIng/DietPi/pull/5239

Removed software:
- Nvidia | Removed the dedicated proprietary Nvidia display driver install option. It can installed/uninstalled along with AMD and Intel drivers via dietpi-config display options on x86_64 systems, which is now done faster by skipping service restarts and overhead of dietpi-software around the actual package installs/uninstalls.

Changes:
- General | It is now checked in various scripts whether kernel modules for the loaded kernel are available, i.e. the directory /lib/modules/<version> which matches the kernel version reported by "uname -r", so that additional kernel modules can be loaded ondemand. This is not the case after kernel upgrades, when the previous kernel was replaced or autoremoved and a reboot outstanding to load the new kernel. In this transient situation, several system tasks and software installs can fail if they rely on loading additional kernel modules, which includes installs of container and emulation platforms, but also more trivial command calls like "ip".
- DietPi-Banner | If no DietPi or APT package update is available, the banner now informs you about an outstanding reboot to finalise a kernel upgrade.
- DietPi-Drive_Manager | Users will now face an additional prompt if a reboot is outstanding to finalise a kernel upgrade, with the offer to perform the reboot now. The drive manager relies on this when mounting new filesystems which require kernel drivers, and to correctly detect whether the "autofs4" module is available or not.
- DietPi-Drive_Manager | Reserved blocks on ext4 filesystem are now shown and can be set in MiB rather than in percent. This makes it easier to apply a reasonable value, which usually does not depend on the filesystem size but may be a fixed value to assure that root can perform maintenance or cleanup tasks.
- DietPi-Update | Users will now face an additional prompt after the update if a reboot is outstanding to finalise a kernel upgrade, with the offer to perform the reboot now. The reboot is done automatically on first boot of the DietPi system.
- DietPi-Software | The script cannot be used anymore if a reboot is outstanding to finalise a kernel upgrade. Users will face a prompt which offers to perform the reboot now. The reboot is done automatically on first boot of the DietPi system, when required, while usually this is covered by the proceeding DietPi update already.
- DietPi-Software | Roon Bridge: The service now runs as "roonbridge" service user instead of as "root". The install directory has been moved to /opt/roonbridge, the data directory to /mnt/dietpi_userdata/roonbridge and the log directory to /var/log/roonbridge, for consistency. The DietPi update does not enforce the migration, but a manual reinstall via "dietpi-software reinstall 121" applies it, while preserving all data and configs.
- DietPi-Software | Roon Extension Manager: The service now runs as "roon-extension-manager" service user instead of as "root" and the data directory has been moved to /mnt/dietpi_userdata/roon-extension-manager. The DietPi update does not enforce the migration, but a manual reinstall via "dietpi-software reinstall 86" applies it, while preserving all extensions and configs.
- DietPi-Software | Roon Server: The service now runs as "roonserver" service user instead of as "root" and logs are now done to /var/log/roonserver, i.e. the DietPi-RAMlog by default, aligning with Roon Bridge. The DietPi update does not enforce the migration, but a manual reinstall via "dietpi-software reinstall 154" applies it, while preserving all data and configs. When you do the reinstall, note that Roon remote apps will ask you to login again and unauthorise the connected Roon Server. This is however just a formal step required as of the service user change, while all your settings and libraries appear just the same.
- DietPi-Software | Docker Compose: We migrated from the Python-based v1 to v2, written in Go. Existing installs can be migrated with a manual "dietpi-software reinstall 134". Many thanks to @CommandLineN00b for making us aware of this major Docker Compose upgrade: https://github.com/MichaIng/DietPi/issues/5034
- DietPi-Software | Chromium: It is now easier to autostart Chromium as non-root user, making use of systemd-logind and startx. The related change requires a reinstall of Chromium: dietpi-software reinstall 113
- DietPi-Software | Deluge: The web interface will now connect to the local Deluge server automatically. Many thanks to @jonyskids for doing this suggestion and @Jappe for providing the solution: https://dietpi.com/phpbb/viewtopic.php?t=10026
- DietPi-Software | Allo GUI: The Allo audiophile web interface received a major version update: It does caching and session storage via APCu memory cache, does not make use of the dedicated "allo" user anymore, and has undergone a bunch of updates, fixes, security hardenings and cleanups, including a database created from scratch. The migration will be done automatically with the DietPi update, which also provides further details. The source code is now hosted on GitHub: https://github.com/MichaIng/DietPi-AlloGUI

Fixes:
- DietPi-TimeSync | Resolved an issue where the systemd-timesyncd service was not stopped at boot as intended, when the time sync finished before DietPi-TimeSync started: https://github.com/MichaIng/DietPi/issues/5256
- DietPi-Config | Resolved an issue where the onboard audio selection for our new Odroid N2 image did not work. Many thanks to @Kreeblah for reporting this issue: https://github.com/MichaIng/DietPi/issues/5039#issuecomment-1038326411
- DietPi-Software | Resolved an issue where via AUTO_SETUP_INSTALL_SOFTWARE_ID dietpi.txt settings it was possible to install software on first boot which is actually not supported on the platform. Many thanks to @eyduh for reporting this issue: https://github.com/MichaIng/DietPi/issues/5245
- DietPi-Software | Resolved an issue on RPi where on repeating container platform installs, multiple "cgroup_enable=memory" entries were added to /boot/cmdline.txt. The duplicates are removed automatically on DietPi update, when present. Many thanks to @isarrider for reporting this issue: https://github.com/MichaIng/DietPi/issues/5225
- DietPi-Software | Apache: Resolved an issue on fresh installs where the service failed to start due to a config file syntax error. Many thanks to @Camry2731 for reporting this issue: https://github.com/MichaIng/DietPi/issues/5248
- DietPi-Software | Nextcloud: Resolved an issue where the install on an over 2 GiB RAM system failed. Many thanks to @p4cm4n for reporting this issue: https://github.com/MichaIng/DietPi/issues/5251
- DietPi-Software | Folding@Home: Resolved an issue where reinstalls failed since a removed SysV service is tried to be stopped. Many thanks to @eyduh for reporting this issue: https://github.com/MichaIng/DietPi/issues/5255
- DietPi-Software | Bazarr: Resolved an issue where the service entered an endless restart loop because of a missing dependency. Many thanks to @alleyu2 for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=10050
- DietPi-Software | Python 3: Worked around an issue on ARMv6/7 Buster systems where installing numpy or any module which depends on numpy failed: https://github.com/piwheels/packages/issues/287
- DietPi-Software | Pydio: Resolved an issue where the data directory was not writeable. Many thanks @holocronology for reporting this issue: https://github.com/MichaIng/DietPi/issues/5274
- DietPi-Software | Jellyfin: Resolved an issue where during install two settings failed to apply since the config file didn't exist yet. Many thanks to @echtfrank for reporting this issue: https://github.com/MichaIng/DietPi/issues/5279
- DietPi-Software | Firefox: Resolved a warning on startup about the missing libpci library, used to detect GPU details. Many thanks to @MDAR for reporting this issue: https://github.com/MichaIng/DietPi/issues/5278#issuecomment-1044381054
- DietPi-Software | X.Org X Server: Resolved an issue on modern Odroid C2 and NanoPi K2 (Amlogic S905 SoC) images where the X server (desktop) failed to start. Many thanks to all users who reported and helped resolving this issue: https://github.com/MichaIng/DietPi/issues/5234, https://dietpi.com/phpbb/viewtopic.php?t=10078

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/5330

-----------------------------------------------------------------------------------------------------------

v8.1
(2022-02-05)

SBC support:
- Odroid N2 | Support for Odroid N2(+) with modern mainline Linux images has been added, including proper boot configuration, serial console selection, HDMI and 3.5mm audio selection and more. Sadly existing images cannot be migrated, a new image is available for testing: https://github.com/MichaIng/DietPi/issues/5039

Changes:
- DietPi-Benchmark | During RAM I/O benchmarks, the CPU governor is now changed to "performance" so that the result is not affected by possible CPU frequency scaling but the raw/max RAM I/O performance is measured. A significant effect of this has been recognised on Odroid N2 images with modern mainline kernel. Since the CPU benchmark is done first, this has no effect on its score and CPU temperature results.
- DietPi-Drive_Manager | Btrfs subvolume mounts are now preserved in /etc/fstab. Many thanks to @laddde for implementing this feature: https://github.com/MichaIng/DietPi/pull/5176
- DietPi-Drive_Manager | The Samba mount dialogues do now indicate that a hostname can be entered instead of a server IP and a shared folder path instead of a share name only.
- DietPi-Backup | A notification is not printed when rsync dry-run to obtain required disk space is starting, since this can take a while. Many thanks to @whisdol for reporting the the impression of a hanging script: https://github.com/MichaIng/DietPi/issues/5209
- DietPi-Software | iptables is now automatically configured to use either modern nf_tables API or legacy API, depending on whether nf_tables is supported by the kernel. This is helpful for Bullseye images with older kernel versions, where iptables is by default configured to use nf_tables, which fails.
- DietPi-Software | iptables rules are now applied for IPv6 as well in all cases (for VPN servers, WiFi and Tor hotspots) via ip6tables. This does not depend on whether IPv6 is actually enabled for interfaces, but enables general IPv6 support for affected software options. Many thanks to @vielka442 for reporting missing IPv6 support for Tor Hotspot: https://github.com/MichaIng/DietPi/issues/5038
- DietPi-Software | Jellyfin: For new installs, the default web interface port has been changed from 8096 to 8097 to resolve a port conflict with Emby.
- DietPi-Software | Docker/K3s: The memory cgroup is now enabled as well on RPi and our new Odroid N2 image, when Docker or K3s is installed, to allow container memory usage monitoring. Many thanks to @isarrider for this request: https://github.com/MichaIng/DietPi/issues/5225
- DietPi-Software | Raspotify: This software option has been disabled on Debian Buster systems but enabled for ARMv8 and x86_64 systems, to match the current state of the official Raspotify APT repository.

Fixes:
- DietPi-Services | Resolved an issue where service edits and process tool settings were not effective as they were stored to the wrong file path. Many thanks to @TopFord and @MicDG for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=41509#p41509
- DietPi-LetsEncrypt | Resolved an issue where Certbot failed on fresh Apache installs since the 000-default.conf vhost by default does not contain any directive anymore. The ServerName directive with the entered domain name is now added to 000-default.conf instead of apache2.conf, with the benefit that it overrides the global ServerName directive in dietpi.conf, which uses the local IP address only.
- DietPi-Software/DietPi-AutoStart | Chromium: Resolved an issue where the Chromium kiosk autostart option failed on all non-RPi systems.
- DietPi-Software | Roon Extension Manager: It has been disabled for ARMv6 RPi systems where it cannot run currently. Many thanks to @JanKoudijs for applying this fix: https://github.com/MichaIng/DietPi/pull/5231
- DietPi-Software | FuguHub: Resolved an issue where the uninstall failed as the service was not stopped and removed as expected, before attempting to remove the service user.
- DietPi-Software | PHP: Resolved an issue where the PATH variable was not available for PHP applications with Lighttpd and Nginx webservers. It is now set to the static value "/usr/local/bin:/usr/bin:/bin", the default PATH excluding super user executables "sbin". Many thanks to @shanew1694 for reporting a related issue with rTorrent: https://github.com/MichaIng/DietPi/issues/5161#issuecomment-1013381362
- DietPi-Software | MineOS: Resolved an issue where the install failed on Bullseye: https://github.com/MichaIng/DietPi/issues/5181
- DietPi-Software | Cuberite: Resolved an issue where the server failed to start on ARMv8 systems: https://github.com/MichaIng/DietPi/issues/5180
- DietPi-Software | MATE: Resolved an issue where the install failed when LXDE is installed already. Many thanks to @n0valis for reporting this issue: https://github.com/MichaIng/DietPi/issues/5214
- DietPi-Software | Ampache: Resolved an issue on Bullseye systems where Ampache v5 installs/reinstalls did not work because of a changed webroot directory: https://github.com/MichaIng/DietPi/pull/5205
- DietPi-Software | OpenBazaar: Since the original project has been taken down, we migrated to a fork which keeps up the marketplace for the community: https://github.com/MichaIng/DietPi/issues/5213
- DietPi-Software | X.Org X Server: Resolved an issue where VMs without KMS/DRM support failed to start the X server, e.g. Hyper-V. The classic framebuffer DDX is now installed when no KMS/DRM support is detected on VMs.
- DietPi-Software | Box86/Box64: Resolved an issue where the install failed when a kernel upgrade has just been done so that the "binfmt_misc" kernel module cannot be found for the loaded kernel.
- DietPi-Software | RPi-Monitor: Resolved an issue where the CPU temperature was not shown. Many thanks to @KamikazeePL for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=10001
- DietPi-Software | Home Assistant: Resolved an issue with the latest Home Assistant version where restarting it via web interface made it remaining stopped. The fix is applied to all instances on DietPi update. Many thanks to @jchh for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=10025

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/5229

-----------------------------------------------------------------------------------------------------------

v8.0
(2022-01-08)

Stretch support:
- Support for Debian Stretch has now been removed, which allowed us to do a major code cleanup and migrate to some newer methods in different areas which are only available on Buster and above.

Changes:
- Network | For new images, the default DHCP timeout is not reduced to 10 seconds anymore. This could have been too short, in which case network targets of the boot sequence are reached before an IP has been actually assigned. Especially in case of AUTO_SETUP_AUTOMATED=1 this could have lead to connection test timeouts and hence abortion of the automated first run setup. Many thanks to @jpeg2600 for reporting such a case: https://github.com/MichaIng/DietPi/issues/5143
- DietPi-Config | When configuring a first WiFi slot via scanning for SSIDs, the WiFi adapter is now not brought up via "ifup" but "ip l dev wlanX up". This way no DHCP and WPA client starts are triggered, which are doomed to fail when the WiFi adapter is not connected to any access point yet. Especially in case of the default 60 seconds DHCP timeout, this would otherwise cause an unnecessary long delay.
- DietPi-Dashboard | Added an option to view multiple dashboard nodes from one frontend web interface. Related to this, the backend can now be installed only, reducing memory usage and making it impossible to manually access the node outside of the backend API.
- DietPi-Print_large | This new script has been added which can be executed or sourced from /boot/dietpi/func/dietpi-print_large to print the string passed via first argument in large figlet style fonts. It currently only supports the characters a-z, A-Z, 0-9, dot and dash, i.e. those commonly allowed in hostnames.
- DietPi-Banner | Added an option to print the system's hostname in large figlet style fonts, right below the banner header. In case it is enabled as well, the regular/small hostname line will then be skipped. Many thanks to @matellis for implementing this feature: https://github.com/MichaIng/DietPi/pull/5113
- DietPi-Software | Mono: "mono-complete" won't be installed anymore but only "mono-devel" instead. This skips the XSP4 webserver service, which listens on port 8084 by default where it conflicts with File Browser. This only affects new instals. You can manually apply this change via "apt-mark manual mono-devel && apt --autoremove purge mono-complete". Many thanks to @jaguar489 for reporting this issue: https://github.com/MichaIng/DietPi/issues/5093
- DietPi-Software | FuguHub: The outdated official installer has been replaced with a fully automated own setup, removing the obsolete or even harmful interactive dialogues. On fresh installs, an admin account "dietpi" with global software password is created as well.
- DietPi-Software | myMPD: Installation is now done via official APT repository, which means quicker install compared to compiling from source, fewer dependencies and easier updates via "apt upgrade": https://github.com/MichaIng/DietPi/issues/5115
- DietPi-Software | Airsonic: Since the project has been archived by its maintainer and suffers from the critical Log4Shell security vulnerability, we moved to the advertised fork "Airsonic-Advanced" which also enables compatibility with Java 17 and hence Debian Bullseye. Airsonic will be reinstalled as part of the DietPi update to apply the migration. All data and settings will be preserved and migrated automatically.

Fixes:
- Raspberry Pi | Resolved an issue where unintentionally the turbo mode was enabled. This got backported to v7.9, to our existing RPi images and via live patch. Many thanks to @ayo-x and @whyisthisbroken for reporting this issue: https://github.com/MichaIng/DietPi/issues/5088
- DietPi-FS_partition_resize | Resolved an issue where in some cases the boot partition failed to mount on first boot since after the partition resize the system in some cases didn't get sufficient time to fully apply the change before continuing with the boot mount attempt. Many thanks to @Mausy5043 and @sistemicorp for reporting this issue: https://github.com/MichaIng/DietPi/issues/5006
- DietPi-Config | Resolved an issue where on Raspberry Pi, when the full KMS display driver is used, the sound card selection could have been falsely applied. With full KMS enabled, for each HDMI port an additional HDMI sound card appears (replacing the regular firmware HDMI sound device), even when no HDMI device is attached and with onboard audio disabled. This lead to an incrementation of external sound card indices. The appearance of the KMS HDMI sound cards is now aligned with the onboard firmware HDMI sound cards, i.e. if not onboard "auto" or HDMI is selected in dietpi-config, now the KMS HDMI sound devices are disabled as well, making use of the "noaudio" device tree overlay parameter.
- DietPi-Software | Resolved an issue where on first boot, choice and preference menu selections triggered an error as the install state file did not exist yet. Many thanks to @bsheeres for reporting this issue: https://github.com/MichaIng/DietPi/issues/5080
- DietPi-Software | Resolved an issue where the deprecated AUTO_SETUP_FILE_SERVER_INDEX dietpi.txt option was applied inverted. "-1" should have installed ProFTPD and "-2" Samba, while it was done the opposite way. However, note that this setting is not present on current images and deprecated. Use AUTO_SETUP_INSTALL_SOFTWARE_ID instead to mark any one or multiple file servers for automatic install. Many thanks to @bsheeres for reporting this issue: https://github.com/MichaIng/DietPi/issues/5081
- DietPi-Software | Browsers: On the ARMv6 Raspberry Pi models Raspberry Pi 1 and Zero (1) since Bullseye, Chromium and Firefox fail to start due to hardware and build limitations which are outside of our control. Since those are currently the only two browser available from dietpi-software, they have been disabled together with the browser preference menu for those systems, until we find and implement a good additional compatible browser. Further info: https://github.com/RPi-Distro/chromium-browser/issues/21
- DietPi-Software | Kodi: Resolved an issue where subsequent Kodi reinstalls created duplicates of the CMA parameter for the KMS overlay setting in config.txt. The duplicates are patched out during DietPi update.
- DietPi-Software | Docker: Resolved an issue where the install was aborted due to an incorrect check for missing kernel modules. Many thanks to @dragonandy for reporting this issue: https://github.com/MichaIng/DietPi/issues/5061
- DietPi-Software | Pi-hole: Resolved an issue where the teleporter import log was not shown but denied by the X-Frame-Options header: https://discourse.pi-hole.net/t/unable-to-restore-teleporter-backup-fresh-install-no-funky-changes-made/51573
- DietPi-Software | Blynk Server: Resolved an issue on ARMv6 RPi models where the install failed as the latest Blynk Server release does not contain a Java 8 build. Since the older Java 8 build does not contain a native Log4Shell vulnerability mitigation, it is added server-wise on these systems.
- DietPi-Software | Mycroft AI: Resolved an issue on Bullseye (and above) systems where "mycroft-cli-client" command fails with a permissions issue, even as root user. Many thanks to @berndverhofstadt for reporting this issue: https://github.com/MichaIng/DietPi/issues/5100
- DietPi-Software | Nukkit: Resolved an issue where the install failed due to a changed download URL. The Jenkins instance has moved to ci.opencollab.dev, where also the Geyser and Floodgate projects are hosted.
- DietPi-Software | FuguHub: Resolved an issue where the uninstall failed as the process was not stopped as intended. Many thanks to @kd9352 for reporting this issue: https://github.com/MichaIng/DietPi/issues/5058
- DietPi-Software | myMPD: Resolved an issue where the installation failed due to an updated dependency. Many thanks to @supersexy for reporting this issue: https://github.com/MichaIng/DietPi/issues/5115
- DietPi-Software | Python 3: Worked around an issue where the pip reinstall failed. Many thanks to @hueppinr for reporting this issue: https://github.com/MichaIng/DietPi/issues/5117
- DietPi-Software | Unbound: Resolved an issue where the "unbound-resolvconf" service applied localhost automatically as local nameserver, if the "resolvconf" package was installed. Since often Unbound is installed in combination with Pi-hole or AdGuard Home, and those are usually used by network clients only, not the server itself, "unbound-resolvconf" is disabled now on Unbound installs. If Unbound is wanted as local resolver as well, it should be explicitly configured, e.g. via dietpi-config network options. Many thanks to @Ianszh for reporting this issue: https://github.com/MichaIng/DietPi/issues/5133
- DietPi-Software | Mosquitto: Applied a workaround on ARMv6 where the latest Mosquitto packages from the official APT repository are not ARMv6-compatible. Many thanks to @thomasmockridge for reporting this issue: https://github.com/MichaIng/DietPi/issues/5140

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/5146

-----------------------------------------------------------------------------------------------------------

v7.9
(2021-12-11)

Stretch support:
- This is the last DietPi release with support for Debian Stretch. Next release will be DietPi v8.0 which requires Debian Buster or newer. Read our article about why we need to make this move and how you can easily upgrade your system to Debian Buster and even further to current stable Debian Bullseye: https://dietpi.com/blog/?p=1001

Changes:
- Raspberry Pi | Since Bullseye, some media software titles, most importantly FFmpeg and those which make use of FFmpeg libraries compiled for Raspberry Pi firmware (Kodi, Jellyfin, Chromium), utilise the Raspberry Pi V4L2 codec drivers. Those were previously enabled/disabled with the RPi camera module switch in dietpi-config. The hardware codec drivers have now become an own CLI command and menu switch in the dietpi-config display options and are enabled automatically when one of the mentioned software titles is installed or reinstalled on Bullseye (or above).
- DietPi-Dashboard | On fresh installs, password protection is now enabled by default, using the global software password. You can apply or change this manually by following the instructions in our documentation: https://dietpi.com/docs/software/system_stats/#dietpi-dashboard
- DietPi-Dashboard | The default TCP network port has been changed from 8088 to 5252 to resolve a port conflict with InfluxDB. This does not affect existing installs, but you will be asked whether to apply this change during DietPi update. Many thanks to @blablazzz for reporting this issue: https://github.com/MichaIng/DietPi/issues/4966
- DietPi-Backup | A backup archive with a selectable amount of backups to keep can be created now. Backups are rotated automatically and if the maximum amount has been reached, the oldest backup is used as basis for the incremental new backup sync, to reduce writes and increase speed. Many thanks to @johnvick and many others for requesting this feature: https://dietpi.com/phpbb/viewtopic.php?t=3593
- DietPi-Backup | Backups can now be stored outside of /mnt into any directory or mount point as long as the filesystem supports symlinks and UNIX permissions.
- DietPi-Software | The file server choice menu has been removed. Most file servers can run concurrently, hence it is not required to remove e.g. a Samba server to install an FTP server, so that a dedicated menu lost its reason. File servers can be selected the regular way via "Browse/Search Software" menus or CLI. The related dietpi.txt setting has been removed for new images as well, but it will still be respected when present. For an automated install with new images, use the "AUTO_SETUP_INSTALL_SOFTWARE_ID" setting instead.
- DietPi-Software | SABnzbd: For fresh installs, file logging has been disabled in favour of journal logging. All service and process logs can hence now be reviewed via: journalctl -u sabnzbd
- DietPi-Software | Apache: Fresh installs and reinstalls will be configured with PHP-FPM instead of mod_php. As a requirement, the event MPM is used instead of prefork. This reduces memory usage and increases access performance significantly on concurrent requests, as the Apache parent process does not need to fork a new child process for every single process. We further optimised it by spawning a single static child process only while handling concurrent requests by a sufficient amount of process threads. This allows Apache to share memory efficiently and makes it quite lightweight. There are no downsides known when using a single process only, compared to multiple processes with less threads each. Related StackExchange questions: https://superuser.com/questions/1611015/apache2-mpm-event-more-threads-vs-more-processes
- DietPi-Software | Apache: Our default/base configuration is now added as separate file, so that the main apache2.conf is not touched anymore. Furthermore the default vhost is now pre-created before the package install, so that it can be skipped on a reinstall to not overwrite user customisations. These in combination allow for a safe and clean reinstall without breaking any changes done by the admin, with the little exception that the webroot is set to /var/www which is required for all our software options which make use of an external webserver.
- DietPi-Software | Apache: Our new default config provides maximum privacy settings and security headers. It is trivial to override these with own configurations, on vhost or directory level.
- DietPi-Software | Apache: Logging is now done to journal (journalctl -u apache2) by default and the ServerName directive added with the local IP, to mute related startup warnings. This may imply access and CORS failures when applications check for the server name as allowed hostname but a different external IPs/hostnames was used for access. In such case generally applications provide a way to define a list of permitted hostnames. Without a server name set, usually webserver simply apply the HTTP_HOST header, which bypasses every related check. Apache, according to the logged warning, seems to use 127.0.1.1 then.
- DietPi-Software | Kodi: On Raspberry Pi Bullseye systems, the new official Raspberry Pi repository build for Kodi 19.3 is now installed. You can apply the upgrade manually by reinstalling Kodi: dietpi-software reinstall 31
- DietPi-Software | Kodi: The addon repository is now installed by default with all Kodi installs, which previously was the case only on RPi and Odroids. When currently missing, it can be manually installed: apt install kodi-repository-kodi
- DietPi-Software | Gitea: The service runs now as dedicated user "gitea" with its home directory "/mnt/dietpi_userdata/gitea" to allow easy transfer and usage of SSH keys for remote access. This applies to newly installed or reinstalled Gitea instances. Many thanks to @LilTrublMakr for reporting the related limitation with the previously used "dietpi" user: https://github.com/MichaIng/DietPi/issues/4620
- DietPi-Software | Chromium: On Raspberry Pi, the chromium-codecs-ffmpeg-extra package is now installed together with Chromium, which adds additional codecs for patented video/audio formats. Many thanks to @Krawei for identifying this Chromium video playback enhancement: https://github.com/MichaIng/DietPi/issues/5013
- DietPi-Software | rTorrent: By default on fresh installs, rTorrent now listens on TCP port 49164 for incoming BitTorrent connections. Aside of DHT, listening for incoming connections was completely disabled before, which lead to slow or no peer connections, depending on the tracker used. Many thanks to @Camry2731 for reporting this inconsistency with our other BitTorrent server options.

Fixes:
- Raspberry Pi | Resolved an issue in our images where on first boot two serial login consoles on the generic symlinked and actual serial devices could have been started. This doubled inputs and in turn broke successful username and password login via serial console on first boot. Many thanks to @ad7718 for reporting this issue: https://github.com/MichaIng/DietPi/issues/5014
- DietPi-Backup | Resolved an issue where backup and restore failed if a non-default backup location is used, as a wrong log file path was used. This is a v7.8 regression. Many thanks to @Malinka for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=39909#p39909
- DietPi-Config | Resolved an issue where enabling the "odroid-lcd35" LCD panel on Odroids failed as SPI is enabled by default, blocking the same GPIO ports. Many thanks to @MarcProux for reporting this issue: https://github.com/MichaIng/DietPi/issues/4154
- DietPi-Config | Resolved an issue where the network adapter menu did not show the static DNS server(s) effetively applied at first boot based on dietpi.txt settings. Many thanks to @nils-trubkin for reporting this issue: https://github.com/MichaIng/DietPi/issues/5054
- DietPi-Software | Resolved a v7.8 regression where ReadyMedia, Deluge, Sonarr and Jellyfin installs failed with an error on "usermod", since the services were not stopped first. This has been loved via live patches for v7.8 as well.
- DietPi-Software | Transmission: Resolved a v7.8 regression where on fresh installs the intended configuration was not deployed. Many thanks to @kannz and @alessandro.psrt for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=9567, https://dietpi.com/phpbb/viewtopic.php?t=9683
- DietPi-Software | SABnzbd: Resolved an issue where installs failed on ARMv6 and ARMv7 Stretch systems. Many thanks to @bensp for reporting this issue: https://github.com/MichaIng/DietPi/issues/4997
- DietPi-Software | Deluge: Worked around an issue on Raspberry Pi ARMv6 userland systems where the service failed to start. Deluge has hence been re-enabled for this systems. Many thanks to @themagicbullet for providing the workaround: https://github.com/MichaIng/DietPi/issues/4944
- DietPi-Software | UnRAR: Resolved an issue on Raspberry Pi 1 an Zero (1) where an incompatible "unrar" binary was installed. "unrar-free" from Raspbian is installed now on these models, but note that it does not fully support all RAR formats and may hence fail to extract archives in some cases.
- DietPi-Software | rTorrent: Resolved an issue where with Apache webserver the /RPC2 proxy to the rTorrent UNIX socket did not work due to invalid syntax. Many thanks to @Camry2731 for reporting this issue.
- DietPi-Software | RealVNC: Updated/fixed the workaround for a failing first start of RealVNC due to a cleared password file. Many thanks to @xmicky for reporting this issue: https://github.com/MichaIng/DietPi/issues/5050

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/5053

-----------------------------------------------------------------------------------------------------------

v7.8
(2021-11-13)

New SBC support:
- Radxa Zero | Initial support for this Raspberry Pi Zero form factored (but way more powerful) SBC has been added to DietPi with the hardware ID 74. Many thanks to @almirus and @dhry for helping with testing and debugging an early image: https://github.com/MichaIng/DietPi/issues/4831
- Raspberry Pi Zero 2 W | Initial support for this Raspberry Pi Zero/Zero W successor has been added, using hardware ID 3 for now (shared with RPi 3/3+), including overclocking profiles. Many thanks to @CassTG for providing early hardware information and doing intensive overclocking tests: https://dietpi.com/phpbb/viewtopic.php?t=9599

Removed SBC support:
- Odroid N1 | There is not a single reported DietPi Odroid N1 system, which makes sense as this model was never really released. Only a small number of developer samples are floating around, not worth to keep maintaining an image and dedicated code. If there are unreported Odroid N1 DietPi systems out there, they will be automatically migrated to the Generic Rockchip RK3399 device ID on DietPi update.

New software:
- DietPi-Dashboard | Thanks to the great work of @ravenclaw900, we are proud to announce our own official DietPi web interface for monitoring and managing your DietPi system using your web browser. It is still in beta phase as we test and gradually implement more features. We would be happy if you would try it out via "dietpi-software install 200" and give us feedback: https://github.com/MichaIng/DietPi/issues/448

Removed software:
- Subsonic | Since it is not developed anymore and due to shared library dependencies only compatible with Debian Stretch, we removed Subsonic from DietPi-Software. With Airsonic-Advanced, we'll provide a well maintained and Bullseye-compatible alternative soon. If you currently have Subsonic installed, it will remain. If you want to uninstall it, follow the instructions here: https://github.com/MichaIng/DietPi/pull/4895
- emonHub | Since we do not have a single reported installation, we removed emonHub from DietPi-Software. If you currently have emonHub installed, it will remain. If you want to keep using and updating it, have a look at the official repository at https://github.com/openenergymonitor/emonhub. If you want to uninstall it, follow the instructions here: https://github.com/MichaIng/DietPi/pull/4895

Changes:
- DietPi-Config | Overclocking profiles for most Raspberry Pi models have been updated to match the effective 100 MHz ARM/CPU frequency steps used by current firmware. Also an energy saving profile has been added to some models, which reduces minimum and maximum voltage a little, reducing energy consumption and heat emission a little on idle and on load.
- DietPi-Config | The option to prefer IPv4 connections when IPv6 is enabled has been removed: This only worked for APT and wget, while e.g. cURL and ping were never affected by this setting, which meant an inconsistent behaviour. If one faces issues with IPv6 enabled, it should be simply disabled instead of preferring/forcing IPv4 only for specific tools.
- DietPi-Backup | A feature has been added to enable daily system backup via cron job. Many thanks to @Lycidias93 for suggesting this feature: https://github.com/MichaIng/DietPi/issues/3871
- DietPi-Backup | Rsync/transfer logs are now done to "dietpi-backup.log" inside of the backup directory. This way they remain persistent even if DietPi-RAMlog is enabled and can be reviewed at a later time. This is helpful especially when daily backups via cron job are enabled, where the log obviously is not presented directly when the backup finished. A related option to review the last transfer log has been added to the dietpi-backup main menu. The old log file /var/log/dietpi-backup.log is moved to the new location if any backup exists during next DietPi update.
- DietPi-Backup | When using an NFS mount as backup target, it is now verified that the NFS share supports UNIX permissions to prevent the creation of a broken system backup in the first place.
- DietPi-Drive_Manager | When transferring the DietPi user data to a different drive, it is now checked whether the target location is located within a supported filesystem type, one with native symlink and UNIX permission support. The same is done when using the CLI script /boot/dietpi/func/dietpi-set_userdata.
- DietPi-Drive_Manager | Transferring the root filesystem is now supported on Odroid C4/HC4 models.
- DietPi-Drive_Manager | The option to transfer the root filesystem is now shown as well when the drive does not contain any filesystem. The process implies formatting with a supported filesystem anyway which makes the condition obsolete. Also it is not needed anymore to unmount the filesystem manually first, as this is done automatically before formatting. In the related format menu, only supported filesystems are listed, i.e. ext4 and additionally F2FS on Raspberry Pi. The input box to enter a custom mount point is omitted as it is only temporarily used until the root filesystem transfer has finished. The swap file is not disabled anymore as it can be copied and reused as is on the new root filesystem without issues.
- DietPi-Drive_Manager | When transferring the root filesystem, further checks are performed: There needs to be a dedicated boot partition (required on Raspberry Pi and default on our current Odroid images), as this is what the transfer steps expect and the only reason for moving only the root filesystem instead of cloning the whole drive or flashing the DietPi image to an external drive in the first place. The expected boot/kernel configuration files need to be present so that the kernel can be instructed to mount the new root filesystem. The DietPi user data must not currently be located at the target partition as it would be formatted and all data hence lost.
- DietPi-Drive_Manager | On ext4 filesystems, the reserved blocks percentage is now shown and can be changed as well if the drive is not currently mounted.
- DietPi-RAMlog | The /var/log directory structure is now synced to the persistent disk storage after software installs and via daily cron job to prevent missing logs files or directories in case of unclean shutdowns, which usually lead to failing service startups.
- DietPi-Software | Roon Server: Added support for the new .NET core based version, released on November 3rd, which is expected to have improved performance compared to the old Mono based version. To resolve an old issue with our Roon Server implementation (see below), a reinstall is done during the DietPi update, which pulls in the .NET core dependencies as well. But this will NOT update the Roon Server version to prevent issues with potentially required migration steps. After updating DietPi, use Roon's internal updater to benefit from the new version.

Fixes:
- Raspberry Pi | Worked around an issue on Raspberry Pi ARMv6/7 Bullseye systems where some software failed to start, e.g. RealVNC, if binaries were compiled against an older libraspberrypi0 version with different shared library names.
- DietPi-Drive_Manager | Resolved an issue where resizing F2FS filesystems failed when currently mounted. Contradicting the docs and error output, mounting the filesystem read-only is not sufficient, but it needs to be unmounted instead, which is now done automatically before the resize and remounted afterwards.
- DietPi-Drive_Manager | Resolved an issue where resizing ext4 filesystems could have failed when not currently mounted. Especially if the drive is newly attached, a full fsck needs to be done once before it can be resized. This is now done automatically, allowing to resolve filesystem errors interactively, before resizing an offline ext4 filesystem.
- DietPi-Config | Resolved an issue where Raspberry Pi 4 overclocking profiles were offered on Raspberry Pi 400. A new set of profiles have now been added dedicated for the Raspberry Pi 400.
- DietPi-Software | IceCast: Resolved an issue where a new install failed due to an attempted operation on a non-existing file. Many thanks to @killtux for reporting this issue: https://github.com/MichaIng/DietPi/issues/4858
- DietPi-Software | Logitech Media Server: Resolved an issue where the uninstall failed as the package postinst script tried to remove the service user before the service was stopped.
- DietPi-Software | Roon Server: Resolved an issue where the internal updater purged all Roon Server data and configs, since the data directory was located within the install directory. Roon Server will now be installed to /opt/roonserver while the data directory remains at /mnt/dietpi_userdata/roonserver. This change will be applied via DietPi update as well, your data and configs will remain untouched. Many thanks to @JanKoudijs for reporting this issue and providing a solution: https://github.com/MichaIng/DietPi/pull/4897
- DietPi-Software | LXDE: Resolved an issue where on some cases on first desktop start, desktop icons were missing and another issue on Bullseye systems, where a "No session for pid" error message popped up on desktop start. Many thanks to @kerryland for reporting these issues: https://github.com/MichaIng/DietPi/issues/4914
- DietPi-Software | LXDE: Resolved an issue where the Firefox browser panel icon was present even if no Firefox was installed. In this case now either Chromium or the text editor is added as replacement.
- DietPi-Software | Home Assistant: Resolved an issue where the install failed on ARMv6/ARMv7 Bullseye systems.
- DietPi-Software | Tor Relay: This software option has been disabled on Stretch. The Tor package shipped by the Debian Stretch repository is too old to support required protocols of the Tor network, when running a relay. Many thanks to @cptechnik for reporting this issue: https://github.com/MichaIng/DietPi/issues/4925
- DietPi-Software | Deluge: Resolved an issue where on fresh installs the services failed due to an invalid config file syntax. Many thanks to @bookedirl for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=9553
- DietPi-Software | Deluge: As the package from Raspbian Bullseye currently fails, we needed to disable Deluge for Raspberry Pi systems with ARMv6 Bullseye image. The bug has been reported to the Raspbian maintainers and we hope for a fix until next DietPi release: https://github.com/MichaIng/DietPi/issues/4944
- DietPi-Software | Lighttpd: Resolved an issue where reinstalls on a Bullseye system with DietPi-LetsEncrypt used, erroneously enabled an SSL configuration which could prevent the service start.

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/4951

-----------------------------------------------------------------------------------------------------------

v7.7
(2021-10-16)

Removed software:
- CouchPotato | Sadly, the CouchPotato project is not maintained anymore and has been abandoned. In turn we removed it from DietPi. The instance installed on your system will remain, but it cannot be installed, reinstalled or uninstalled anymore. We recommend to migrate to an alternative project, like Radarr, which can be found in DietPi-Software was well. Manual CouchPotato uninstall instructions: https://github.com/MichaIng/DietPi/issues/4323#issuecomment-927128724

Changes:
- General | The /boot/dietpi/func/obtain_network_details script has been removed, including the related /run/dietpi/.network file to obtain network details. All uses of these files have been replaced with the new DietPi-Globals G_GET_NET function (see below).
- DietPi-Globals | A new global function G_GET_NET has been added to print network interface details. Most importantly it prints info for the main interface, by following the priorities of /boot/dietpi/func/obtain_network_details: default gateway => state UP => IP assigned, but allows to additionally filter by IP family, type, interface name or print the default gateway explicitly. It aims to be a replacement for /boot/dietpi/func/obtain_network_details with more flexibility and to allow deriving always up-to-date interface info instead of depending on the correctness of a cache file.
- DietPi-Globals | G_GET_WAN_IP: We use our own GEO IP service now to show the systems WAN IP and location in the DietPi banner and DietPi-VPN. When Pi-hole was used, with a previous update, "freegeoip.app" was added to Pi-hole's whitelist, which now is not required anymore. You may hence remove that entry from the whitelist.
- DietPi-Globals | The global functions G_DEV_1 and G_DEV_BENCH have been removed, which did exist for testing and development only but are not used in our current workflows.
- DietPi-TimeSync | Use the same flag file that systemd-timesyncd itself uses since Buster, to skip an additional service restart and sync when it was done already.
- DietPi-TimeSync | When our oneshot modes (boot only, hourly, daily) are selected, systemd-timesyncd is now "enabled" to be started by systemd earlier at boot, instead of on our script call. Especially since both now share the same flag file (on Buster and above), this has a chance to prevent an additional service restart if the time sync has finished already when PostBoot is reached.
- DietPi-Boot | This script and service has been removed: Waiting for network is now done via DietPi-PostBoot "After=network-online.target", time sync is done in DietPi-PostBoot, but in background (mostly not required for service starts) and pre-installed image stage handling is as well done in PostBoot now.
- DietPi-Update | A network connection and time sync check is now done before checking for updates, similar to how DietPi-Software does it on installs.
- DietPi-Login | The DietPi banner on login won't be shown anymore if ~/.hushlogin exists, which is a common method to prevent the shell from printing /etc/motd on login and should hence be respected for the DietPi banner as well. Many thanks to @dnknth for doing this suggestion: https://github.com/MichaIng/DietPi/issues/4786
- DietPi-JustBoom | Added the ability to enforce an output channel count, or to not enforce an audio format value to preserve the input stream format or leave conversion up to ALSA, which is now the default when resetting settings. Similarly, the audio output buffer can now be unset to keep the MPD default. Generally, if not required for a specific reason, it is recommended to not convert the audio stream and keep these settings unchanged/default.
- DietPi-Software | Deluge: Logging is not done to /var/log/deluged/ anymore but to journal instead, accessible via "journalctl -u deluged -u deluge-web". This change only affects new installs and reinstalls of Deluge.
- DietPi-Software | Deluge: On fresh installs, the web interface is now accessible as expected with the chosen global software password, stored hashed with a fresh random salt. Previously the password was hardcoded to "dietpi".
- DietPi-Software | Kodi: On Debian Bullseye, with Kodi 19, GBM support is present by default, which means that Kodi can be started without a wrapping X server. This is now done by default when starting Kodi outside of a desktop session, including the dietpi-autostart option. This also means that an X server is not installed anymore as a dependency of Kodi, but only as a dependency of a desktop environment.
- DietPi-Software | Kodi: It can now be installed on all devices. In some cases, video playback performance may be bad, depending on the GPU, whether good drivers are available, and on the video quality, of course. However, it should be our users who evaluate whether it's sufficient or not, instead of us. With Debian Bullseye, new Mesa drivers and Kodi 19 started via GBM, performance should be much better than it was with older Debian/package versions.
- DietPi-Software | File Browser: The default network port has been changed to 8084 to resolve a conflict with HTPC Manager. This only affects new File Browser installs. Many thanks to @KamikazeePL for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=9507

Fixes:
- General | Since the Armbian repository router does not reliably preserves HTTPS on redirects yet, APT by times fails when detecting a downgrade from HTTPS to HTTP. We hence change the armbian.list to use plain HTTP until the issues with the router have been resolved.
- General | Worked around an issue on Debian Stretch where "systemctl enable/disable --now" does not start/stop the service in certain circumstances. This is solved within our error handler "G_EXEC", hence when manually calling systemctl you may still face this: https://github.com/MichaIng/DietPi/issues/4815
- General | Applied a workaround on Bullseye systems with older Linux versions (v4.14 and below) which do not sufficiently support the new "unified cgroup hierarchy" (a.k.a. cgroups-v2). Since the newer systemd tries to use it automatically, Docker and similar software which make use of cgroups fail. For devices with known boot configuration file, the kernel command line arguments are applied to force the legacy cgroups hierarchy usage.
- DietPi-Backup | Resolved an issue where clearing the PATH cache via "hash" command did not work as of a wrong command line argument: https://github.com/MichaIng/DietPi/issues/4800
- DietPi-LetsEncrypt | Resolved an issue where the script failed when ownCloud or Nextcloud were installed. Many thanks to @billouetaudrey for reporting this issue: https://github.com/MichaIng/DietPi/issues/4752
- DietPi-JustBoom | Resolved an issue where applying some MPD settings did not work. Many thanks to @elevader for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=9426
- DietPi-Config | Resolved an issue where the WiFi connection state could have been obtained falsely as accidentally the Ethernet interface index was used to derive it.
- DietPi-Config | Resolved an issue on NanoPi NEO (and likely other Allwinner H3 SBCs) where selecting a sound card failed as an invalid control was tried to be set. Many thanks to @VS-X for reporting this issue: https://github.com/MichaIng/DietPi/issues/4833
- DietPi-Software | Resolved an issue where software services failed with a cryptic error message, when an expected directory was not present. This was especially reported with Sonarr and Radarr, if their log directory was missing for some reason. When directories are missing, which are explicitly listed to be read-writeable within the systemd service, systemd prints "Failed at step NAMESPACE spawning", while Sonarr and Radarr themselves would print a clearer error message about the missing log directory. Many thanks to @stevewitz for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=9463
- DietPi-Software | Lighttpd: Resolved an issue where the upgrade from Buster to Bullseye, following our guide, fails if HTTPS was enabled via DietPi-LetsEncrypt before. Many thanks to @fhals for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=9477
- DietPi-Software | Kodi: Resolved an issue on RPi ARMv8/64-bit systems where Kodi fails to start when it was installed without a desktop. Many thanks to @Klola for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=38079#p38079
- DietPi-Software | Deluge: Resolved an issue on Bullseye where the web interface service did not start as a new command line flag "-d" is required to keep it in foreground. Many thanks to @quyentruong for reporting this issue: https://github.com/MichaIng/DietPi/issues/4785
- DietPi-Software | Home Assistant: The Python version compiled with Home Assistant has been bumped to v3.9.7, which resolves and issue with installs on 32-bit ARM systems. Many thanks to @Przemek for reporting this issue: https://github.com/MichaIng/DietPi/issues/4372#issuecomment-936656595
- DietPi-Software | Home Assistant: Resolved an issue where Home Assistant did not start on ARM systems due to newly required runtime libraries.
- DietPi-Software | Chromium: Resolved an issue where the autostart option didn't work if Chromium was installed without a desktop. Many thanks to @jowelboy for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=9531
- DietPi-Software | Chromium: Resolved an issue on RPi where starting Chromium failed if no desktop was installed, due to a missing dependency. Many thanks to @Loader23 for reporting this issue: https://github.com/MichaIng/DietPi/issues/4782
- DietPi-Software | X.Org X Server: Resolved an issue with Odroid N2 and C4 models where the installation failed because of a typo. Many thanks to @wiml for reporting this issue: https://github.com/MichaIng/DietPi/issues/4830
- DietPi-Software | Airsonic: Since the project has been archived and does not support Java 17, it has been disabled on Bullseye. We're watching a fork (https://github.com/airsonic-advanced/airsonic-advanced) which is actively developed and which is Java 17 compatible. We currently still face some major issues so that we needed to postpone the migration. Many thanks to @Andaloup for reporting this issue: https://github.com/MichaIng/DietPi/issues/4847
- DietPi-Software | FreshRSS: Resolved an issue where on reinstalls nested /opt/FreshRSS/FreshRSS-master and /opt/FreshRSS/p/p were created. Since FreshRSS has an internal updater, reinstalls won't download and install the new version as long as /opt/FreshRSS is present already. The nested directory and link is removed on next DietPi update, when present. Many thanks to @kinoushe for reporting this issue: https://github.com/MichaIng/DietPi/issues/4775

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/4840

-----------------------------------------------------------------------------------------------------------

v7.6
(2021-09-18)

Changes:
- General | Initial detection and support for Debian 12 Bookworm (the new "testing" version) has been added to DietPi. Everyone is invited to upgrade to Bookworm to stay on bleeding edge. Just note that due to continued breaking changes coming with package upgrades, some features and software installs are broken or will break. We are happy to receive your bug report then, to have necessary changes implemented in DietPi as fast as breaking changes in Bookworm happen, until it becomes the new stable Debian release, expected in summer 2023.
- DietPi-FS_partition_resize | On first boot, DietPi automatically expands the root partition and filesystem to cover the full disk size. In some circumstances, e.g. on older kernel versions, it may happen that the two used commands "partprobe" and "partx -u" fail to inform the kernel about the changed partition table and hence the filesystem is not expanded. In such case, the system is now rebooted automatically once to assure that the new partition table is loaded and the filesystem is then expanded. This change affects only new images with contain DietPi v7.6 already, since this expansion is done before DietPi updates itself. Many thanks to @Dtrieb for reporting a case where the filesystem expansion failed: https://github.com/MichaIng/DietPi/issues/4582
- DietPi-Drive_Manager | Native Linux exFAT support is now detected and respected by skipping the obsolete FUSE driver install in case. Additionally the new "exfatprogs" are installed on Bullseye, written and implemented with Debian Bullseye along with the native Linux exFAT implementation.
- DietPi-Drive_Manager | exFAT mounts now have 775 mode and are owned by the "dietpi" group, if it was not manually removed. By default, when the FUSE driver is used, mounts have 777 mode so that all users have full access, which isn't optimal for security reasons. With native Linux exFAT support mounts have 755 mode by default, so that DietPi-Software's download and media software implementations don't have write access. "775 root:dietpi" is a good compromise if the "dietpi" group exists, matching the permissions for content directories in /mnt/dietpi_userdata. Many thanks to @K92Pi for reporting a related issue: https://github.com/MichaIng/DietPi/issues/4680
- DietPi-Drive_Manager | Added support for moving the root filesystem to a different drive on Odroid N2.
- DietPi-AutoStart | A new autostart option "Custom script (foreground, with autologin)" has been added, which executes the custom script "/var/lib/dietpi/dietpi-autostart/custom.sh" after being logged in with the chosen user automatically, in foreground on the main screen. To have it more reasonably separated, the previous custom script option has been changed to "Custom script (background, no autologin)", which is executed via systemd service, independently of any login state like before, but does not print to foreground console anymore. Instead output goes to journal (journalctl -u dietpi-autostart_custom) like most other systemd services do. The foreground mode now behaves like most other foreground/GUI autostart options, launches after autologin at the main screen (TTY1) and, if it's a long running process, it can be cancelled via CTRL+C, just like CAVA or DietPi-CloudShell. If one wants to run a custom script in foreground on the main screen before/independent of a login, placing it into /var/lib/dietpi/postboot.d/ is another option. All contained scripts are executed at the end of the boot sequence as root user on the main screen, without any manual login required. Many thanks to @scorgn for implementing this feature: https://github.com/MichaIng/DietPi/pull/4634
- DietPi-Software | TigerVNC: Instead of x11vnc, TigerVNC's own scraping server is now used for shared desktop mode, which is a bit lighter and shares a lot of libraries with the TigerVNC standalone server package.
- DietPi-Software | RealVNC: Having desktop autologin enabled does not force the shared desktop VNC mode anymore. Furthermore our "vncserver.service" does not call RealVNC's "vncserver-x11-serviced.service" for the shared desktop mode, but instead the actual vncserver-x11 executable is called directly. This has some benefits, e.g. it allows to use our service for a virtual desktop while using RealVNC's service to allow connections to the shared local desktop independently. Many thanks to @K92Pi for bringing this idea to us: https://github.com/MichaIng/DietPi/issues/4672
- DietPi-Software | RealVNC: The VNC server is now started with "VncAuth" authentication by default, which allows any VNC viewer to connect, not just RealVNC's ones. Use "vncpasswd" to change the password, which is now independent of the UNIX user passwords. It defaults to the global software password on a fresh install.
- DietPi-Software | Amiberry: Due to changes in DietPi v7.5, enabling Amiberry fast boot won't change the TTY for boot/kernel on Raspberry Pi anymore, as they do not directly interfere with Amiberry screen output anymore. But due to this change, during screen mode changes, the raw console output is visible for a short time, which breaks the Amiga feeling. To address the issue, instead of changing the kernel command line (cmdline), Amiberry will now switch to a different expectedly empty TTY on startup and switch back to the main TTY when being stopped, including the case of failure. As this is achieved with the Amiberry service itself, the Amiberry standard boot option benefits from it as well, as well as manual "systemctl start amiberry" calls, all the same way, and it is not limited to the Raspberry Pi, as the previous TTY change was. Many thanks to @zompiexx for reporting this issue: https://github.com/MichaIng/DietPi/issues/4692
- DietPi-Software | MPD: The service file and default mpd.conf are not overwritten anymore (from Buster on), but instead the required changes are added to the default, shipped with the Debian package. This resolves some error messages on MPD startup on Bullseye and leaves most custom changes untouched on a reinstall. Furthermore, by default MPD now logs to journal, accessible via "journalctl -u mpd". Many thanks to @maartenlangeveld for reporting the MPD startup errors: https://github.com/MichaIng/DietPi/issues/4690
- DietPi-Software | Kodi: Our Raspberry Pi accelerated Kodi package is now installed on ARMv7 RPi systems as well.

New Software:
- Box64 | This x86_64 user space emulator allows you to run x86_64 binaries on an ARMv8/arm64 system. It works very similar to Box86, hence is able to use arm64 shared libraries with the x86_64 binaries, so that often no additional libraries need to be installed. Thanks to binfmt, it is invoked automatically if an x86_64 binary is tried to be executed. Many thanks to @ravenclaw900 for implementing this software title: https://github.com/MichaIng/DietPi/pull/4625
- File Browser | Access and manage your data from anywhere via browser with this lightweight remote file manager. Other than ownCloud and Nextcloud, it accesses the raw data on your filesystem, based on a chosen root directory, which makes it similar to Syncthing. You can setup multiple users with their own root directory and also sharing files and directories via password-protected link is possible.
- Spotifyd | Spotifyd streams music just like the official client, but is more lightweight. It also supports the Spotify Connect protocol, which makes it show up as a device that can be controlled from the official clients. Many thanks to @ressu for implementing this software title: https://github.com/MichaIng/DietPi/pull/4713

Fixes:
- General | Resolved an issue on ARMv7 Buster and Bullseye system, where the haveged entropy daemon crashes due to limited syscall permissions. This can lead to several issues, like hanging boot, hanging installs or services starts. Many thanks to @jg777 for reporting this issue: https://github.com/MichaIng/DietPi/issues/4710
- DietPi-Drive_Manager | Corrected false information when doing an exFAT filesystem check & repair: Until Stretch, only checking for exFAT errors is supported but not repairing them. From Buster on, both is fully supported.
- DietPi-Drive_Manager | Resolved an issue where on Odroid C2 moving the root filesystem to a different drive failed. Many thanks to @yandritos for reporting this issue: https://github.com/MichaIng/DietPi/issues/4733
- DietPi-LetsEncrypt | When enabling HTTPS redirect or HSTS and ownCloud or Nextcloud are installed, the "overwrite.cli.url" setting in the config.php is updated accordingly to contain the primary HTTPS domain. This is required for cron jobs and the occ/ncc commands to access ownCloud/Nextcloud through the webserver, as the Let's Encrypt certificate is only valid for the external domain name and not "localhost". Many thanks to @droogi for reporting a possibly related issue: https://github.com/MichaIng/DietPi/issues/4353
- DietPi-Software | TigerVNC: Resolved an issue where remote connections didn't work by default on Bullseye systems, as a different configuration file is used.
- DietPi-Software | LXDE: Resolved an issue on Raspberry Pi where calling lxappearance (Customize Look and Feel) failed due to incompatible RPi desktop packages. Many thanks to @pinipon for reporting this issue: https://github.com/MichaIng/DietPi/issues/4687
- DietPi-Software | LXDE: Resolved an issue on Bullseye where some icon themes could not be applied due to a missing SVG library. Many thanks to @pinipon for reporting the issue and solution: https://github.com/MichaIng/DietPi/issues/4687
- DietPi-Software | LXDE: Resolved an issue where the hotkey setup didn't work because of a missing openbox plugin. Many thanks to @pinipon for reporting the issue and solution: https://github.com/MichaIng/DietPi/issues/4687
- DietPi-Software | Blynk: Resolved an issue where the log directory may be missing, which breaks the service start, when the userdata were migrated from one system to a new one. Many thanks to @Phil1988 for reporting this issue: https://github.com/MichaIng/DietPi/issues/4721
- DietPi-Software | qBittorrent: Resolved an issue on Bullseye systems where login to the web interface was not possible with the global software password since the required hash algorithm has changed. Many thanks to @aftensleuk for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=22564#p22564
- DietPi-Software | ReadyMedia: Resolved an issue on Bullseye where the service does not start unless the log directory is manually created. Due to a Debian package patch, on Bullseye logs are forced to file logging again, so that /var/log/minidlna again needs to exist. Many thanks to @AnzoP for reporting this issue: https://github.com/MichaIng/DietPi/issues/4745

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/4747

-----------------------------------------------------------------------------------------------------------

v7.5
(2021-08-21)

Changes:
- DietPi-Globals | A new global function G_GET_WAN_IP has been added to print the public IP and location info. This function is now used by DietPi-Banner and DietPi-VPN to show the public IP. It makes use of the public API at freegeoip.app, which may also be used by malware, like all public APIs, and may hence be present in public blocklists. The function checks, whether this is the case, via curl's exit code, and in case prints a meaningful error message. Many thanks to @cocoflan for reporting the a related case: https://github.com/MichaIng/DietPi/issues/4445
- DietPi-FirstBoot | On our x86_64 BIOS images, the GRUB bootloader is configured to install itself on upgrade to the "/dev/sda" drive, which is the most commonly used system drive path and there is no way to configure a unique identifier that is assured to match the later actual system drive. When GRUB is upgraded, and the configured drive path does not exist, or GRUB has doubts that it is the correct system drive, the upgrade will fail. If GRUB installs itself to the wrong drive, the actually booted GRUB version won't match the GRUB files on the root filesystem, which can make the system unbootable. To enhance the situation, on first boot, DietPi detects the apparent system drive and changes the GRUB configuration accordingly. This will work on all our images, but note that on custom images it might be wrong: Generally it is possible to have the bootloader installed on one drive, but the root filesystem stored on a different physical drive, and we have no possibility to reliable detect this case. Many thanks to @brianbloom for reporting the issue: https://github.com/MichaIng/DietPi/issues/4542
- DietPi-Software | Java: This install option has now been split into the JRE (Java Runtime Environment) and the JDK (Java Development Kit). As our Java-written software options require the JRE only, this saves over 200 MiB of additional JDK-related disk space. For developers, however, the JDK stays with the same software ID.
- DietPi-Software | Cuberite: Re-applied the official binary on ARMv6 systems (Raspberry Pi 1 and Zero). Since those did not support ARMv6 in the past, we installed an old self-hosted binary, but now the latest official one can be used. Many thanks to @tigerw for letting us know about the change: https://github.com/MichaIng/DietPi/issues/3664#issuecomment-901261614
- DietPi-Software | Lidarr: Where supported (on all platforms but Raspberry Pi 1/Zero), the .NET core build build is now installed, which makes the dedicated Mono runtime obsolete and should generally perform better. This migration is applied automatically during the DietPi update, your settings and data remain untouched. Many thanks for informing us about this possible enhancement: https://github.com/MichaIng/DietPi/issues/4607
- DietPi-Software | PaperMC: Since Minecraft 1.17 requires Java 16 or newer, it does not work anymore on Debian versions below Bullseye and not on ARMv6, with the Java builds we ship, and has hence been disabled for those systems. AdoptOpenJDK is currently in the process of becoming "Adoptium" and creating a new APT repository, after which we can migrate to re-enable support on older Debian versions. On ARMv6 however I most likely won't work and the newest found Java build above version 8, running on ARMv6, is a single Zulu Java 11 build.

New Software:
- Java JRE | The OpenJDK Java Runtime Environment has been made available as dedicated software option with ID 196 (see changes above).

Fixes:
- DietPi-Software | Blynk Server: Resolved an issue where the install failed as the previous official repository has been removed by Blynk Inc. We switched to a fork, created hours before the repository removal, to preserve the install option and save users from being forced to use the commercial cloud servers. But note that there is no guarantee that the official apps will keep supporting it for long. In case older versions of the apps might need to be used.
- DietPi-Software | Roon Extension Manager: Resolved an issue where the installer failed when dietpi-software was executed with sudo as unprivileged user. The installer internally uses the SUDO_USER variable to perform some tasks, which fails to download the container startup shell script, as only root can write to the download location. Many thanks to @Esad-np for reporting this issue: https://github.com/MichaIng/DietPi/issues/4462
- DietPi-Software | Java JRE: Resolved an issue where the install failed on ARMv6: https://github.com/MichaIng/DietPi/issues/4509#issuecomment-876413815
- DietPi-Software | Java JRE: Resolved an issue where the install failed on Raspbian Bullseye systems, since Raspbian has no compiled Java 17 packages yet.
- DietPi-Software | VSCodium: Added the missing dependency on ALSA for cases where no desktop is installed and VSCodium is started as standalone X server session. Many thanks to @Gill-Bates for reporting this issue: https://github.com/MichaIng/DietPi/issues/4610
- DietPi-Software | Bazarr: Resolved an issue where the install failed, as assets have been moved into an own repository, bundled with now release downloads. Many thanks to @psi5asp for reporting this issue: https://github.com/MichaIng/DietPi/issues/4615
- DietPi-Software | phpSysInfo: Resolved an issue where the install failed because of a changed download URL. Many thanks to @robex for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=9278
- DietPi-Software | LXDE: Resolved an issue on Raspberry Pi Bullseye systems, where the install failed. Many thanks to @ravenclaw900 for reporting this issue: https://github.com/MichaIng/DietPi/issues/4555#issuecomment-898780672
- DietPi-Software | PiJuice: Resolved an issue where the install failed on Bullseye systems. Many thanks for reporting this issue: https://github.com/MichaIng/DietPi/issues/4643
- DietPi-Software | LXQt: Resolved an issue where the install failed on Bullseye systems. Many thanks to @LieDanG for reporting this issue: https://github.com/MichaIng/DietPi/issues/4656
- DietPi-Software | PaperMC: Resolved an issue where the install failed due to missing build dependencies.
- DietPi-Software | ProFTPD: Resolved an issue where the service start failed on Bullseye systems due to an invalid config entry. Many thanks to @twikedk for reporting this issue: https://github.com/MichaIng/DietPi/issues/4666
- DietPi-Software | Kodi: Resolved an issue where the install failed on ARMv6 Bullseye images, as neither Raspbian nor the Raspberry Pi repository contain a Kodi package yet. We ship now an own package. Many thanks to @sibofax for reporting this issue: https://github.com/MichaIng/DietPi/issues/4650

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/4668

-----------------------------------------------------------------------------------------------------------

v7.4
(2021-07-24)

Changes:
- DietPi-Update | A new live patching system has been implemented. This allows us to ship little fixes and updates, that are safe to apply with a one-line command, until the next DietPi version is released. Live patches are checked for together with DietPi updates and a notification is shown in the login banner as well, when new live patches have been found. When available, each patch can be individually applied or dismissed and the login banner won't bother you again about patches that you have seen in the dietpi-update menu already, regardless whether you applied them or not.
- DietPi-Globals | G_AGUP: Our "apt-get update" wrapper will now throw an error, when some index files couldn't be downloaded, e.g. due to DNS failure. Currently "apt-get update" prints a warning but does not return an error code. It is better to have an error handler prompt here, where we have an associated command output, than later when package installs or upgrades fail because of outdated information or missing list files.
- DietPi-Software | Home Assistant: On ARMv6/7, piwheels.org is now used within pyenv, which ships pre-compiled wheels for many Python modules and by this speeds up the installation, first service start and install of new integrations.
- DietPi-Software | myMPD: Updated config steps to work with the new myMPD v8.0.0. Many thanks to @jcorporation for informing us about this major update and how to adjust our config steps: https://github.com/MichaIng/DietPi/issues/4562
- DietPi-Software | Komga: Obsolete entries have been removed from the default config and file hashing will be disabled on new installs. Many thanks to @quyentruong for contributing this change: https://github.com/MichaIng/DietPi/pull/4570

New Software:
- Synapse | A Matrix homeserver implementation has been added with software ID 125.
- PostgreSQL | A persistent advanced object-relational database server has been added with software ID 194.
- youtube-dl | The famous command-line program to download videos from YouTube and other video platforms has been added to DietPi-Software with ID 195.

Fixes:
- Debian Stretch | Since Armbian dropped support for Debian Stretch from their APT repository, Armbian-based Stretch systems will have their APT sources adjusted to pull kernel, device tree, bootloader and firmware packages from the Armbian Buster suite. These are compatible with all Debian versions and have no dependencies or dependants which could cause conflicts.
- DietPi-Set_swapfile | Resolved an issue where remounting the /tmp tmpfs filesystem failed, if another filesystem type was mounted at /tmp. This could be especially the case during DietPi-PREP image creation. Many thanks to @timocapa for reporting this issue: https://github.com/MichaIng/DietPi/issues/4573#issuecomment-884993352
- DietPi-Software | X.Org X Server: Resolved an issue where the X server failed on PINE A64 as the wrong DDX driver packages were installed. Many thanks to @exadeci for reporting this issue: https://github.com/MichaIng/DietPi/issues/4541
- DietPi-Software | PaperMC: Resolved an issue where the install of Geyser and Floodgate plugins failed as the download link changed.
- DietPi-Software | Home Assistant: Resolved an issue where install on ARMv6/7 failed if g++ was not installed.
- DietPi-Software | Pi-hole: Resolved an issue where local/LAN access via IPv6 was blocked, when the option to block public access to the admin panel was selected. This does not work when global unicast IPv6 addresses (GUA) are used within the LAN, hence unique local addresses (ULA) needs to be enabled and used to access the Pi-hole admin panel. Many thanks to @dunxd for reporting this issue: https://github.com/MichaIng/DietPi/issues/4575

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/4584

-----------------------------------------------------------------------------------------------------------

v7.3
(2021-06-26)

Changes:
- DietPi-Automation | A new dietpi.txt setting "AUTO_SETUP_DHCP_TO_STATIC" has been added. When set to "1", DHCP leased network settings will be applied as static network settings automatically during first run setup. This works as well with older images, by adding the above setting to dietpi.txt.
- DietPi-Backup | The include/exclude filter handling has been reworked. /mnt (dietpi_userdata) and /media related rules are added now via the editable custom filter file, which gives users more control over these. Especially it allows to include other mount points below /mnt, hence external dietpi_userdata, which was previously impossible due to the order in which those filter rules are applied.
- DietPi-VPN | The killswitch has been adjusted to allow incoming SSH connections. Many thanks to @yslupdates for doing this request: https://github.com/MichaIng/DietPi/issues/4447
- DietPi-Config | Support for the Allo Boss2 DAC OLED display has been added to the "Display Options" > "LCD/OLED Panel addon" menu. When selecting the Allo Boss2 DAC as sound card, you will be asked whether to enable the OLED display as well.
- DietPi-Software | Allo web UI: Updated to v13.3 which adds support for the Allo Boss2 DAC and resolves an issue where the Squeezelite service could not be controlled as the service path has changed. All credits go to Allo for implementing these changes.
- DietPi-Software | Cuberite: This has been enabled for ARMv8 systems, where the available ARMv7 binaries work just fine.

New Software:
- AdGuard Home | This DNS sinkhole ad blocker for your LAN, similar to Pi-hole, has been added with software ID 126.
- Beets | This command line music organizer and manager has been added with software ID 190.
- frp | This proxy system has been added as install option with ID 171.
- Snapcast Server | This multiroom audio server component has been added with software ID 191. Many thanks to @foxy82 for implementing this software title: https://github.com/MichaIng/DietPi/pull/4465
- Snapcast Client | The multiroom audio client component has been added with software ID 192. Many thanks to @foxy82 for implementing this software title: https://github.com/MichaIng/DietPi/pull/4465
- K3s | Added a lightweight Kubernetes implementation as install option with ID 193. Many thanks to @mortenlj for implementing this software title: https://github.com/MichaIng/DietPi/pull/4476

Removed Software:
- Tomcat 8 | Tomcat version 8 is available until Debian Stretch only, from Buster on it's Tomcat 9. There is no reasonable configuration that DietPi-Software can do on top of installing the APT package, which can be easily done manually via "apt install tomcat9". The software option is hence removed from DietPi-Software, in favour of a manual package install.

Fixes:
- DietPi-JustBoom | Resolved an issue where the equalizer was always shown as "Off" even when it was just or previously enabled (v7.2 regression). Many thanks to @shao for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=35072#p35072
- DietPi-Drive_Manager | Resolved an issue where network drives were detected as physical drives (v7.2 regression). Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/4479
- DietPi-Software | Resolved an issue where with AUTO_SETUP_AUTOMATED=1 the OpenSSH client was always installed on first boot, even if it was not requested.
- DietPi-Software | Node-RED: Resolved an issue where the Python 3 RPi.GPIO module was tried to be installed as dependency on non-RPi devices (v7.2 regression). Many thanks to @TheAdminFrmoHell for reporting this issue: https://github.com/MichaIng/DietPi/issues/4478
- DietPi-Software | PI-SPC: Resolved a syntax error in the shutdown script loop. Many thanks to @renaudlarzilliere for reporting this issue: https://github.com/MichaIng/DietPi/issues/4488

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/4515

-----------------------------------------------------------------------------------------------------------

v7.2
(2021-05-29)

New SBC support:
- Pinebook Pro | Initial hardware identifier (ID: 46) and support for this device has been added to DietPi.
- NanoPi R4S | Initial hardware identifier (ID: 47) and support for this device has been added to DietPi.
- NanoPi R1 | Initial hardware identifier (ID: 48) and support for this device has been added to DietPi.

Changes:
- DietPi-DDNS | Added native support for FreeDNS and OVH.
- DietPi-VPN | Added native support for IPVanish and Private Internet access (PIA)
- DietPi-VPN | When "Reset" is selected, you're now offered to purge the OpenVPN package, as long as neither the OpenVPN (server) install option nor PiVPN is installed. Many thanks to @maartenlangeveld for doing this suggestion: https://github.com/MichaIng/DietPi/issues/4346
- DietPi-AutoStart | Selecting desktop autologin with non-root user has been made much more reliable. Previously the X server itself was started by the login user, which often requires additional permissions and sometimes, based on GPU and driver, is not possible at all without further customisation. The method has been changed so that LightDM is used for non-root autologins, just like it is for manual desktop logins, but logging into the desktop automatically with the chosen user.
- DietPi-Config | On Raspberry Pi, the Allo Boss2 DAC can now be selected from the sound card list. The OLED display that comes with this product currently needs to be installed manually by following Allo's instructions, but will be natively integrated into DietPi with the next release v7.3.
- DietPi-Software | A desktop preference choice has been added. Before first boot via new dietpi.txt AUTO_SETUP_DESKTOP_INDEX setting or with the new menu entry it can be now chosen which desktop to install when another software selection requires one, especially remote desktop solutions. It works like the webserver preference, so it only play a role when a desktop is installed as dependency and is overridden by manual desktop selections.
- DietPi-Software | A browser preference choice has been added. Before first boot via new dietpi.txt AUTO_SETUP_BROWSER_INDEX setting or with the new menu entry it can be now chosen whether and which browser to install automatically together with desktops. It only plays a role when a desktop is installed and is overridden by manual browser selections. Previously, Firefox was always installed together with desktops, which has now become an independent software option (see new software below).
- DietPi-Software | WiringPi: On RPi, a new updated fork of the deprecated original project is now used, which enables support for RPi 4/400 and CM4: https://github.com/WiringPi/WiringPi
- DietPi-Software | WiringPi: On new installs and reinstalls, the source/examples directory is now installed to /mnt/dietpi_userdata/WiringPi instead of /root/wiringPi, to enable general access to non-root users.
- DietPi-Software | Node.js: On ARMv6, new Node.js versions are now installed via unofficial builds. Official builds are provided up to Node v11 only. Many thanks to @ollliegits for adding support for this builds to our Node.js installer fork: https://github.com/MichaIng/nodejs-linux-installer/pull/2
- DietPi-Software | EmonPi: This software option has been renamed to "emonHub", the name of the data collector for the "emonPi" RPi energy monitor addon board. A much newer Python 3 compatible version form the official OpenEnergyMonitor repository is installed from now on, providing additional features and fixes.
- DietPi-Software | RPi Cam Control: This install option has been disabled for 64-bit systems. It uses a 32-bit/armhf raspimjpeg binary that depends in 32-bit/armhf C library. It will be re-enabled once the project maintainer or we provide a native 64-bit/arm64 raspimjpeg binary.
- DietPi-Software | Roon Extension Manager: After a major upgrade to v1.0, it is now implemented as Docker container, rather than as Node.js module. The upgrade can be applied manually via "dietpi-software reinstall 86". Many thanks to @JanKoudijs for developing Roon Extension Manager and implementing the required changes into DietPi-Software: https://github.com/MichaIng/DietPi/pull/4399
- DietPi-Software | Pi-hole: New installs and reinstall will have the DNS query logging duration reduced to 2 days. An internal discussion revealed that no-one of us uses logs old than a few hours, while those are kept for a year by default, leading to database sizes from hundreds of MiBs to GiBs. We leave it at 2 days so that dashboard graphs/diagrams are not empty on Pi-hole (re)start. Users who require long-term DNS query data for statistics or similar, can easily increase the TTL, shown as well in our docs.

New Software:
- Firefox | The Mozilla browser has now become an independent software option with the ID 67 (see changes above).

Removed Software:
- LibSSL1.0.0 | This old library was kept for backwards-compatibility with old binaries but is not required anymore for any binary installed by DietPi-Software. It has hence been removed from the software list.

Fixes:
- Odroid XU4 | Resolved an issue where installs and possibly other tasks hang, because the device ran out of entropy. All Odroid XU4 system will have the unsupported hardware random generator daemon removed and the software HAVEGE daemon installed instead for entropy generation. Many thanks to @Speeedfire for reporting this issue: https://github.com/MichaIng/DietPi/issues/4318
- DietPi-Banner | Resolved an issue where the MOTD was not updated via daily cron job, if the banner settings have not been changed yet, hence no config file exists. Since the MOTD is enabled by default, it needs to be updated as well if the config file does not exist. Many thanks to @gorby-pranata for helping us discovering this issue: https://github.com/MichaIng/DietPi/pull/4292#issuecomment-830787256
- DietPi-Banner | Resolved an issue where DietPi-VPN stats could not be shown due to a false file path. Many thanks to @sl002 for reporting this issue: https://github.com/MichaIng/DietPi/issues/4354
- DietPi-Banner and DietPi-VPN | Resolved an issue where the WAN IP could not be derived, as the external API service we used has server issues by times. We switched to a (hopefully) more reliable one with higher rate limit as well, until we find time to host an own GeoIP API. Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/4393
- DietPi-Update | Resolved an issue where updating from DietPi v6.16 or older did not complete as intended. Many thanks to @orotarobas for reporting this issue: https://github.com/MichaIng/DietPi/issues/4385
- DietPi-Drive_Manager | Resolved an issue where NTFS (and potentially other) filesystems were not detected correctly, leading to failing mount attempts at boot. Many thanks to @NoLifer for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8971
- DietPi-Drive_Manager | Resolved an issue where info for drives with a systemd.automount unit was not detected correctly, leading to invalid fstab entries. Many thanks to @cocoflan and @BillyCorgan1 for reporting this issue: https://github.com/MichaIng/DietPi/issues/4339
- DietPi-JustBoom | Resolved an issue where the equalizer had no effect in some cases. Many thanks to @zackdvd for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8992
- DietPi-LetsEncrypt | Resolved an issue with Lighttpd, where lighty-enable-mod or lighty-disable-mod failed, if the related config was already enabled or disabled, respectively. Many thanks to @staxfax for reporting this issue: https://github.com/MichaIng/DietPi/issues/4336
- DietPi-Config | Resolved an issue where changing the locale generated it but did not apply it as new system default. Many thanks to @bamyasi for reporting the issue: https://github.com/MichaIng/DietPi/issues/3515#issuecomment-840751875
- DietPi-Software | Python 3: Resolved an issue where installing pip on Stretch systems failed, due to a changed download URL. Many thanks to @tfmeier for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8968
- DietPi-Software | Webmin: Resolved an issue where restarts from the web interface only stopped the service. Many thanks to @Burgess85 and @Keridos for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8839, https://github.com/MichaIng/DietPi/pull/4331
- DietPi-Software | Docker Compose: Resolved an issue on ARMv8 Debian Stretch systems, where the install failed because of missing development headers. Many thanks to @tfmeier for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=34293#p34293
- DietPi-Software | rTorrent: Resolved an issue where pre-v7.1 reinstalls with Lighttpd did not update the webserver configuration to provide the new RPC socket proxy. Many thanks to @bbsixzz for reporting this issue: https://github.com/MichaIng/DietPi/issues/4330
- DietPi-Software | rTorrent: Resolved an issue where v7.1 reinstalls failed. Many thanks to @Joulinar for fixing it.
- DietPi-Software | Radarr: Resolved an issue where an older fallback version was installed, rather than the latest one. Many thanks to @Takerman for reporting this issue: https://github.com/MichaIng/DietPi/issues/4350
- DietPi-Software | Node.js: Resolved an issue on ARMv6 where installing further modules via web interface failed, as an incompatible Node.js version was installed. The latest Node.js version is now installed via unofficial builds (see changes above). Many thanks to @torwan for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8944
- DietPi-Software | RPi Cam Control: Resolved two issues: Reinstalls failed when certain files in the web interface existed already and the shutdown and reboot buttons from the web interface failed due to insufficient webserver permissions.
- DietPi-Software | Kodi: Resolved an issue where an attempt was made during install to create a desktop entry, even if no desktop environment was installed. Many thanks to @sidgeg for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8995
- DietPi-Software | Bitwarden_RS: This project has been renamed by its author into "vaultwarden", to avoid confusion and potential legal issues with original Bitwarden software. This caused our install option to fail. To apply this important change to all Bitwarden_RS instances, it will be migrated via reinstall during DietPi update. As compiling can take up to several hours, users are informed at the beginning of the DietPi update, with the option to cancel and apply it at a later time. All data and configs will be preserved during the reinstall. Many thanks to @math-gout for informing us about this change: https://github.com/MichaIng/DietPi/issues/4325
- DietPi-Software | Home Assistant: Resolved an issue where the install failed, as running "pyenv init -" does not complement the PATH variable anymore.
- DietPi-Software | Mosquitto: Resolved an issue where the install failed on ARMv8 systems. Many thanks to @fra87 for reporting this issue: https://github.com/MichaIng/DietPi/issues/4424
- DietPi-Software | Kodi: Resolved an issue on 64-bit RPi systems, where starting Kodi outside of a desktop session (e.g. using the Kodi dietpi-autostart option) failed, as our script tried to start it without X server (intended on 32-bit RPi systems). Many thanks to @Milemar for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=9030

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/4422

-----------------------------------------------------------------------------------------------------------

v7.1
(2021-04-28)

Supported SBC changes:
- For historical reasons, DietPi had internal hardware identifiers for SBCs which are not officially supported anymore for a long time, namely various Orange Pi and Banana Pi models, BeagleBone Black and LeMaker Guitar. Since we do not provide a reference image and do not test features on those boards, we have no chance to reasonably use those hardware IDs code-wise to apply tweaks or enable features, which renders them meaningless. To avoid wrong assumptions, we hence removed the identifies for the named SBC models. As a replacement, we added a set of generic SoC identifiers, which can as well be selected from within the DietPi-PREP system converter script. This means that one is e.g. able to select "Generic Allwinner H3" and have an SoC identifier set by this, which is used within the code for conditionals based on the SoC, e.g. regarding GPU acceleration and other SoC-internal hardware features. The removed SBC models are converted automatically to those generic identifiers, so that e.g. after the update an OrangePi PC will be shown in our scripts and banner as "Generic Allwinner H3". While it looks like a degradation, it is a hardening, as it assures that no false assumptions and conditionals are triggered in our scripts but only those which we can know for sure being true, regardless of the initial Debian image you used.
- We removed the Firefly RK3399 from our supported devices list, as not a single user is reported via DietPi-Survey (https://dietpi.com/survey/#device). If case there were actually Firefly RK3399 DietPi systems, not participating DietPi-Survey, those would be migrated to the "Generic Rockchip RK3399" identifier, which code-wise maintains the exact same support.

Changes:
- DietPi-LetsEncrypt | It is now possible to obtain certificates for multiple domains, given as comma-separated list, with the first domain used as primary webserver name.
- DietPi-LetsEncrypt | It is now possible to obtain certificates without having a webserver installed. Certbot can start an own internal webserver for such case and the certificate can then be used to manually enable HTTPS for other web applications, running on other ports than 80/443.
- DietPi-LetsEncrypt | It is now possible to enable OCSP (Online Certificate Status Protocol) stapling for the obtained certificate. This allows clients to check if the certificate has been revoked, e.g. when the server has been compromised or the private key stolen.
- DietPi-LetsEncrypt | Lighttpd: HTTPS is now enabled for IPv6 requests and the deprecated TLSv1.0 and TLSv1.1 are disabled from Debian Buster on. With the Lighttpd version shipped by Debian Stretch, those TLS versions cannot be disabled.
- DietPi-NordVPN | The script received a major rework to allow being setup as ProtonVPN client and even with a custom OVPN config. For this reason it has been renamed to "DietPi-VPN", with the script moved to /boot/dietpi/dietpi-vpn and the console command alias changed to "dietpi-vpn" accordingly. Additionally a killswitch feature has been added which forcefully drops all WAN packets not sent through the VPN, when the connection got lost, until the VPN is disconnected manually/intentionally. Further is IPv6 now automatically disabled when the VPN connection is established. This is required to prevent IPv6 leaks as most public VPN providers/servers do not support IPv6. When it has not been disabled before, IPv6 is re-enabled automatically once the VPN connection stops. Many thanks to @ravenclaw900 for doing this major rework: https://github.com/MichaIng/DietPi/pull/4180
- DietPi-Arr_to_RAM | Support for Sonarr v3 and Radarr v3 has been added. On first link to RAM, a script "/mnt/dietpi_userdata/(sonarr|radarr|lidarr)/dietpi-arr_to_RAM.sh" is created, which allows updating the linked database backups via the programs "Custom Script" feature. Since v3, it is not possible anymore to pass arguments to custom script or call scripts inside the /boot directory at all, which broke the previous "/boot/dietpi/misc/dietpi-arr_to_RAM 2 (sonarr|radarr|lidarr)" calls in two ways.
- DietPi-FS_partition_resize | Added support to automatically resize F2FS and Btrfs filesystems on first boot.
- DietPi-Drive_Manager | Added support for resizing F2FS and Btrfs filesystems as well as format- and filesystem check & repair support for XFS filesystems.
- DietPi-Drive_Manager | When adding Samba mounts, credentials are not added in plain text to /etc/fstab anymore, but stored instead in a separate per-mount credential file with strict root-only read permissions. Many thanks to @TheOriginalMrWolf for doing this suggestion: https://github.com/MichaIng/DietPi/issues/4082
- DietPi-Config | Added a safe overclocking profile for RPi 3+ models. Many thanks to @lone for doing long-term stability tests and reporting back the result: https://dietpi.com/phpbb/viewtopic.php?p=32285#p32285
- DietPi-Config | When disabling the RPi camera feature, the bcm2835_isp kernel module is now additionally blacklisted. Since kernel 5.X it is otherwise loaded automatically and pulls in the whole camera modules stack as dependency, adding some additional memory usage and boot overhead. Many thanks to @ferbar for making us aware of this: https://github.com/MichaIng/DietPi/issues/4203
- DietPi-Software | The "optimised" and "additional" software menus have been merged. The separation did not follow consistent rules and this change allows us to have development tools and platforms in a more prominent position. Also it simplifies the software selection and addresses possible confusion about that separation among our users.
- DietPi-Software | Since multiple software titles were listening on the ports 5000 and 8000, the default ports of those titles have been changed to avoid conflicts on concurrent installs. No change is done during the DietPi update, even a software title reinstall won't change it, in most cases. For details see the individual software changes below.
- DietPi-Software | Mosquitto: Since v2, by default remote connections and no unauthenticated requests are possible anymore. On fresh installs and reinstalls, we'll enable remote connections, but create a password file, so that MQTT clients need to authenticate with username "mosquitto" and the global software password by default. Many thanks to @mattsmithuk for reporting this change: https://github.com/MichaIng/DietPi/issues/4133
- DietPi-Software | IceCast: The streaming server can now be installed on virtual machines as well and the default web UI password will now be the global software password instead of a random one. Since the DarkIce config file /etc/darkice.cfg contains the global software password in plain text, its permission mode is changed to 600 to limit read access to the root user only.
- DietPi-Software | OctoPrint: On fresh installs, the default listening port has been changed from 5000 to 5001 to avoid conflicts with Shairport Sync.
- DietPi-Software | Firefox Sync Server: On fresh installs, the default listening port has been changed from 5000 to 5002 to avoid conflicts with Shairport Sync.
- DietPi-Software | rTorrent: For performance reasons, and to avoid conflicts with Shairport Sync, the default SCGI/RPC access has been changed from TCP port 5000 to UNIX socket. This change is applied on fresh installs and reinstalls of rTorrent, as it requires a change on both all sides, rTorrent, ruTorrent and the webserver. HTTP authentication is now enforced for the rTorrent RPC access with all webservers, using the global software password by default, and the password hash algorithm has been hardened with Nginx.
- DietPi-Software | WebIOPi: On fresh installs, the default listening port has been changed from 8000 to 8002 to avoid conflicts with IceCast. Additionally the install process has been slightly sped up by skipping unnecessary installer-internal APT calls.
- DietPi-Software | Koel: On fresh installs and reinstalls, the listening port has been changed from 8000 to 8003 to avoid conflicts with IceCast. Additionally the install process has been simplified and dependencies reduces, since after Koel v5.0.0 pre-compiled frontend binaries are available. This also allows a completely unattended install now. As little security hardening, the Koel MariaDB database password has been changed to a long random character string and the config files permission mode has been changed to 600 to permit read access to the Koel service user only. Finally as little performance enhancement, Koel now connects via UNIX socket to MariaDB instead of view TCP connection, which allows to disable TCP listening in MariaDB.
- DietPi-Software | YaCy: New installs and reinstalls will now have the latest version detected and downloaded automatically. This enables an easy update method by simply reinstalling YaCy via "dietpi-software reinstall 133", independent of the DietPi version.
- DietPi-Software | Remot3.it: After the install finished, it is now offered to do the interactive "connectd_installer" setup directly. Neither is a reboot required, nor does any service need to run to be registered. This is especially helpful for installs via "dietpi-software install 68", where the hint about this required setup was not shown before.
- DietPi-Software | Sonarr: Support for and migration to v3 has been implemented. Existing installs won't be migrated automatically, run "dietpi-software reinstall 144" to upgrade your Sonarr to v3. On DietPi update, Sonarr v2 users will receive a related notification.
- DietPi-Software | RPi.GPIO: This software option has been renamed to "Python 3 RPi.GPIO" to make clear that it is a Python package. In our efforts to migrate all software options to Python 3, only the Python 3 package is installed from now on. To install it for Python 2, one needs to run the following command manually form console: "apt install python-rpi.gpio"

New Scripts:
- DietPi-VPN | This new tool has been added, which allows you to establish VPN connections to known public VPN providers or connect via custom OpenVPN configuration file. It incorporates all features from the previous DietPi-NordVPN script and more (see changes above).
- DietPi-DDNS | This new tool has been added, which allows you to manage domains for your dynamic IP address. Select a Dynamic DNS (DDNS) provider or add a custom API URL, to have your DDNS entry updated regularly, via cURL and Cron job. Among others, it supports No-IP and replaces the No-IP client that DietPi supported until now.

New Software:
- DietPi-Software | IPFS Node: The InterPlanetary File System peer-to-peer hypermedia protocol node is now available for install with the software ID 186. Many thanks to @ravenclaw900 for implementing this software option: https://github.com/MichaIng/DietPi/issues/4232
- DietPi-Software | CUPS: The common UNIX printing system is now available as optimised install option with the software ID 187, including a web interface to manage and share local and network printers across your LAN.
- DietPi-Software | Go: Being previously tied into the OpenBazaar install, Go has now become a dedicated install option with the software ID 188. This includes the runtime system, package installer and compiler tool chain, as found at https://golang.org/dl/.
- DietPi-Software | VSCodium: As alternative to MS VSCode without MS branding, telemetry and licensing, the VSCodium code editor, with support for various programming languages, including Java, JavaScript, Go, Node.js, Python and C++, has been added as software install option to DietPi.

Removed Software:
- DietPi-Software | DietPi-NordVPN: As part of the major rework (see changes above), the dedicated install option has been removed. The script is available OOTB and will download, install or remove parts depending on your provider choice and menu selections.
- DietPi-Software | No-IP: As result of the new DietPi-DDNS tool (see new scripts above), the dedicated install option has been removed. DietPi-DDNS is always available and does not require any additional download or install of external files.

Fixes:
- DietPi-Config/DietPi-PREP | Resolved an issue on Debian Bullseye, when toggling serial consoles, where /etc/securetty is attempted to be altered even that it is not used and does not exist anymore since Debian Bullseye. Many thanks to @NastyDesertFox for reporting this issue: https://github.com/MichaIng/DietPi/issues/4205
- DietPi-Config | Resolved an issue on Sparky SBC, where selecting the generic USB DAC sound card option failed, due to invalid amixer calls. Many thanks to @Balmoral86 for reporting this issue: https://github.com/MichaIng/DietPi/issues/4249
- DietPi-Drive_Manager | Fixed detection and visualisation of loop devices in menu.
- DietPi-Set_userdata | When dietpi_userdata was moved to another drive, the intended dietpi:dietpi ownership was not applied to the target directory as intended. This is required by some software titles, like Syncthing and file servers, to permit the creation of files and directories. Many thanks to @redschumi for reporting this issue: https://github.com/MichaIng/DietPi/issues/4228
- DietPi-Config | Worked around an issue in RPi, where selecting a sound card ended with an error prompt in certain circumstances. Many thanks to @sturbs for reporting this issue: https://github.com/MichaIng/DietPi/issues/4306
- DietPi-Software | Resolved an issue where the "uninstall" command did not work and the "reinstall" did not show the intended backup prompt. Many thanks to @Zeuskk for reporting this v7.0 regression: https://dietpi.com/phpbb/viewtopic.php?t=8729
- DietPi-Software | Resolved an issue where directory permissions could be wrong because of 7zr overriding the default umask. This lead e.g. to 403 browser error on a fresh Single File PHP Gallery install. Many thanks to @Alexgolshtein for reporting this issue: https://github.com/MichaIng/DietPi/issues/4251
- DietPi-Software | X.Org X Server: Resolved an issue on RPi where the X server start failed when the KMS device tree overlay was not enabled. Many thanks to @xthedakmanx for reporting this issue: https://github.com/MichaIng/DietPi/issues/4175
- DietPi-Software | LXDE: Resolved an issue where after installing LXDE, the system booted into the LightDM desktop login mask automatically, even if desktop autologin was not chosen via dietpi-autostart. Many thanks to @manilx for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8766
- DietPi-Software | Portainer: Resolved an issue where the uninstall failed, if the container or image was removed manually before, or not found for a different reason. Many thanks to @redschumi for reporting this issue: https://github.com/MichaIng/DietPi/issues/4224
- DietPi-Software | IceCast: Resolved an issue where DarkIce fails to connect to IceCast by default, due to an invalid hostname in its config.
- DietPi-Software | Koel: Resolved issues which caused a failing install, caused by changed archive directory names and changed Laravel dependencies.
- DietPi-Software | myMPD: Resolved an issue where the service fails to start because of a renamed setting. Many thanks to @sofad for reporting this issue: https://github.com/MichaIng/DietPi/issues/4256
- DietPi-Software | O!MPD: Resolved an issue where browsing the media directory from the web UI failed because of a missing slash in the local config file. Many thanks to @pinkdot for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8904
- DietPi-Software | Kodi: Worked around an issue on 64-bit RPi systems, where the wrong Kodi package is tried to be installed, causing an APT failure. Many thanks to @mmnpkf for reporting this issue: https://github.com/MichaIng/DietPi/issues/4194
- DietPi-Software | Chromium: Worked around an issue on 64-bit RPi systems, where the install failed, as The Raspberry Pi repository does not ship a 64-bit build yet. The Chromium package from the Debian repository is now installed instead.
- DietPi-Software | Sonarr/Radarr: Having both now installed as v3 or later, resolves a long outstanding issue, where importing downloads to filesystems without native UNIX permissions support, including Samba/CIFS mounts, failed.
- DietPi-Software | WebIOPi: Resolved an issue where the GPIO pins could not be toggled via web interface by moving to a newer fork of this project. This additionally enabled us to run it with Python 3 and enable it on RPi 3 and RPi 4 models. Many thanks to @torwan for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8945
- DietPi-Software | Plex Media Server: Resolved an issue where secure remote access via app.plex.tv did not work if Unbound with DNS rebinding protection is installed. Many thanks to @danmo117 for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8896
- DietPi-Software | MATE: Resolved an issue where DietPi menu and desktop shortcuts could not be started, as the MATE terminal emulator is not compatible with the "start in console" flag of desktop shortcuts. xterm is now installed together with MATE, to replace the default terminal emulator. Many thanks to @maya95 for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8949

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/4305

-----------------------------------------------------------------------------------------------------------

v7.0
(2021-02-28)

Changes:
- DietPi-Update | A new update check system has been implemented, which checks for a minimum required Debian and DietPi version and migrates systems with either too old Debian version or too old DietPi version to a different Git branch automatically. This especially smoothes the migration of our code base to newer Debian versions and the alternative branch can be used to inform and support Debian distribution upgrades and to upgrade the DietPi code to an intermediate version from where the system can be migrated back to the regular stable/master branch. Since this change required a new repository version file, we took the chance and incremented the DietPi core version to v7.0. This however has no further meaning, all previously supported DietPi and Debian versions remain supported and the change enables us to not require fresh image installs for major upgrades, like the upgrade from v159 to v6.0 did a few years ago.
- Network | A change has been implemented on the order in which network-related systemd service targets are reached. "network.target" and "network-online.target" are now reach after all network interfaces have been configured, rather then already after only the loopback interface "lo" has been configured. This affects only systemd services which are not started by DietPi-Services, e.g. SSH/DNS/VPN/VNC servers, with the effect that they are assured to be able to bind to interfaces/IPs, where currently they would fail. The downside is, if one has an Ethernet adapter configured via dietpi-config or /etc/network/interfaces (as allow-hotplug device), but the cable not connected, affected services may be delayed until the interface bring-up timed out.
- DietPi-Backup | A new feature has been added which allows to automatically restore a dietpi-backup on first boot. For this set the new dietpi.txt option AUTO_SETUP_BACKUP_RESTORE=1, to get a list of found backups to select from (this does not work in combination with AUTO_SETUP_AUTOMATED=1). All attached drives are mounted temporarily and searched automatically. Set AUTO_SETUP_BACKUP_RESTORE=2 to have the first found backup restored non-interactively (this works in combination with AUTO_SETUP_AUTOMATED=1). The restore runs after the initial update, hence works with older images as well and can be done via SSH connection. Credits go to @ravenclaw900 for implementing this feature: https://github.com/MichaIng/DietPi/pull/4112
- DietPi-Backup | Support for XFS and ZFS target file system types has been added, which fully support the required symlink and POSIX permissions capabilities.
- DietPi-Config | RPi: An option has been added to toggle the SPI interface. Many thanks to @incanus for resurrecting this old feature request: https://github.com/MichaIng/DietPi/issues/98#issuecomment-783650204
- DietPi-Software | The mandatory reboot after installs has been removed. Installed services, which are not controlled by DietPi-Services, but would start automatically on reboot, are now started at the end of installs instead. A manual reboot is still a good idea, but strictly required only in rare cases. Many thanks to @Games-Crack for doing this suggesting: https://github.com/MichaIng/DietPi/issues/4032
- DietPi-Software | Installs do not imply all APT package upgrades anymore. While we recommend to keep all APT packages upgraded regularly, the new daily APT check and info within the DietPi-Banner, helps to keep you informed to do the best decision yourself whether and when to apply which package upgrade. On first run installs the full upgrade is however kept, to assure each image starts in fully upgraded state, and packages which are required for the actual software choices you're installing, are upgraded as well, when installed already.
- DietPi-Software | Uninstalls do not stop other services anymore. E.g. your webserver or media streaming server will stay active while you uninstall that other software that you don't require anymore. Since uninstalls do not require much RAM or CPU resources, this is perfectly fine. Many thanks to @mrgreaper giving the hint: https://github.com/MichaIng/DietPi/issues/4116
- DietPi-Software | Unbound: On install in combination with Pi-hole, no additional configuration file will be created anymore but the adjusted interface binding and port will be applied to "/etc/unbound/unbound.conf.d/dietpi.conf". Declaring "interface" in two configuration files do not override each other but lead to two concurrent bindings, which is not intended. The two files, if present, will be merged as well on DietPi update. It is hence intended that admins change "dietpi.conf" directly, if required, and this file won't be overwritten on reinstalls to preserve local changes. Additionally, on new installs, the configuration file will be better sorted and contain comments to explain their purpose.
- DietPi-Software | Unbound: On new installs, by default access is now granted to all private IPv4 and IPv6 address ranges instead of to the 192.168.0.0/16 subnet only, which includes VPN interfaces, containers and cases of multiple local networks the server is attached to.
- DietPi-Software | Unbound: A monthly cron job is now created to keep the root hints file updated. Many thanks to @APraxx for doing this suggestion: https://github.com/MichaIng/DietPi/issues/4077
- DietPi-Software | Python 3 pip: pip and pip-based installs on ARMv6 and ARMv7 boards will have the piwheels.org repository for pre-compiled wheels added automatically, which can reduce build dependencies and compile time dramatically.
- DietPi-Software | Node-RED: New installs and reinstalls will setup Node-RED as local module for the "nodered" service user, rather than as global system module/command. This allows upgrading and removing all related Node modules through the web interface, instead of just the ones which were installed via web interface. Additionally a console alias for the "node-red-admin" CLI command has been added so that running this command with any user will call the local Node-RED instance as "nodered" service user.
- DietPi-Software | Docker: The Docker APT repository is now installed manually instead of using the official Docker installer. This allows us to enable the Docker install option for Debian Bullseye systems, if only to allow widened testing of this upcoming Debian release with DietPi.

Interface Changes:
- DietPi-Banner | Running the script without input argument will now open the menu instead of printing the banner. The console alias has been adjusted accordingly, so that it is now possible to run "dietpi-banner 0" and "dietpi-banner 1" from console to have full and short banner versions printed. The "dietpi-banner" console command remains opening the menu.

New Software:
- DietPi-Software | Docker Compose: A tool to define and run multi-container Docker applications can now be installed through our software selection. Docker will be pulled in as dependency automatically.
- DietPi-Software | Box86: An x86 wrapper/emulator for ARMv7 systems is now available for install. Thanks to it's ability to wrap ARMv7 shared system libraries to be used with i386 binaries, often no additional libraries need to be installed. Thanks to binfmt, it will be invoked automatically when an i386 binary is executed.
- DietPi-Software | Steam: By automatically pulling in Box86 as dependency, Steam can now be installed on ARMv7 boards. It won't run perfectly stable yet and has limited features and game support, but we're optimistic that further improvements will address this in the future. Check out our documentation about it: https://dietpi.com/docs/software/gaming/#steam
- DietPi-Software | mjpg-streamer: Lightweight multi-source and multi-output plugin JPEG streamer, now available for install. By default your attached camera capture will be streamed to a custom HTTP port. When installed along with OctoPrint, both will be automatically configured to work together. The Raspberry Pi camera module support is enabled by default, when installed on Raspberry Pi.

Fixes:
- Audio | Resolved a bug with Debian Buster, where the ALSA state daemon was always running, even when it was not configured.
- DietPi-Globals | G_OBTAIN_CPU_TEMP: Negative temperatures are not trusted anymore, "N/A" will be printed instead. This allows a generic approach to fix/allow temperature estimation on further SBC models. Many thanks to @Thanapat for reporting a related issue on Roseapple Pi: https://dietpi.com/phpbb/viewtopic.php?t=8677
- DietPi-Set_swapfile | Resolve an issue where "zram"/"zram0" dietpi.txt path entries were dropped, when running the script without input arguments. This especially broke applying zram-swap on first boot. Many thanks to @Dr0bac for reporting this issue: https://github.com/MichaIng/DietPi/issues/4002
- DietPi-Software | Bitwarden_RS: Resolved an issue where the self-signed TLS certificate could not be imported on iOS. To apply this fix to an existing instance, the configuration file "/mnt/dietpi_userdata/bitwarden_rs/bitwarden_rs.env" needs to be removed or moved to a different location, so "dietpi-software reinstall 183" will re-create the configuration and TLS certificate.
- DietPi-Software | Unbound: Resolved an issue where during install in combination with Pi-hole the service restart could have failed. Many thanks to @Ernstian for reporting this issue: https://github.com/MichaIng/DietPi/issues/2409#issuecomment-739154892
- DietPi-Software | Unbound: Resolved an issue where the service start failed if the host system had a local IP address outside of the 192.168.0.0/16 subnet. Many thanks to @faxesystem for reporting this issue: https://github.com/MichaIng/DietPi/issues/2409#issuecomment-749174984
- DietPi-Software | ReadyMedia: Resolved an issue where the media library was not rescanned on service start. Many thanks to @AdamFarnsworth0 for reporting this issue: https://twitter.com/AdamFarnsworth0/status/1347977813635305475
- DietPi-Software | WiFi Hotspot: Resolved an issue where the install on Armbian-based images with RTL8188C* WiFi chip failed. Many thanks to @smogan71 for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8523
- DietPi-Software | Medusa: This software option has been disabled on Stretch systems, since it now requires Python >=3.6, which is not available in the Debian Stretch repository. If you run Medusa on a Stretch system, it will continue to work, but updating will either not be possible or break it. Many thanks to @aermak for reporting this issue: https://github.com/MichaIng/DietPi/issues/3991
- DietPi-Software | WiringPi: Resolved an issue where the install failed, if the /usr/local/bin directory was not present. Many thanks to @bruz for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8609
- DietPi-Software | PaperMC: Resolved an issue where the install failed due to changed download URLs and stabilised service start and config creation by setting the Java heap size and allowing more time for the startup on smaller SBCs. Many thanks to @omavoss for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=30191#p30191
- DietPi-Software | OpenTyrian: The install option has been disabled on x86_64, since the Debian package comes with a different file structure and it has been disabled on 64-bit RPi systems, since the binary has been compiled for armhf.
- DietPi-Software | Domoticz: Resolved an issue where saving custom scripts and starting with a template did not work. Many thanks to @tec13 for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8627
- DietPi-Software | Resolved an issue where for ruTorrent, Koel and Bitwarden_RS the automatic newest version detection failed and instead a possibly older fallback was used. Many thanks to @kelvmod for reporting this issue: https://github.com/MichaIng/DietPi/issues/4105
- DietPi-Software | LXQt: Resolved visual issues with our default configuration of Debian Buster, drastically simplified and cleaned up the files we ship.
- DietPi-Software | SABnzbd: Resolved an issue on Stretch where the install failed due to raised minimum Python version with SABnzbd v3.2.0. If Python 3.5 is installed, SABnzbd v3.1.1 will be installed now to allow keeping the install option enabled for now. Many thanks to @19eighties for reporting this issue: https://github.com/MichaIng/DietPi/issues/2762#issuecomment-787118995

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/4126

-----------------------------------------------------------------------------------------------------------

v6.34
(20/12/20)

Changes / Improvements / Optimisations:
- Raspberry Pi 400 | Correct detection for this new Raspberry Pi model has been added.
- DietPi-Globals | In DietPi scripts, the PATH variable is now overwritten with the Debian/bash system default to assure that no broken or manipulated PATH can be passed via e.g. "su" or "sudo -E". This means that overrides must be placed in /usr/local/(s)bin now, which as well was the only save location for system-wide overrides before. Many thanks to @tandy-1000 for reporting a related issue: https://github.com/MichaIng/DietPi/issues/3873
- DietPi-Set_swapfile | Hardened permissions of the /dev/zram0 zram-swap device to be only accessible by root user (mode 0600) and interpret input argument "/dev/zram0" and "zram0" as zram-swap as well, aside of "zram" only. Many thanks to @hansjuergenmay for reporting a related issue: https://github.com/MichaIng/DietPi/issues/3869
- DietPi-NordVPN | A function has been added update the NordVPN server list, e.g. when new servers are available that are closer to your location.
- DietPi-JustBoom | The ALSA equalizer settings are not stored to /var/lib/dietpi/dietpi-config/.alsaequal.bin where all users/services can read it and all members of the "dietpi" group (or root) can create and write to it. Many thanks to @wowcut for reporting this issue: https://github.com/MichaIng/DietPi/issues/3950
- DietPi-CloudShell | Several enhancements have been applied. The autostart option now runs the script in foreground, which means that it can always be terminated via "CTRL+C" from an attached keyboard. The original sized font is now restored on exit and terminal settings reset. Also the menu has gone through some fine tuning, showing current settings hopefully a bid more outstanding.
- DietPi-Update | It is now possible to enable automated APT package update checks and even upgrade them on a daily bases. Set the new dietpi.txt setting "CONFIG_CHECK_APT_UPDATES" to "1" (default) to enable daily APT update checks. The result is shown in the DietPi login banner, in a similar way an available DietPi update is presented. Set "CONFIG_CHECK_APT_UPDATES" to "2" to have APT packages upgraded automatically on a daily bases and review the logs at /var/tmp/dietpi/logs/dietpi-update_apt.log. Cron is used for the schedule, which means that you can control the execution time via dietpi-cron > "cron.daily". Many thanks to @ravenclaw900 for implementing this feature: https://github.com/MichaIng/DietPi/pull/3899
- DietPi-Config | RPi: When applying less than 32 MiB GPU memory, the VCSM (VideoCore Shared Memory) device and kernel module are disabled now. The automatically loaded cut-down firmware files do not support it which leads to currently 5 expected kernel error messages. Disabling it in the first place might marginally speed up boot and reduce memory usage, but more importantly reduces confusion or worries induced by to the error messages.
- DietPi-Config | Audio Options: Added an option to switch between direct audio output and automatic software conversions, for channels, format and rate via ALSA "plug" plugin. This may be required to play any raw wav file regardless of sound card capabilities and without defining supported values manually. Having automated software conversions enabled matches the Debian ALSA defaults but may increase CPU usage and decrease sound quality.
- DietPi-Config | RPi: When enabling I2C support, the Python 3 SMbus module is now installed instead of the deprecated Python 2 version. This matches as well the dependency of PiJuice, which nowadays pulls Python 3 SMbus as package dependency, hence this change avoids the obsolete install of the whole Python 2 stack when PiJuice is installed through dietpi-software. Many thanks to @Trunkzeh for reporting this issue: https://github.com/MichaIng/DietPi/issues/3963#issuecomment-748547394
- DietPi-Software | OpenBazaar: Build is now done with the currently latest Go v1.15.3 and the service runs as unprivileged user "openbazaar" instead of root.
- DietPi-Software | XRDP: Remote desktop connections can now be done with the "Xorg" method and hence don't require an active VNC server anymore. New installs will not pull TigerVNC as dependency and if only RDP is required, TigerVNC can be uninstalled.
- DietPi-Software | Single File PHP Gallery: Updated new installs to latest v4.7.1. Run "dietpi-software reinstall 56" to upgrade your existing instance.
- DietPi-Software | MineOS: A systemd service is now used to run the daemon in favour of the previous supervisor, the obsolete "mineos" user is not created anymore, Node.js v11 is used to build MineOS, obsolete dependencies have been removed and a reinstall will now perform a MineOS upgrade and the existing /etc/mineos.conf is not replaced anymore.
- DietPi-Software | Mycroft AI: By default, the ALSA automatic conversions plugin is enabled now on install, which enables OOTB compatibility with all wav sound formats and sound card. Additionally listener sampling rate override (48000 Hz) has been removed, reverting to Mycroft default (16000 Hz), which might solve an issue with hanging microphone level in CLI and related failing voice detection.
- DietPi-Software | Gogs: Has been enabled for ARMv8 boards and on ARMv7 boards the newest version is installed again, which was not the case since Gogs v0.12. due to changed download names. Many thanks to @MadKernel for bringing ARMv8 support back to our attention: https://dietpi.com/phpbb/viewtopic.php?t=8276
- DietPi-Software | Folding@Home: Is now available for ARMv8 (arm64) boards. Donate your idle CPU power to help researchers fighting against diseases like Cancer, Alzheimer, Ebola and COVID-19.
- DietPi-Software | Radarr: Has been upgraded to the newest major version 3, including the required branch migration (from "develop" to "master") and, for non-ARMv6 boards, a migration to the now available .NET-based build away from Mono. This change is applied to all DietPi systems via Radarr reinstall, preserving your data and configs of course.
- DietPi-Software | OctoPrint: Is now available via PyPI repository, hence can be installed and updated easier and faster without downloading and building from the sources. Git is not required anymore, as the internal updater as well uses Python pip only. We migrate all DietPi OctoPrint instances to the new version and new install method, so that the Git/install directory /opt/octoprint is obsolete and removed. All your data will be preserved, of course. Many thanks to @Stinocon for reporting issues related to our previous implementation: https://github.com/MichaIng/DietPi/issues/3940

New Software Packages:
- DietPi-Software | Portainer: Simplify your Docker container management via Portainer web interface, now available for install. Many thanks to @Joulinar for implementing this software option: https://github.com/MichaIng/DietPi/pull/3933
- DietPi-Software | Tor Relay: Become part of the Tor Project and turn your DietPi into a Tor relay to help others surf the Internet safely and privately. Many thanks to @ravenclaw900 for implementing this software option: https://github.com/MichaIng/DietPi/pull/3921
- DietPi-Software | PaperMC: Highly optimised Minecraft server, written in Java, extensible via plugins, now available for install. Many thanks to @ravenclaw900 for implementing this software option: https://github.com/MichaIng/DietPi/pull/3828
- DietPi-Software | Unbound: Validating, recursive, caching DNS resolver, now available for install and integrate with Pi-hole. Many thanks to @ravenclaw900 for implementing this software option: https://github.com/MichaIng/DietPi/pull/3872
- DietPi-Software | Bitwarden_RS: An unofficial Bitwarden password manager server with web UI, written in Rust, now available for install. Many thanks to @CactiChameleon9 for implementing this software option: https://github.com/MichaIng/DietPi/issues/3724

Removed Software Packages:
- DietPi-Software | DietPi-CloudShell: The install option has been removed, but DietPi-CloudShell stays available of course. The install did nothing else than creating the service file and enabling the autostart option, but the script was always available and did work well without having the software option installed. The service is now as well available statically, the script can always be started from console via "dietpi-cloudshell" shortcut alias now and is shown in dietpi-launcher. Also non-root users can run now run it via "dietpi-cloudshell 1" (with intro) or "dietpi-cloudshell 2" (no intro), only changing the settings via menu (no command argument) requires root permissions.
- DietPi-Software | CloudPrint: This software option has been removed, since the Google Cloud Print service will be shut down at the end of 2020 and we don't want to offer software options which will work for at most two months. Please migrate to another printing solution in time. Already installed CloudPrint instances will remain installed and the system service remains functional until the end of the year. With the first DietPi release in 2021 we will remove service handling and offer the package removal during the update process. Further information can be found here: https://www.google.com/cloudprint/learn/
- DietPi-Software | Tonido: This software option has been removed, since it is not developed anymore for three years, no sources have been found and the latest binaries require ancient library versions which fail to be easily installed on currently supported Debian versions.

Bug Fixes:
- DietPi-Config | Resolved an issue on RPi where the onboard 3.5mm jack selection did not work if an HDMI screen was attached. When selecting explicit either HDMI audio or onboard 3.5mm jack, the other one is now disabled on device tree level, which means it cannot be switched without reboot. This is currently the only known way to assure that 3.5mm jack is used for audio output regardless of now or later attached or detached HDMI screens. Many thanks to @corasaniti for reporting this issue: https://github.com/MichaIng/DietPi/issues/3887
- DietPi-Config | Resolved an issue on RPi where selecting the waveshare32 LCD panel installed an outdated device tree overlay, incompatible with the current Linux 5.4 kernel. Many thanks to @black00019 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3881
- DietPi-Services | Resolved an issue where CPU affinity selection failed due to a syntax error.
- DietPi-Bugreport | Resolved an issue where bug report uploads were cancelled if connection test on port 80/443 failed even that uploads are done via SFTP on port 22.
- DietPi-Cleaner | Resolved an issue where cleaner selection failed with a syntax error.
- DietPi-Sync | Resolved an issue where setting the delete mode to "On" did not have any effect on it. Many thanks to @mafioso12dk for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8226
- DietPi-Banner + DietPi-NordVPN | Resolved an issue where WAN IP changed to a multi-line output. Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/3908
- DietPi-CloudShell | Resolved an issue where scene selection failed with a syntax error. Many thanks to @ravenclaw900 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3880
- DietPi-Software | PiVPN: Resolved an issue where the installer hang since the interactive whiptail dialogues were not shown on console. Many thanks to @kelliegator for reporting this issue: https://github.com/MichaIng/DietPi/issues/3844
- DietPi-Software | Medusa: Resolved an issue where Medusa failed to start after install. Many thanks to @Luan7805 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3842
- DietPi-Software | Webservers: Resolved an issue where reinstall failed if /var/www/html did not exist.
- DietPi-Software | Lighttpd: Resolved an issue where (re)install failed if the fastcgi or fastcgi-php module was enabled already.
- DietPi-Software | O!MPD: Resolved an issue where the URL check for youtube-dl failed.
- DietPi-Software | Single File PHP Gallery: Resolved an issue where directory previews were not shown due to missing permissions. Many thanks to @tallbastard for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=28155#p28155
- DietPi-Software | WebIOPi: Resolved an issue where the download and install failed.
- DietPi-Software | Nginx: Resolved an issue where the amount of worker processes was not set to the amount of CPU threads as intended.
- DietPi-Software | MineOS: Resolved an issue where the Node.js downgrade an hence the web UI compiling failed. Many thanks to @CactiChameleon9 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3901
- DietPi-Software | Mycroft AI: Resolved an issue where skill installs failed due to missing permissions. Many thanks to @GreenGentleman for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=28464#p28464
- DietPi-Software | Jellyfin: Resolved an issue where Jellyfin did not run on ARMv6 (RPi 1 and Zero models). ARMv6/Raspbian-compatible binaries are now shipped via different APT repository. Many thanks to @Shiivu for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8263
- DietPi-Software | WiFi Hotspot: Resolved an issue on RPi with WiFi adapters using an RTL8188C* chip, where the service failed to start due to an invalid driver. Many thanks to @yerc for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=28984#p28984
- DietPi-Software | OctoPrint: Resolved an issue where the service and system could not be restarted anymore via OctoPrint web UI and, on RPi, the CPU throttling state could not be derived.
- DietPi-Software | Ampache: Resolved an issue where the install failed due to an incompatible PHP composer version and it was not possible to update the configuration file to a new version through the web interface. Many thanks to @kk345 for reporting these issues: https://dietpi.com/phpbb/viewtopic.php?t=8367

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/3982

-----------------------------------------------------------------------------------------------------------

v6.33
(17/10/20)

API Changes:
- DietPi-Globals | The G_FP_DIETPI_USERDATA variable has been removed. Variables cannot be used in every context, e.g. not in config files stored on GitHub or dietpi.com for download, its value "/mnt/dietpi_userdata" does not change and using the path literally allows slightly simplified and hardened coding.

Changes / Improvements / Optimisations:
- DietPi-Login | Logins do not wait for DietPi-PostBoot to finish anymore, as this is not strictly required. On local console, DietPi-PostBoot processing output practically blocks login until finished or timed out and logins on any other console like SSH or serial do not require it. DietPi-PostBoot only checks for DietPi updates, starts background services and prints the pre-login banner to local console, nothing that is required for console usage.
- DietPi-Autostart | Autostart programs with a foreground process are now started as replacement for the DietPi-Login process via "exec" which saves 3-4 MiB RAM usage.
- DietPi-Software | When using an invalid input argument, dietpi-software now prints usage info to the terminal.
- DietPi-Software | The "dietpi" UNIX group has been made the primary group for all* services which ran with "Group=dietpi" before: Transmission, Mopidy, MiniDLNA, Airsonic, Plex Media Server, Emby Server, Medusa, Tonido, Blynk Server, SABnzbd, Koel, NZBGet. If the user (+group) is created by an external package or installer, the original primary group is kept as supplementary group to not possibly break access permissions to pre-created directories and files. *Only example from these changes is Deluge for now, since we don't want to run the separate web UI service with dietpi group permissions. In case of Tautulli, the dietpi group permissions are remove, since Tautulli does not require it.
- DietPi-Software | Bazarr: Companion application to Sonarr and Radarr, which manages and downloads subtitles based on your requirements, now available for install. Many thanks to @DiogoAbu for doing this suggestion: https://github.com/MichaIng/DietPi/issues/2045
- DietPi-Software | phpBB: New installs will be v3.3.1 now, existing instances won't be touched as updates need to be done manually through the internal update mechanism, which includes the mandatory database migration. Additionally new installs will now be places at /var/www/phpbb, the old location /var/www/phpBB3 is still handled gracefully, if existing.
- DietPi-Software | OctoPrint: The service runs now as user "octoprint", the Git branch directory has been moved to /opt/octoprint and /mnt/dietpi_userdata/octoprint is the run users home and hence config and data directory now. To apply these changes, OctoPrint is reinstalled with DietPi v6.33, which includes the Python 3 migration (see v6.32 changelog) on Buster and Bullseye systems. This implies that the CLI ("octoprint" command) needs to be executed as user "octoprint" to invoke the correct configuration. A bash shell alias solves this automatically for all users with sudo permissions, but if you use a custom shell, the CLI needs to be called like: "sudo -u octoprint octoprint <command>". Many thanks to @ModischFabrications for reporting an issue that is related to the fact that the service ran as root user before: https://github.com/MichaIng/DietPi/issues/3315
- DietPi-Software | Tautulli: Finally, directories, user and service are renamed from "plexpy" to "tautulli". Additionally it runs with Python 3 now instead of Python 2. These changes are applied as well during DietPi update.
- DietPi-Software | Baikal: Update (re)install procedure to cover the new config directory and use the pre-packed release archives instead of raw source and composer. Additionally webserver configs have been added to harden access permissions.
- DietPi-Software | Docker: On fresh installs or reinstalls, logs are now done with limited verbosity to systemd-journald (RAM), accessible via "journalctl -u docker -u containerd" to reduce disk writes. Docker can be reinstalled via "dietpi-software reinstall 162". Many thanks to @SaturnusDJ for doing this suggestion: https://github.com/MichaIng/DietPi/issues/2388
- DietPi-Software | Mosquitto: The official APT repository is now used where possible, which currently excludes ARMv8/arm64 and Raspbian/Debian Bullseye. This change is applied via reinstall during DietPi update. Many thanks to @marcobrianza for doing this suggestion: https://github.com/MichaIng/DietPi/issues/3042
- DietPi-Software | Cuberite: A wrong directory name based on a typo has been fixed. A reinstall updates Cuberite and moves its install directory to /mnt/dietpi_userdata/cuberite as intended. This is applied via DietPi update but a backup is created to cover issues due to potential structural changes, especially for older instances installed at /etc/cubrite.
- DietPi-Software | Amiberry: An update to Amiberry v3.3 is applied during DietPi v6.33 update.
- DietPi-Software | LXDE: By default, when double-clicking a desktop icon or executable file, it will be executed directly now, without being asked first what to do. This behaviour can be changed from within PCManFM file manager > "Edit" > "Preferences" > "General" > "Don't ask options to launch executable file".

Bug Fixes:
- General | Resolved an issue where using AUTO_UNMASK_LOGIND=1 or enabling Amiberry fastboot did not allow to start systemd-logind as intended if the required dbus package was not installed before. Many thanks to @razerbann for reporting this issue: https://github.com/MichaIng/DietPi/issues/3770
- RPi | Resolved an issue where Allo USBridge Sig (ASIX AX88179) Ethernet fails due to non-matching driver. Many thanks to @dsnyder0pc for reporting this issue any many thanks to Allo for providing stable branch driver builds and a method to compare kernel module layouts: https://github.com/MichaIng/DietPi/issues/3725
- DietPi-Backup | Resolved an issue where F2FS was not supported as target location. Since it has full UNIX permissions and symlinks support and can be used as rootfs file system, it can be used for OS backups as well. Many thanks to @Cjkeenan for reporting this issue: https://github.com/MichaIng/DietPi/issues/606#issuecomment-695944450
- DietPi-Set_swapfile | Resolved an issue where swapon failed on ext4 due to an external bug in Linux 5.7 and 5.8. The script now tries quick and less write-intense fallocate pre-allocation first, regardless of kernel version and file system type, and falls back to dd in case of failure. Many thanks to @auanasgheps for reporting this issue: https://github.com/MichaIng/DietPi/issues/3756
- DietPi-Config | Resolved an issue where on devices with old Linux kernel versions (e.g. Sparky SBC with Linux 3.10.38) the Performance Options failed to open with a syntax error. Many thanks to @dsnyder0pc for reporting this issue: https://github.com/MichaIng/DietPi/issues/3799
- DietPi-Config | Resolved an issue on RPi 2 where a wrong default SDRAM frequency was shown, which is 450 MHz instead of 400 MHz with current firmware.
- DietPi-Software | OpenTyrian: The autostart option and run script have been fixed and slightly enhanced to lower RAM usage a bid.
- DietPi-Software | Firefox Sync Server: Resolved an issue where the build failed due to missing MySQL/MariaDB headers, newly required. Many thanks to @kinoushe for reporting this issue: https://github.com/MichaIng/DietPi/issues/3774
- DietPi-Software | Firefox Sync Server: Resolved another issue where the build failed due to transition of the whole project from Python to Rust. We now stay on a fixed commit and won't ship newer Firefox Sync Server versions until this transition has been fully completed, as the install process and requirements will constantly change. Many thanks again to @kinoushe for reporting this issue.
- DietPi-Software | LXDE: Resolved several issues due to conflicts between the RPi desktop LXDE packages with native LXDE.
- DietPi-Software | Webmin: Worked around an issue where install failed. Webmin depends on apt-show-versions which does not support compressed APT list files, which be implemented as default with DietPi v6.32.
- DietPi-Software | WebIOPi: Resolved an issue where the download failed.
- DietPi-Software | Home Assistant: Resolved an issue where install failed on ARM due to missing new build dependency. Many thanks to @pbutterworth for reporting and @novitibo for providing the solution: https://dietpi.com/phpbb/viewtopic.php?t=8095
- DietPi-Software | Kodi: Resolved an issue on Odroid XU4 where install failed due to missing librockchip-mpp1 package which instead was aimed to be installed on Odroid N1 only.
- DietPi-Software | TigerVNC+LXDE: Resolved an issue where lxappearance start ("Customize Look and Feel") hangs within TigerVNC sessions.
- DietPi-Software | Fail2Ban: Resolved an issue where the service could have failed to start due to a missing variable declaration in our default config. Many thanks to @mafioso12dk for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8147
- DietPi-Software | DietPi-RAMlog: Resolved an issue where /var/log content was not restored when reinstalling DietPi-RAMlog, e.g. when switching logging mode from #1 to #2. This could have led to service start issues, when those rely on log files or directories being present. Many thanks to @djashdj for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=8163

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/3829

-----------------------------------------------------------------------------------------------------------

v6.32
(31/08/20)

API Changes:
- DietPi-Set_swapfile | Running the script without input arguments does not print the current swap file location and size anymore but will apply the settings stored in dietpi.txt, refresh the current swap file or apply defaults as fallback. Currently active swap files can be reliably checked via /proc/swaps or htop.

Changes / Improvements / Optimisations:
- NanoPi NEO3 | Initial support for this SBC has been added.
- NanoPi R2S | Initial support for this SBC has been added.
- NanoPi K2 | Initial support for this SBC has been added.
- DietPi-Set_swapfile | Added support for zram-based swap space. Use "zram" as swap location to have a zram device created (persistently via udev rule) at /dev/zram0 and used for compressed in-memory swap space. The auto-size option "1" will result in a zram size of 50% of physical RAM size, else the MiB value will be used, as long as its smaller than physical RAM size. Many thanks to @rickalm for pushing this topic with an initial implementation: https://github.com/MichaIng/DietPi/pull/3705
- DietPi-Drive_Manager | For NTFS mounts, the "big_writes" mount option is now added by default, which reduces CPU load and by this may increase performance. Many thanks to @balexandrov for suggesting this enhancement: https://github.com/MichaIng/DietPi/issues/3330#issuecomment-654072107
- DietPi-Config | Added selection of schedutil and user space CPU frequency governors. Schedutil is a modern dynmic governor which sets frequency tightly related and according to metrics of the CPU scheduling driver itself. Userspace is a no-op governor, i.e. it does not touch CPU frequencies at all which allows setting manual/custom frequencies according to own metrics or via scripts. Read more about native Linux CPU frequency scaling: https://www.kernel.org/doc/html/latest/admin-guide/pm/cpufreq.html#generic-scaling-governors
- DietPi-Config | RPi: Removed the option to switch the deprecated max_usb_current setting in config.txt. Max USB current is now enabled by default via firmware on all RPi models: https://github.com/raspberrypi/documentation/issues/1655
- DietPi-LetsEncrypt | Lighttpd: Updated our default SSL cipher to match newer standards, still intermediate and compatible with Debian Stretch (Lighttpd v1.4.45). Additionally our config file names have been adjusted to use lighty-enable|disable-mod and priority prefixes to allow ordering own custom configs/vhosts more easily around them. Many thanks to @PanosssD for making us aware of this: https://github.com/MichaIng/DietPi/issues/3707
- DietPi-Software | Komga: FOSS home server for comics and mangas, now available for install as ID 179. Many thanks to @himura95 for providing the implementation: https://github.com/MichaIng/DietPi/issues/3403
- DietPi-Software | Jellyfin: A FOSS web interface media streaming server available for install. Many thanks to all who voted for it: https://feathub.com/MichaIng/DietPi/+63
- DietPi-Software | Airsonic: It is now available on Debian Buster systems since Java 11 support has been added. Many thanks to @linxiaopi for pointing us at the required re-evaluation: https://github.com/MichaIng/DietPi/issues/3732
- DietPi-Software | On the uninstall information prompt, the info has been added that uninstalling usually means that related userdata and configs are purged as well. Additionally "dietpi-software reinstall <ID>" is mentioned now as alternative to repair/update installed software. Many thanks to @kpine for doing this request: https://github.com/MichaIng/DietPi/issues/3550
- DietPi-Software | Python pip: We migrated this software selection to a Python 3/pip3 install only, due to Python 2 being end of life since 2020/01. Where possible, dependant software selections have been migrated to Python3 builds, where not possible, Python2/pip2 is installed separately for now. We hope that most affected software titles will do Python3 releases soon, otherwise we will remove them form our portfolio, at latest in spring 2021. The strongest reason for this is that next Debian Bullseye (summer 2021) will not ship Python2 packages anymore.
- DietPi-Software | SABnzbd: Migrated to a Python3-based install.
- DietPi-Software | OctoPrint: On Debian Buster and up, migrated to a Python3-based install.
- DietPi-Software | Wordpress: Plugins can now be installed and the internal updater used OOTB without the need to manually apply correct file permissions first. Many thanks to @Joulinar for implementing this: https://github.com/MichaIng/DietPi/pull/3720
- DietPi-Software | ProFTPD: On fresh installs, reverse DNS lookups are disabled by default now by adding "UseReverseDNS off" to /etc/proftpd/proftpd.conf. This increases login speeds, in case dramatically, depending on reverse DNS server. Additionally file uploads can now be resumed by default via "AllowStoreRestart On" and members of the "dietpi" group have write access to uploaded files ("Umask 002") to increase OOTB compatibility with media and file sharing software. Many thanks to @bbsixzz for doing these suggestions: https://github.com/MichaIng/DietPi/issues/3727
- DietPi-Software | HTPC Manager: Migrated to a Python3-compatible fork initiated by @gmiranda (https://github.com/HTPC-Manager/HTPC-Manager), since the previous fork stopped development. Please help test, and when possible contribute to this project to keep it alive. We'll do minimal tests and assure the basic install and web interface works fine from Debian Stretch till Debian Bullseye.

Bug Fixes:
- General | Resolved an issue where enabling or disabling IPv6 removed the expected symlink at /etc/sysctl.d/99-sysctl.conf with its actual target file. This happened when using dietpi-config network options and as well during firstrun setup when dietpi.txt choices are applied. The symlink is recreated, if missing, on all DietPi systems with next update.
- General | Resolved an external bug where the haveged entropy daemon failed to start on some ARM boards with the current version shipped with Debian Buster. On Buster ARMv7 and ARMv8 systems, a new package from Debian Bullseye is installed with this DietPi update, which contains the upstream fix: https://github.com/jirka-h/haveged/pull/7
- DietPi-Benchmark | Resolved an issue where file system benchmarks failed. Many thanks to @dbambus for reporting this issue: https://github.com/MichaIng/DietPi/issues/3672
- DietPi-Config | Resolved an issue where RPi onboard Bluetooth is attempted to be enabled on RPi models without onboard Bluetooth. On those models, now only the generic Bluetooth packages and services are installed and enabled. Many thanks to @TASSDevon for reporting this issue: https://github.com/MichaIng/DietPi/issues/3611
- DietPi-Software | Node.js: Resolved an issue where the installer internet connection check fails due to new nodejs.org HTTPS redirection. For now we use our own fork.
- DietPi-Software | HTPC Manager: Resolved an issue where install failed due to missing build-essential dependency.
- DietPi-Software | HTPC Manager: Resolved an issue where the internal updater failed due to missing git meta files.
- DietPi-Software | EmonPi: Resolved a failing primary UART activation on install.
- DietPi-Software | PHP: Resolved an issue where on pre-v6.23 systems the PHP upgrade from v7.0/7.1 to v7.2/7.3 did not work as expected. Many thanks to @illusive-c for reporting this issue: https://github.com/MichaIng/DietPi/issues/3670
- DietPi-Software | Xfce: Resolved an issue where the install and autostart of xcompmgr composition manager broke the xfwm4 internal one, leading to ineffective appearance settings and black borders around windows in certain cirumstances. Many thanks to @TamaTamaGoGo for reporting this issue: https://github.com/MichaIng/DietPi/issues/3665
- DietPi-Software | Pi-hole: Resolved an issue with Apache webserver, where CORS check failed if the Referrer-Policy header has been set to "no-referrer". If this is the case, the Pi-hole Apache config now sets it to the second strict "same-origin", which does not break the Pi-hole admin panel. Many thanks to @Phil1988 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3675
- DietPi-Software | qBittorrent: Resolved an issue where setting the web UI port via config file or UI is overridden by the service file command option. Many thanks to @linxiaopi for reporting this issue: https://github.com/MichaIng/DietPi/issues/3660
- DietPi-Software | Fail2Ban: Resolved an issue where sshd filter modes could not be set via jail config since the variable was not passed. Many thanks to @Darwolia for reporting this issue: https://github.com/MichaIng/DietPi/issues/3697
- DietPi-Software | Cuberite: Resolved an install issue due to changed download URL and worked around a startup issue on RPi 1/Zero models since Cuberite dropped ARMv6 support. Many thanks to @CactiChameleon9 for providing compatible binaries: https://github.com/MichaIng/DietPi/issues/3664

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/3751

-----------------------------------------------------------------------------------------------------------

v6.31
(05/07/20)

Changes / Improvements / Optimisations:
- RPi | Support for Raspberry Pi OS (64-bit) has been added, including any other Debian pre-image on RPi. Many thanks to @FusionPlmH for doing this request: https://github.com/MichaIng/DietPi/issues/3570
- Odroid C4 | Support for this new Hardkernel SBC has been added to allow image creation based on Meveric's Odroid repository, including Kodi support.
- Network | "ping" can now be used by all users without any file capabilities, sudo or setuid. For this we allow all users to create native ICMP sockets which are available since Linux 3.X but disabled by default on Debian. Other distributions and systemd (upstream) have this enabled by default and for security and usability reasons we follow them: https://fedoraproject.org/wiki/Changes/EnableSysctlPingGroupRange
- DietPi-Login | A new setting has been added which allows to skip the interactive GPLv2 license agreement on first login. Add/set "AUTO_SETUP_ACCEPT_LICENSE=1" in (/boot/)dietpi.txt in which case we assume you read and agreed the license text at least once. Many thanks to @mrbluecoat for reporting the urgent use-case of Chromium kiosk mode autostart without keyboard attached: https://github.com/MichaIng/DietPi/issues/3326
- DietPi-Cleaner | Enhanced performance of the files cleaner if /mnt is skipped, especially in combination with large drives or network mounts. Many thanks to @maartenlangeveld for revealing the underlying issue: https://github.com/MichaIng/DietPi/issues/3609
- DietPi-Drive_Manager | SSHFS entries in fstab are now detected and preserved. Many thanks to @notwork for doing this suggestion: https://dietpi.com/phpbb/viewtopic.php?t=7781
- DietPi-Config | Added Ethernet link speed selection to Network>Ethernet menu. The function and dietpi.txt entry exists for a long time but it was only exposed as first run setup option.
- DietPi-Software | WireGuard: Added generic support for all SBCs where the WireGuard kernel module is shipped together with the kernel package. This applies to most current Armbian-based images at the time of writing and will be the more regular case since Linux 5.6 has WireGuard natively integrated.
- DietPi-Software | Firefox Sync Server has been added to our software list, which allows to sync your Firefox bookmarks, history, tabs and passwords via your self-hosted server. Many thanks and all credits to @CedArctic for implementing this software title: https://github.com/MichaIng/DietPi/pull/3471
- DietPi-Software | Folding@Home: Updated to latest v7.6.X, which includes an explicit option for prioritising COVID 19 projects: https://foldingathome.org/2020/04/17/new-foldinghome-software-with-the-option-to-prioritize-covid-19-projects/
                                  This update is applied to all systems with DietPi v6.31, existing config and data are preserved.
- DietPi-Software | Sonarr/Radarr/Lidarr: The /media directory as second common mount point can now also be used as download/media directory without manually adding it to the systemd units ReadWritePaths list. Many thanks to @ricardoandren for doing this suggestion: https://github.com/MichaIng/DietPi/issues/3561
- DietPi-Software | Samba Server: Changed default server-side file permissions from 0775 to 0664, hence files on the server are by default created without execute permissions now, which suits usual standards. Many thanks to @maartenlangeveld for doing this suggestion: https://github.com/MichaIng/DietPi/issues/3581
- DietPi-Software | QuiteRSS: Re-added the years ago accidentally removed install code block. If you ever wondered why there was no QuiteRSS after selecting it for install, now there will be. If it is marked as installed already, run either "dietpi-software install 22" or simply "apt install quiterss" to (really) get it.
- DietPi-Software | Squeezelite: Updated to v1.9.7 and the service runs now as own user "squeezelite". Many thanks to @volpone for doing the update request: https://github.com/MichaIng/DietPi/issues/2386

Bug Fixes:
- System | Resolved potential issues due to missing /media directory on DietPi images, which is not used by default but is part of FHS and can hence be expected by Linux software, e.g. htpdate. Many thanks to @jokoren for reporting this issue: https://github.com/MichaIng/DietPi/issues/3558
- DietPi-Login | Resolved an issue where the script called itself from within the error handler subshell. Generally the error handler subshell must never call dietpi-login (and related autostart programs) and dietpi-login must never call itself from an interactive subshell. Many thanks to @nosyaardvark for reporting this issue: https://github.com/MichaIng/DietPi/issues/3583#issuecomment-643583664
- DietPi-Drive_Manager | Resolved an issue where moving the RootFS to an external drive did not include DietPi userdata. Many thanks to @sdomotica and @Joulinar for reporting this issue: https://github.com/MichaIng/DietPi/issues/3600#issuecomment-643261670
- DietPi-LED_control | Resolved an issue where LED triggers fail to become boot persistent. Many thanks to @FrostyMisa for reporting this issue: https://github.com/MichaIng/DietPi/issues/3636
- DietPi-Config | Resolved an issue on RPi3+ models where RPi3 non-plus overclocking profiles were shown. Many thanks to @lone for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=7804
- DietPi-Config | Resolved an issue on RPi4 2/4/8 GiB RAM models where the current GPU memory split was not obtained correctly. Many thanks to @FrostyMisa for reporting this issue: https://github.com/MichaIng/DietPi/issues/3636#issuecomment-652467249
- DietPi-Software | Logging choice: Resolved an issue where manually choosing logging options "None" and "Full" during firstrun installs did not uninstall DietPi-RAMlog as intended. Many thanks to @Pain-Patate for reporting this issue: https://github.com/MichaIng/DietPi/issues/3588
- DietPi-Software | GMediaRender+WireGuard: Resolved an issue where service start could have failed due to invalid network information. Many thanks to @fnsnyc for reporting this issue: https://github.com/MichaIng/DietPi/issues/3519
- DietPi-Software | rTorrent: Resolved an issue where startup fails because of invalid default config values. Many thanks to @PiTech and @vorrac for reporting and fixing this issue: https://dietpi.com/phpbb/viewtopic.php?t=7613, https://dietpi.com/phpbb/viewtopic.php?t=7607
- DietPi-Software | Sonarr/Radarr/Lidarr: Resolved an issue where those software services crashed once an hour due to faulty SQLite database log file clearing. Many thanks to @Taloth from Sonarr and all the others who reported, investigated and finally solved the mystery: https://dietpi.com/phpbb/viewtopic.php?t=7598
- DietPi-Software | WireGuard: Resolved an issue where WireGuard in client mode failed to start due to missing resolvconf. It is now installed together with WireGuard when choosing client setup. Many thanks to @yahoo456 for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=7783
- DietPi-Software | WireGuard: Worked around an issue where on some Odroids install failed due to missing symlinks to the Linux headers. Many thanks to @repomanz for reporting this issue: https://github.com/MichaIng/DietPi/issues/3577
- DietPi-Software | Ubooquity: Updated the installer to pull the latest version from Vae Mendis Software directly and enhanced permissions to better integrate with other software. Many thanks to @Mr.Roboto for doing this suggestion: https://dietpi.com/phpbb/viewtopic.php?t=7786
- DietPi-Software | Node.js: Resolved an issue where Node failed to start due to missing new libatmoic1 dependency. Many thanks to @larsno for reporting this issue: https://github.com/MichaIng/DietPi/issues/3614
- DietPi-Software | TigerVNC: Worked around an external bug where the VNC server crashed after client logout or failed to start at all. Many thanks to @Joulinar for investigating this issue and providing the workaround: https://dietpi.com/phpbb/viewtopic.php?p=25285#p25285
- DietPi-Software | XRDP: The above TigerVNC bug affected as well XRDP connections which have been resolved in the same turn: https://github.com/MichaIng/DietPi/issues/3615#issuecomment-650559035

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/3640

-----------------------------------------------------------------------------------------------------------

v6.30
(10/05/20 Hotfix)

Changes / Improvements / Optimisations:
- DietPi-Software | qBittorrent: Changed default download file permissions so that Sonarr/Radarr/Lidarr/.. are able to manipulate the downloads after import. Many thanks to @compdealer for doing this suggestion: https://github.com/MichaIng/DietPi/issues/3524

Bug Fixes:
- DietPi-Config | Resolved an issue where on RPi3/4/Zero W onboard WiFi could not be enabled. Many thanks to @elitearmedforce for reporting this issue: https://github.com/MichaIng/DietPi/issues/3510
- DietPi-Drive_Manager | Resolved an issue on Raspberry Pi where, after running DietPi-Drive_Manager, the root file system was mount read-only. Many thanks to @Adsouza98 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3511
- DietPi-Banner | Resolved an issue where non-root users were unable to download a new MOTD (message of the day). Many thanks to @PeterLacknase and @fnsnyc for reporting this issue: https://github.com/MichaIng/DietPi/issues/3505, https://github.com/MichaIng/DietPi/issues/3520
- DietPi-Boot | Resolved an issue where non-root users were unable to read or update DietPi-internal network info, which lead to e.g. error messages on login. Many thanks to @PeterLacknase for reporting this issue: https://github.com/MichaIng/DietPi/issues/3505
- DietPi-Update | Resolved an issue where on DietPi pre-v6.16 system some DietPi scripts were accidentally removed during update. Many thanks to @Vec7or and @littis for reporting this issue: https://github.com/MichaIng/DietPi/issues/3509, https://github.com/MichaIng/DietPi/issues/3513

Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/3526

-----------------------------------------------------------------------------------------------------------

v6.29
(03/05/20)

API Changes:
- Hardware info | The hardware info file /DietPi/dietpi/.hw_model should be now accessed at /boot/dietpi/.hw_model (see DietPi-RAMdisk removal below) and contains info now as NAME=VALUE like lines, which can be sourced from shell scripts.
- Flag/Info files | /DietPi/dietpi/.update_available, /DietPi/dietpi/.timesync_exit_status, /DietPi/dietpi/.network and /tmp/.dietpi_motd have all been moved into a new runtime directory: /run/dietpi/
- DietPi-Globals | The global variables G_HW_ARCH_DESCRIPTION and G_HW_MODEL_DESCRIPTION have been renamed to G_HW_ARCH_NAME and G_HW_MODEL_NAME. The new variables G_HW_UUID (DietPi-internal device UUID) and G_ROOTFS_DEV (RootFS device path) are available. On RPi additionally G_HW_REVISION, G_HW_PCB_REVISION, G_HW_MEMORY_SIZE and G_HW_MANUFACTURER are available, the revision code and its decoded information: https://www.raspberrypi.org/documentation/hardware/raspberrypi/revision-codes/README.md
- DietPi-Globals | G_RUN_CMD and G_ERROR_HANDLER have been removed and replaced with G_EXEC. Basically G_EXEC can be used the same way G_RUN_CMD was before and it is wider configurable to make manual G_ERROR_HANDLER usage obsolete where custom solution menu entries or command output parsing is required, e.g. to check for errors that do not produce exit codes. Visual change for regular DietPi users is that every error handled command can be retried, a subshell can be opened to investigate or fix the originating issue and, for experienced users, the command can be altered, e.g. if a download link has changed or an expected file has been moved manually to a new path. Further details can be found in the script: /boot/dietpi/func/dietpi-globals
- DietPi-Globals | G_FILE_EXISTS has been removed, as it was used only a single time in our code and usually it needs to be checked and handled explicitly, whether it is a file, directory, symlink with or without existing target.
- DietPi-Globals | The new global functions G_CHECK_CON and G_CHECK_DNS have been added to test general network connectivity and DNS resolver based on dietpi.txt settings.

Changes / Improvements / Optimisations:
- NanoPi M4V2 | Initial hardware identifier (ID: 58) and support for this device has been added to DietPi. Many thanks to @purist doing this request: https://dietpi.com/phpbb/viewtopic.php?t=6451
- NanoPi NEO Plus2 | Initial hardware identifier (ID: 57) and support for this device has been added to DietPi. Many thanks to @StephanStS for doing this request and creating an image: https://github.com/MichaIng/DietPi/issues/2979#issuecomment-615487662
- PINE H64 | Initial hardware identifier (ID: 45) and support for this device has been added to DietPi. Many thanks to @unixino for doing this request: https://github.com/MichaIng/DietPi/issues/3286
- ROCK Pi S | Initial hardware identifier (ID: 73) and support for this device has been added to DietPi. Many thanks to @lwqcz for doing this request: https://github.com/MichaIng/DietPi/issues/3365
- Sparky SBC | Updated kernel drivers and SBC-specific service and config files
- General | Switched to C.UTF-8 as default locale and for DietPi scripts. It is shipped statically by APT package, international and more lightweight compared to en_GB.UTF-8.
- DietPi-RAMdisk | Removed from DietPi, which means that one can edit config files in /boot directory directly now. To keep performance for our scripts up, vmtouch is installed instead, which allows to lock files in native file system cache, configured to lock /boot/dietpi and /boot/dietpi.txt in cache by default. More info: https://github.com/MichaIng/DietPi/issues/3288
- DietPi-LED_control | LED trigger choices are now applied via udev rules, existing settings are migrated on DietPi-Update. This allows to skip running this script at boot and simplify the preboot script, which both reduces boot time a bid. Additionally, applied LED triggers can now be reset to system defaults, which removes related udev rules. Since the script is now for interactive usage only, it has been moved to /boot/dietpi/dietpi-led_control and an alias has been added to call it from console via "dietpi-led_control" command.
- DietPi-Update | The DietPi auto update feature has been removed. Our updates require users attention, they often contain deeper changes, interactive elements and important information. We'll instead add an auto APT upgrade feature at a later release, similar to "unattended-upgrades" but with the possibility to also upgrade non-security patches, right into dietpi-update. Checking for available updates is done as before on a daily basis if not disabled via dietpi.txt.
- DietPi-Cron | Allows now to set the cron job output mail recipient. Cron mails are disabled by default since no MTA is preconfigured on DietPi. Additionally the execution times are now shown more clearly in 24h format.
- DietPi-Autostart | When selecting a non-root autologin user, some required tasks, like permissions, are now applied automatically, based on autostart option. This especially allows non-root users to launch Kodi without applying permissions manually. Many thanks to @sbrl for requesting this feature: https://github.com/MichaIng/DietPi/issues/3351
- DietPi-Drive_Manager | GlusterFS fstab entries are now preserved. Many thanks to @Sudrien for implementing this addition: https://github.com/MichaIng/DietPi/issues/3374
- DietPi-Software | Domoticz: open-source home automation platform is now available for install. Many thanks to @AndyB for doing this request a long time ago: https://dietpi.com/phpbb/viewtopic.php?t=222
- DietPi-Software | phpBB: Updated to v3.3.0 which has PHP7.3 support, hence can be installed on all hardware models and distro versions.
- DietPi-Software | Sonarr/Radarr/Lidarr: Enhanced install and uninstall steps. On reinstalls, the install directory is left unchanged now, suggesting to use the internal updater instead, which is generally safer and now does not require a manual service restart (see bug fix below). In case of a broken instance, the install directory /opt/<name> needs to be removed manually now, to have reinstalls downloading and installing the newest binaries.
- DietPi-Software | Sonarr/Radarr/Lidarr: The service now runs with hardened permissions, by default blocking access to directories outside of /opt/<name> /mnt /var/log/<name> and /tmp. If writing to other directories is wanted, the service file needs to be edited, easiest with "dietpi-services" > "<name>" > "Edit" and adding an additional "ReadWritePaths=/path/to/custom/dir".
- DietPi-Software | Chromium: Unlocked install on ARMv6 RPi models: RPi1/Zero/Zero W. Browsing performance will not be perfect, but for kiosk mode or light usage there are use cases. Many thanks to @kmplngj for requesting and testing: https://github.com/MichaIng/DietPi/issues/3364
- DietPi-Software | myMPD: Updated installer according to next upstream release v6.2.0. Many thanks to @jcorporation for informing us about the new version: https://github.com/MichaIng/DietPi/issues/3382
- DietPi-Software | MPD: Assured that UNIX domain socket and systemd unit for socket activation is present on Stretch systems. As well the obsolete cache directory symlinks in "/var/lib/mpd" will not be present anymore. Any custom scripts must use the absolute paths in "/mnt/dietpi_userdata/.mpd_cache" from now on.
- DietPi-Software | Pi-hole: Enabled support for Pi-hole v5. Many thanks to @maartenlangeveld for reporting the required change: https://github.com/MichaIng/DietPi/issues/3391
- DietPi-Software | Shairport-Sync: Updated to new version 3.3.6, using self-compiled deb packages. Many thanks to @kmplngj for doing this request: https://github.com/MichaIng/DietPi/issues/3216
- DietPi-Software | HAProxy: Updated to newest stable upstream version 2.1.3 and the sysvinit service has been replaced with the officially provided systemd service. It will be reinstalled on all systems via DietPi-Update, your config files will not be touched on any reinstall.
- DietPi-Software | rTorrent: Further rework and update of the default config file. Many thanks to @bbsixzz for this contribution: https://github.com/MichaIng/DietPi/issues/3332

Bug Fixes:
- Raspberry Pi | Resolved an issue where RPi models could be incorrectly identified in case of warranty, overvoltage or OTP bits set in revision code. Many thanks to @LeeMenHin for reporting this issue: https://github.com/MichaIng/DietPi/issues/2979#issuecomment-598906749
- DietPi-Banner | Resolved an issue where clearing the screen fails due to missing G_TERM_CLEAR command. Many thanks to @Joulinar for reporting this issue: https://github.com/MichaIng/DietPi/issues/3313
- DietPi-Config | Resolved an issue where, on RPi with vc4-fkms-v3d overlay/driver enabled, soundcard selection went wrong. Many thanks to @Cybolic for reporting this issue: https://github.com/MichaIng/DietPi/issues/3356
- DietPi-Globals | CPU temperature readout on Intel Mini PCs has been fixed. Many thanks to @Iv711 and @kt1024 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3172, https://github.com/MichaIng/DietPi/issues/3412
- DietPi-Drive_Manager | Resolved an issue where the chosen spindown timeout was not applied correctly on boot. Many thanks to @tesseract241 and @lukaszm89 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3309, https://github.com/MichaIng/DietPi/issues/3420
- DietPi-Drive_Manager | Resolved an issue where NFS pre-v3 mounts could have failed on boot. They are now automounted on first mountpoint access, like NFSv3 and Samba shares do already. Many thanks to @Joulinar for reporting and debugging this issue: https://github.com/MichaIng/DietPi/issues/1898#issuecomment-604412425
- DietPi-Drive_Manager | Resolved an issue where Samba/SMB/CIFS mounts failed if the shares name contained white spaces. Many thanks to @SNG for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=7518
- DietPi-Software | Resolved an issue where extraction of zip archives to current directory failed. Many thanks to @en0rism for reporting this issue: https://github.com/MichaIng/DietPi/issues/3320
- DietPi-Software | Redis: Resolved an issue where service start fails on Stretch systems. Many thanks to @drieksje for reporting this issue: https://github.com/MichaIng/DietPi/issues/3314
- DietPi-Software | Sonarr/Radarr/Lidarr: Resolved an issue where a manual service restart was required after the internal updater has been used.
- DietPi-Software | myMPD: Resolved MPD connection issues on Stretch systems. Many thanks to @jcorporation for informing us on upstream changes, helping with debug and fixing the issues: https://github.com/MichaIng/DietPi/issues/3382
- DietPi-Software | O!MPD: Resolved an issue where YouTube support was not functional by default due to missing youtube-dl execute permissions. Many thanks to @ArturSierzant for reporting this issue: https://github.com/MichaIng/DietPi/issues/3413
- DietPi-Software | GMediaRender: Resolved an issue where the wrong sound device could have been used. Many thanks to @kikigarel for reporting this issue: https://github.com/MichaIng/DietPi/issues/3348
- DietPi-Software | Chromium: Resolved an issue where non-root users were not able to use the Chromium autostart option due to wrong permissions. Many thanks to @lasers and @promofu for reporting this issue: https://github.com/MichaIng/DietPi/issues/3322
- DietPi-Software | RPi Cam Control: Resolved an issue where camera through the web UI failed because of missing permissions. Many thanks to @arkhub for reporting this issue: https://github.com/MichaIng/DietPi/issues/3431
- DietPi-Software | OctoPrint: Resolved an issue where install failed. Many thanks to @zell-mbc and @Joulinar for reporting the issue and providing the solution: https://github.com/MichaIng/DietPi/issues/3474
- DietPi-Software | Koel: Resolved an issue where download failed because of changed GitHub link. Many thanks to @C-Fu and @Joulinar for reporting and identifying the issue: https://github.com/MichaIng/DietPi/issues/3482
- DietPi-Software | Mopidy: Resolved an issue where installs on Debian Buster and above were not complete since Mopidy v3 uses Python3. Many thanks to @lupa18 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3485
- DietPi-Software | Nextcloud Talk: Worked around an external bug where Nextcloud Talk app failed to install. Many thanks to @harmlessdrudge for reporting this issue: https://github.com/MichaIng/DietPi/issues/3499

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/3502

-----------------------------------------------------------------------------------------------------------

v6.28
(03/01/20 Hotfix)

Changes / Improvements / Optimisations:
- DietPi-Software | Home Assistant: The new homeassistant-update.sh script, for quickly updating your Home Assistant version, now gets execute permissions on install.

Bug Fixes:
- System | Resolved an issue were the chosen CPU governor was not applied correctly. Many thanks to @bbsixzz for reporting the issue and @Joulinar for providing the solution: https://github.com/MichaIng/DietPi/issues/3299
- DietPi-Software | Resolved an issue were zip archive extraction failed. Many thanks to @dcallen7 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3300
- DietPi-Software | phpMyAdmin: Resolved an issue where reinstalls failed if phpMyAdmin was installed prior DietPi v6.27 with Lighttpd or Nginx as webserver. Many thanks to @Nightliss for reporting the issue and @Joulinar for providing the solution: https://github.com/MichaIng/DietPi/issues/3304
- DietPi-Software | Home Assistant: Resolved an issue where the service failed to start if prior to reinstall the data directory permissions were not set correctly. Many thanks to @huettenwirt for reporting this issue: https://github.com/MichaIng/DietPi/issues/3219#issuecomment-570582486

Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/3310

-----------------------------------------------------------------------------------------------------------

v6.27
(01/01/20)

Changes / Improvements / Optimisations:
- FriendlyELEC ZeroPi | Initial hardware identifier (ID: 59) and support for this device has been added to DietPi. Many thanks to @Stephan for creating the related DietPi image: https://github.com/MichaIng/DietPi/issues/3221
- RPi | An updated USBridgeSig Ethernet driver, as provided by allo.com, will be applied via postinst kernel script, until it has been merged into official RPi kernel: https://github.com/allocom/USBridgeSig/tree/master/ethernet
- RPi4 | Added generic RPi4 revision code detection to include the new revisions [abc]03112 and potential new PCB v1.3 til v1.9 once released. Many thanks to @Joulinar for reporting the missing new revision code: https://github.com/MichaIng/DietPi/issues/3257#issuecomment-565370856
- RPi4 | Since RPi4, bootloader and USB firmware is stored on an internal EEPROM, which is not updated/flashed by the firmware APT package installs automatically. The additional "rpi-eeprom" package comes with an EEPROM update script and boot service, which will now be installed on DietPi update and firstrun setup automatically, if RPi4 is detected. Those firmware updates include power consumption (hence heat emission) optimisations and enable additional boot methods, currently network boot and USB boot is planned as well. This was reason enough for us to implement it automatically for all RPi4 systems. Additionally you can actively install/update the EEPROM manually via dietpi-config > Advanced Options > Update RPi4 EEPROM firmware. For additional information, read the official docs: https://www.raspberrypi.org/documentation/hardware/raspberrypi/booteeprom.md Many thanks to @trueaspects for informing us about this important subject: https://github.com/MichaIng/DietPi/issues/3217
- Virtual Machines | Intel/AMD CPU microcode update packages are not installed/purged from virtual machines. The CPU is provided by the host, hypervisors do not allow to update microcode from within the guest, reasonably, and if they did, this would be serious security and stability issue.
- DietPi-Globals | A new function G_TERM_CLEAR has been added to clear a current terminal view by moving content into scrollback buffer. The previous method erased current visible content on some terminal types. Many thanks to @rdslw for reporting this issue: https://github.com/MichaIng/DietPi/issues/1615#issuecomment-562928032
- DietPi-PREP | New images will have all man pages and documentation files for installed packages available. Those were removed until now, but prevented users from simply installing man-db to view man pages on the system, without reinstalling packages to restore those first. Many thanks to @smudgered for doing this suggestion: https://github.com/MichaIng/DietPi/issues/3259
- DietPi-Software | The general network check against first sources.list entry has been replaced by a pure connectivity test and separate DNS resolver test via ping. This solves an issue where sources.list parsing failed when [arch=...] was specified and allows better debugging. The sources list entries themselves are checked and error-handled by G_AGUP already. Ping target IP for connection test and domain for DNS resolver test can be set via dietpi.txt, default is Cloudflare DNS IP and domain which should be very reliable and fast all over the world. Many thanks to @lwqcz for reporting the issue and providing a solution: https://github.com/MichaIng/DietPi/pull/3243
- DietPi-Software | TasmoAdmin: The administrative website to manage ESP8266 devices flashed with Tasmota for smart home systems is now available for install. Many thanks to @svh1985 for implementing this software title: https://github.com/MichaIng/DietPi/issues/3103
- DietPi-Software | ownCloud: Enabled install on Buster, Bullseye and ARMv6 RPi models (RPi1+Zero). ownCloud 10.3 has been release with PHP7.3 support, hence it can be used with native distro PHP7.3 and does not require Ondrej's PHP repo which does not support armv6hf.
- DietPi-Software | Syncthing: Enhanced service by security hardenings and to allow internal updates and auto updates without failing to restart. Moved binary from /etc/syncthing to /opt/syncthing to match FHS and disabled file logging, which is an unnecessary overhead, since logs can be easily viewed via "journalctl -u syncthing". Changes will be applied to all installs on v6.27 update, existing configs won't be touched by this.
- DietPi-Software | NAA daemon: Latest version is now scraped from base URL and installed automatically. Many thanks to @Heroldgray for doing this suggestion: https://github.com/MichaIng/DietPi/issues/3191
- DietPi-Software | Home Assistant: Python3.8 will be installed for the pyenv from now on due to Python3.6 deprecation. Many thanks to @sdomotica for providing this information: https://github.com/MichaIng/DietPi/issues/3219
- DietPi-Software | Home Assistant: When selecting for install, one will be informed about possibly long install/build times. Many thanks to @Gill-Bates for doing this suggestion to avoid users assuming their install process being stuck: https://github.com/MichaIng/DietPi/issues/2897
- DietPi-Software | Home Assistant: Vastly reduced Home Assistant dependencies and install complexity. It does not run inside a virtualenv of pyenv anymore, since it has already its unique pyenv Python instance. pyenv is still required due to the large amount of specific module versions, required for HA and its integrations. The alternative would be a venv from a globally installed Python instance, but this requires further thoughts and discussion. The amount of development libraries and tools, installed via APT, has been updated and reduced to a minimum to build Python and Home Assistant inside the pyenv without errors and warnings. There is a slightly increased chance that certain HA components need additional development packages. To cover this, two new settings have been added to dietpi.txt: "SOFTWARE_HOMEASSISTANT_APT_DEPS" and "SOFTWARE_HOMEASSISTANT_PIP_DEPS". Add a space-separated list of APT packages and pip modules respectively, to have those installed automatically with Home Assistant. As well activating the pyenv environment from console is now easier possible via "source /home/homeassistant/pyenv-activate.sh" as user "homeassistant". Additionally "/home/homeassistant/homeassistant-update.sh" has been added, which can be called by any sudo-capable user to update Home Assistant easily.
- DietPi-Software | Node-RED: Access permissions to I2C is now enabled by default on RPi and other SBCs which ship a configured "i2c" group by default. Many thanks to @NastySpill for reporting an underlying issue: https://dietpi.com/phpbb/viewtopic.php?t=6862
- DietPi-Software | Gitea: The latest version will now be pulled from GitHub automatically.
- DietPi-Software | Amiberry: Updated to v3.0.9, a large update from v2.25 with many improvements, see: https://github.com/midwan/amiberry/releases
- DietPi-Software | Amiberry: Since we ship a tailored SDL2 version, this has now been merged right into the Amiberry download archive and install directory, to not interfere with other system-wide installed SDL2 instances.
- DietPi-Software | Kodi: Add GPU-accelerated support for Odroid N2 via fbdev driver and special Kodi build, provided by Meveric. Many thanks to @ernero93 for doing this request: https://github.com/MichaIng/DietPi/issues/3255
- DietPi-Software | Koel: The latest upstream release will be pulled automatically now, v4.2.2 at date of writing. Dependencies have been updated accordingly, e.g. latest Koel supports latest Node.js v13.5.0.
- DietPi-Software | NoMachine: Updated to latest version 6.9.2 and switched to URL with no version string, which allows us to update downloads on-the-fly without code changes. Download URLs from official website have been simplified and follow some logic, but there are no "latest" URLs available and older versions are not kept, hence we must go on hosting those packages on dietpi.com.
- DietPi-Software | Allo web UI: Updated to version 13.1, which mostly fixes some compatibility issues with DietPi v6.27 and Debian Buster systems. For details, see: /var/www/allo/CHANGELOG.txt
- DietPi-Software | phpMyAdmin: The APT package install has been replaced by an upstream archive download. This allows us to ship the most current version on all distro versions and avoids incompatibility due to PHP meta packages being pulled as dependencies by the APT package. Install on Buster and Bullseye is possible now by this and incompatibility with concurrent ownCloud and phpBB has been resolved. On Stretch this resolves an issue due to new PHP7.4 being pulled by "php" meta package from Ondrejs repo. Many thanks to @symlagom for reporting this issue: https://github.com/MichaIng/DietPi/issues/3284

Bug Fixes:
- DietPi-PREP | Resolved an issue, where in rare cases a wrong $PATH variable could break command calls. Many thanks to @dtm2001 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3206
- DietPi-Explorer | Resolved an issue where handling of file/directory paths with white spaces failed. Many thanks to @gabboman for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=7046
- DietPi-Drive_Manager | Resolved an issue where, after transferring the root file system, the script itself could revert the fstab entry, since a reboot was not forced anymore since v6.22. This change has been reverted, hence a reboot cannot be skipped to avoid any fstab revert and inconsistency with cmdline. Many thanks to @DutchFlash for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=6645
- DietPi-Drive_Manager | Resolved an issue where, in rare cases, all drives were mounted as R/O on boot. Many thanks to @samolego for reporting this issue: https://github.com/MichaIng/DietPi/issues/3268
- DietPi-Autostart | Resolved an issue where non-interactive script calls, e.g. done by dietpi-software installs, reset prior made auto login user choices. Many thanks to @zedrdave for reporting this issue: https://github.com/MichaIng/DietPi/issues/3242
- DietPi-Config | RPi: Resolved an issue where PSU noise reduction state always shows "[Off]". HDMI output will now be toggled immediately, hence no reboot is required for changes to take effect. Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/3187
- DietPi-Software | ownCloud/Nextcloud: An important security fix has been applied to our ownCloud/Nextcloud Nginx configs. This has been merged into our other GitHub branches as well, hence all fresh installs wont be affected. Read more about it: https://nextcloud.com/blog/urgent-security-issue-in-nginx-php-fpm/
- DietPi-Software | WireGuard: Resolved an issue where the server fails to start if network has not yet fully initialised. Many thanks to @Joulinar for reporting this issue: https://github.com/MichaIng/DietPi/issues/3175
- DietPi-Software | Syncthing: Resolved an issue where fresh install failed to start due to missing permissions. Many thanks to @ralban, @mowestusa and @g7kse for reporting this issue: https://github.com/MichaIng/DietPi/issues/3180
- DietPi-Software | Gitea: Resolved an issue where fresh Gitea installs failed to start due to missing permissions. Many thanks to @NZRob for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=6550
- DietPi-Software | Home Assistant: Resolved on issue where fresh install failed to started to start due to missing permissions. Many thanks to @slopsjon, @tyjtyj and @pakikje for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=6531, https://dietpi.com/phpbb/viewtopic.php?p=20408#p20408
- DietPi-Software | Google AIY: Resolved an issue where fresh install failed to start due to missing permissions
- DietPi-Software | Grafana: Resolved an issue where install failed on RPi 1/Zero Buster systems. The fix includes an update of Grafana to the latest official version for those models. Many thanks to @TBail for reporting this issue: https://github.com/MichaIng/DietPi/issues/3213
- DietPi-Software | Jackett: Resolved an issue where the internal updater broke the Jackett instance. Automated updates can be safely enabled again. Many thanks to @ngosang for providing the workaround: https://github.com/MichaIng/DietPi/issues/2593
- DietPi-Software | Pi-hole: Resolved an issue where choosing to block public admin panel access on Nginx failed. Many thanks to @anubis-genix for reporting this issue: https://github.com/MichaIng/DietPi/issues/3024#issuecomment-550342684
- DietPi-Software | Java: Resolved an issue where install on ARMv6 RPis (1/Zero) on Buster system failed, since Java 11 is not ARMv6-compatible. On these system, Java 8 is now installed instead. Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/3182
- DietPi-Software | rTorrent: Resolved an issue where rTorrent and the webserver didn't have sufficient permissions to read and write ruTorrent web UI settings and data. Many thanks to @notDavid for reporting this issue: https://github.com/MichaIng/DietPi/issues/3244
- DietPi-Software | rTorrent: Updated deprecated commands and variables in our default config file. Many thanks to @bbsixzz for reporting this issue: https://github.com/MichaIng/DietPi/issues/3273
- DietPi-Software | rTorrent: Resolved an issue where ruTorrent DarkBetter theme was not installed. Many thanks to @bbsixzz for reporting this issue: https://github.com/MichaIng/DietPi/issues/3271
- DietPi-Software | Amiberry: Resolved an issue where the binary fails to execute on Odroid XU4. Many thanks to @wasu111 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3181
- DietPi-Software | Tor Hotspot: Resolved an issue where, since Buster, Tor fails to start due to deprecated config file entries. Many thanks to @blizarazu for reporting this issue: https://github.com/MichaIng/DietPi/issues/3261
- DietPi-Software | Allo web GUI: Resolved an issue where web access fails due to wrong permissions. Many thanks to @Heroldgray for reporting this issue: https://github.com/MichaIng/DietPi/issues/3264
- DietPi-Software | GMediaRender: Resolved an issue where service fails to start due to missing permissions. Many thanks to @fnsnyc for reporting this issue: https://github.com/MichaIng/DietPi/issues/3263
- DietPi-Software | GMediaRender: Resolved issues due to limited binary features by using new own compiled binaries, based on gmrender-resurrect v0.0.8. Many thanks to @fnsnyc and @hifitime for reporting this issue: https://github.com/MichaIng/DietPi/issues/3263, https://github.com/MichaIng/DietPi/issues/3246
- DietPi-Software | Nextcloud: Resolved an issue where install fails due to a bug in Nextcloud 17.0.2. DietPi will now install Nextcloud 17.0.1 until the bug has been fixed. Updates from web UI are still possible, this only affects the fresh install. Many thanks to @DevinCharles for reporting this issue: https://github.com/MichaIng/DietPi/issues/3275
- DietPi-Software | Redis: Resolved an issue where service start failed in some cases. File logging is now disabled and replaced by journal logging, hence all combined Redis logs are now available via: journalctl -u redis-server. Many thanks to @dankerthrone for reporting this issue: https://github.com/MichaIng/DietPi/issues/3291

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/3290

-----------------------------------------------------------------------------------------------------------

v6.26
(15/10/19)

Changes / Improvements / Optimisations:
- General | Support for Debian Jessie has now been fully dropped from DietPi code. Jessie systems are moved to the "jessie-support" Git branch and will stay on v6.25. Critical bugs, if reported, may still be fixed, but DietPi-Software related issues and new features will not be handled anymore by the DietPi code team. However, everyone is free to open pull requests against the jessie-support branch: https://github.com/MichaIng/DietPi/tree/jessie-support
- General | Initial support and definitions for Debian Bullseye, the new Debian testing version, have been added to DietPi code. You can now create Bullseye systems via DietPi-PREP: https://github.com/MichaIng/DietPi/issues/3009
- General | DietPi scripts, i.e. dietpi-software, will not overwrite you custom permissions in /mnt/dietpi_userdata anymore. Instead required permissions are now only applied for individual software titles that are being installed. Besides saving you time to re-apply custom permission, this as well enhances security in some cases where software installers/archives apply/contain stricter per-file/dir permissions. Many thanks to @JJGO and @johnvick for suggesting this enhancement: https://github.com/MichaIng/DietPi/issues/2641
- General | On first boot, when DietPi-Software finishes the initial setup, it is now assured that all APT packages, including firmware, are upgraded by performing an "apt-get dist-upgrade"/"apt full-upgrade". Since it includes upgrades regardless of underlying dependency and conflict changes, which in rare cases can perform unwanted removals, we do not do this on regualar DietPi-Update/Software runs. But on first boot, without additional packages installed yet, it is safe. Many thanks to @cmessin1 for doing this request: https://github.com/MichaIng/DietPi/issues/3098
- Rockchip | Experimental GPU acceleration support for RK3399 SoCs and ASUS Tinker Board has been re-enabled.
- RPi | The haveged daemon has been replaced with rng-tools, an alternative which does not work on all devices, but has been proven to work on RPi, is default on Raspbian and uses less RAM on idle.
- RPi4 | The default CPU temperature limit (temp_limit) has been raised from 65C to 75C, since this device runs significantly hotter then previous RPi model. Many thanks to @trueaspects and @Trunkzeh for doing this suggestion: https://github.com/MichaIng/DietPi/issues/3019, https://github.com/MichaIng/DietPi/issues/3151
- DietPi-Globals | The environment variable $G_USER_INPUTS has been renamed to $G_INTERACTIVE, which describes better what it does. When setting this to "0", DietPi scripts will run non-interactively, i.e. all whiptail dialog prompts and other tasks that require manual user input are skipped. Note that this is not required when running scripts from cron jobs or systemd units, since those have no STDIN attached which makes DietPi scripts run non-interactively automatically. Scripts will stay backwards-compatible, thus respect $G_USER_INPUTS for a while, but please adjust your scripts or docs where you make use of it. Many thanks to @AtkLordOverAll for contributing this change: https://github.com/MichaIng/DietPi/pull/3041
- DietPi-PostBoot | /var/log/boottime is not created anymore. Please use "systemd-analyze" to get much more accurate and detailed boot information.
- DietPi-PostBoot | The pre-login banner has been slightly adjusted: Default login credentials are now only shown on first boot, since the information is obsolete when user changed the password. As well an info has been added that one needs to hit <return> to show the username input field.
- DietPi-Banner/NordVPN: DietPi-NordVPN has a new input command to print the current VPN connection state: "dietpi-nordvpn status". This has been implemented as well into DietPi-Banner to optionally show NordVPN connection state on login automatically. Many thanks to @svh1985 for implementing this feature: https://github.com/MichaIng/DietPi/pull/3084
- DietPi-NordVPN | Added options for connection up/down scripts, e.g. to implement killswitches, answer inbound connections from outside local network correctly, safe and track connection uptime, and similar tasks. Many thanks to @svh1985 for implementing this feature: https://github.com/MichaIng/DietPi/pull/3047
- DietPi-Config | Audio Options: Menu has been reworked. Audio capabilities (ALSA) can be enabled and disabled as a separate option. If enabled, generic sound card auto-detection has been added to the bottom of the list for all devices. This allows the selection of generic sound devices on all SBCs, e.g. if unknown to DietPi or if our hard-coded card/device IDs are wrong due to additional attached audio hardware.
- DietPi-Config | Some /etc/modprobe.d/ configs are merged to less files and mostly prefixed with "dietpi-", to allow easier differentiation between Debian/pre-image and DietPi files.
- DietPi-Config | RPi: Update certain config.txt settings to match new firmware version. WiFi and Bluetooth is now disabled via related dtoverlays, which should further reduce hardware and firmware loads.
- DietPi-Config | Added overclocking profiles for RPi4. Many thanks to @aftensleuk for request and valuable suggestions: https://dietpi.com/phpbb/viewtopic.php?t=6225
- DietPi-Config | RPi: Re-added previously removed options to adjust initial turbo for CPU frequency on boot and to lower the idle CPU frequency. The related firmware issues have been fixed with a recent update: https://github.com/MichaIng/DietPi/issues/3147
- DietPi-Config | RPi: Removed the option to adjust CPU frequency limits. On RPi the dynamic CPU governors only jump between "arm_freq" and "arm_freq_min", hence those limits should be set via overclocking profile and the newly re-added "ARM Idle Frequency" option.
- DietPi-Config | RPi1/Zero: OpenGL modes/drivers can now be successfully selected/installed from display resolution menu.
- DietPi-Software | TightVNC: Since Stretch, TightVNC has been replaced by TigerVNC, thus the install option has now been removed from code.
- DietPi-Software | SDL2: Since we ship a tailored build for Amiberry, the general install option for SDL2 has been removed, instead it will be installed/updated along with Amiberry. If you require SDL2 for any other purpose, please install the "libsdl2-2.0.0" package from APT repository: https://packages.debian.org/libsdl2
- DietPi-Software | Pi-hole: Logging to /var/log/pihole.log is now disabled by default, since it is not required in usual cases. Query logs, shown in web UI, are stored in database. This might also resolve possible pihole-FTL crashes in combination with DietPi-RAMlog and DietPi-Logclear. Many thanks to @kuerious for reporting and @Mcat12 for providing helpful information on this topic: https://github.com/pi-hole/FTL/issues/614
- DietPi-Software | Pi-hole: Webserver configs have been added to block public access to the blocking page, optionally as well to the admin panel and generally block access to dot files/dirs (.git*) inside the admin panel directory. Parts are inspired by the official Lighttpd config, provided by Pi-hole: https://github.com/pi-hole/pi-hole/blob/master/advanced/lighttpd.conf.debian
                             Many thanks to @AtkLordOverAll for his effort to implement this for Lighttpd initially + the choice during install to block public admin panel access as well: https://github.com/MichaIng/DietPi/pull/3054
- DietPi-Software | OpenVPN: Rsyslog is not installed anymore together with OpenVPN server. Logs are available via "journalctl -u openvpn", all system logs via "journalctl". If you require persistent logs, uninstall DietPi-RAMlog via dietpi-software and make the journal boot persistent via: mkdir /var/log/journal
- DietPi-Software | Gogs: On ARMv7 and x86_64 now the latest version from GitHub is installed. Reinstalls will upgrade the version while preserving existing settings. Many thanks to @LazyLama for doing this suggestion: https://github.com/MichaIng/DietPi/issues/2999
- DietPi-Software | Webmin: Install is now done via official APT repository to allow easier updates. To apply this to all systems, it is reinstalled on DietPi-Update to v6.26. Additionally the dependency on rsyslog has been removed. The Webmin logging panel still depends on rsyslog, but the overhead shall not be applied to all systems by default. Instead users can now decide themselves, whether they need to see system logs on Webmin, or not, and in case apply custom logging settings as well.
- DietPi-Software | Amiberry: Enabled support for RPi4 and Odroid XU4. Thanks to @midwan for providing the binaries: https://github.com/MichaIng/DietPi/issues/3104
- DietPi-Software | myMPD: Updated install steps to avoid deprecations of the current upstream version. As well the service will not run as primary group "dietpi" anymore, which is only required for software that creates media files. Many thanks to @jcorporation (developer of myMPD) for providing this information as well as a smooth build script that updates old instances gracefully: https://github.com/MichaIng/DietPi/issues/3097
- DietPi-Software | WiFi Hotspot: Since on some systems, a hostapd service mask was found, it is now unmasked on install. As well our custom compiled binaries are now only installed on RTL8188C* devices where no special Realtek hostapd package is available. Many thanks to @symbios24 for reporting the service mask issue: https://github.com/MichaIng/DietPi/issues/2962
- DietPi-Software | Fail2Ban is not handled by DietPi-Services anymore, since the brute-force protection shall stay active during updates, installs, backups etc. The service is now started by systemd on boot and stays active until shutdown. Additionally on fresh installs the default jail.conf is optimised for the set "route" ban action: "blackhole" is now the route type, which does not send any respond to blocked requests.
- DietPi-Software | WireGuard: Support for RPi1 + RPi Zero (ARMv6 models) has been enabled by switching to Bullseye as source repo, which is available for Raspbian as well. Additionally on RPi, the WireGuard kernel module is now rebuilt automatically after kernel package upgrades. Many thanks to @johnnyt83 for suggestion RPi1/Zero support and his efforts to test the source build: https://github.com/MichaIng/DietPi/issues/2997
- DietPi-Software | Gitea: Version 1.9.4 will be shipped from now on. Many thanks to @msongz and @minhphuc429 for implementing this update: https://github.com/MichaIng/DietPi/pull/3138, https://github.com/MichaIng/DietPi/pull/3154
- DietPi-Software | Aria2: Runs now as it's own user "aria2" and group "dietpi" with home directory and config file moved to /mnt/dietpi_userdata/aria2/. Besides satisfying security standards, this allows other download and media related software, provided by dietpi-software, direct access to Aria2 downloads without the need for custom permission changes. Additionally the current session (download states) are saved on service stop and every 60 seconds, to prevent current tasks from being lost on reboot or power loss. Aria2 will be reinstalled with v6.26 to apply these changes. Many thanks to @msongz for implementing and testing the session feature: https://github.com/MichaIng/DietPi/pull/3139

Bug Fixes:
- General | Removed an obsolete OpenMediaVault cron job and binary that was leftover on at least one of our images (NanoPi NEO2) and is not part of the current OMV packages, thus save to remove in every case. Many thanks to @kt1024 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2994
- General | Resolved an issue where install of required APT packages for certain scripts could fail in the rare case that APT lists are outdated and old packages are not available in the repo anymore. Many thanks to @Paulisper for reporting this issue: https://github.com/MichaIng/DietPi/issues/2996
- General | Resolved an issue on some Buster systems where console-setup fails on boot to apply keyboard layout and console settings. Many thanks to @jaxjexjox for reporting this issue: https://github.com/MichaIng/DietPi/issues/2912#issuecomment-532100542
- Rock64/RockPro64 | Resolved an issue where DietPi could not obtain the active network adapter and IP, if onboard Ethernet was used. This is because of a kernel-related bug, which seems to cause Ethernet connection instabilities as well in cases. A workaround is applied to all new Rock(Pro)64 images and via DietPi-Update. Many thanks to @svh1985 for reporting this issue, as well as searching and testing the workaround: https://github.com/MichaIng/DietPi/issues/3066
- DietPi-Update | Resolved an issue where the script did not exit on error: https://github.com/MichaIng/DietPi/issues/3127
- DietPi-Login | Resolved an issue during first run setup, where DietPi-Software was called with mostly wrong whiptail menu dimensions. This lead to info prompts and menus being quite small, in particular the "Install" menu entry, that one needs to select, being only visible when navigating to the bottom. Many thanks to @pbecks1963 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3053
- DietPi-NordVPN | Resolved an issue where the server menu could have wrong entries or even fail, if foreign files were placed inside the config directory. Many thanks to @svh1985 for reporting this issue and implementing a fix: https://github.com/MichaIng/DietPi/pull/3047
- DietPi-Run_NTPD | Resolved an issue where changing time sync mode or mirror, from within time sync error prompt, led to a concurrent script execution. Many thanks to @Sopor for reporting this issue: https://github.com/MichaIng/DietPi/issues/3010
- DietPi-Services | Resolved an issue where single service calls failed if their names contain certain special characters, like dots. Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/3059
- DietPi-Config | Resolved an issue on RPi where I2C baudrate was not applied correctly, thus selection was ineffective. Many thanks to @flashspys for reporting this issue: https://github.com/MichaIng/DietPi/issues/2966
- DietPi-Config | Resolved an issue on RPi where headless mode did not disable all video outputs and framebuffer as intended, since the used config.txt setting has been removed with recent firmware versions.
- DietPi-Config | Resolved an issue on RPi4 where SDTV/composite video output did not happen when selecting the related resolution menu entries.
- DietPi-Config | On RPi4, vc4-kms-v3d option has been removed from display resolution menu, since the full KMS driver is not supported on RPi4 currently.
- DietPi-Software | Resolved an issue where the script tells you that SQLite will be installed as pre-req, while actually a desktop is required and LXDE will be installed.
- DietPi-Software | X11/Kodi on Odroid C2: Resolved an issue on Odroid C2 where Kodi failed to start. GPU drivers and X11 config will be updated during DietPi-Update to cover this issue. Many thanks to @alexeylutskov for reporting this issue and testing the fix: https://github.com/MichaIng/DietPi/issues/3028
- DietPi-Software | Kodi: Resolved an issue where Kodi failed on RPi Buster and RPi4. Many thanks to @GulyFMG, @derdershat and @jonyskids for reporting this issue, searching and testing workarounds: https://github.com/MichaIng/DietPi/issues/3031
- DietPi-Software | Gitea: Resolved an issue where install fails on ARMv7 systems. Many thanks to @maschiw for reporting this issue: https://github.com/MichaIng/DietPi/issues/2959
- DietPi-Software | Node-RED: Resolved an issue where install fails due to missing data directory creation. Many thanks to @Orfait for reporting this issue: https://github.com/MichaIng/DietPi/issues/2975
- DietPi-Software | Node-RED: Resolved an issue where user creation fails if "gpio" group is not present. Many thanks to @marcobrianza for reporting this issue: https://github.com/MichaIng/DietPi/issues/2975#issuecomment-513917360
- DietPi-Software | OpenVPN: Resolved an issue where install failed on Debian Buster due to a new easy-rsa version with changed commands and options. Now the most recent easy-rsa is manually downloaded on all systems to generate server and client key + cert with modern methods and the client config is slightly updated to match modern settings.
- DietPi-Software | XRDP: On Stretch, new the version from backports is installed. This resolves a critical issue where /etc/profile was not loaded to the session and, due to incomplete $PATH variable, important system binaries were not available on terminal emulators which broke many install and upgrade tasks. Furthermore this resolves an issue where install and connection of XRDP failed if IPv6 was disabled. Many thanks to @aspinks for the debug session which allowed us to track the issue down to its root: https://github.com/MichaIng/DietPi/issues/3017
- DietPi-Software | Sonarr: Resolved an issue where install failed due to an outdated APT repository key. Many thanks to @GregoryDosh and @GulyFMG for reporting this issue: https://github.com/MichaIng/DietPi/issues/3029
- DietPi-Software | Plex Media Server: Resolved an issue where DietPi-Update failed for versions prior to v6.23, due to the obsolete Plex Media Server dev2day repository being offline now. This repo is now removed via pre-patches, prior to G_AGUP being called. During regular patches PMS is reinstalled, applying the new official APT repo. Many thanks to @p-roman for reporting this issue: https://github.com/MichaIng/DietPi/issues/3038
- DietPi-Software | Pi-hole: Resolved an issue, where the blocking page was only shown, if the blocked URL contained the domain only, without any appending path: https://github.com/MichaIng/DietPi/pull/3072
- DietPi-Software | TigerVNC: Resolved an issue on Debian Buster, where the VNC connection fails immediately due to an external bug, if no read-only password has been applied via vncpasswd. Many thanks to @Trunkzeh for reporting this issue and providing the workaround: https://github.com/MichaIng/DietPi/issues/3070
- DietPi-Software | TigerVNC: Resolved minor error messages on login and in logs: "No session for PID ...", "DE is (null); No desktop environment set, fallback to LXDE", "Use of uninitialized value $proto in socket at /usr/bin/tigervncserver"
- DietPi-Software | Netdata: Resolved an issue where install failed on Stretch systems. Many thanks to @Velociraptor85 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3062
- DietPi-Software | Amiberry: Resolved an issue where install failed on Buster due to changed library package version. The SDL2 library has been recompiled for Buster with minimal dependencies, thus X11 does not need to be installed anymore. Many thanks to @TuKo1982 for reporting this issue: https://github.com/MichaIng/DietPi/issues/3104

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/3162

-----------------------------------------------------------------------------------------------------------

v6.25
(03/07/19)

Changes / Improvements / Optimisations:
- System | By default the "haveged" entropy daemon is now installed on all DietPi systems and patched with v6.25. It assures the pool of random bits /dev/random stays filled by using additional sources of randomness. This solves a bunch of issues, including hanging or very long boot times, very long service (re)starts or timeout failures and on Buster hanging network access. Especially affected is PHP7.3-FPM but as well VPN servers and WiFi hotspots and potentially many other network or cryptography related tasks. More information on this topic: https://github.com/MichaIng/DietPi/issues/2806
- System | Initial RPi4 support has been added to the code and some other rare RPi models are now detected correctly by their revision codes. Note that a new Buster-based image is required to support RPi4 and further work on DietPi-Config to support new RPi4 features. Full support is expected with DietPi v6.26, testing images can be found here: https://github.com/MichaIng/DietPi/issues/2935#issuecomment-506389899
- DietPi-FirstBoot | First boot setup steps have been moved into a separate script and systemd unit. This allows further cleanup of the regular boot process and more targeted debugging and development. Many thanks for @FredericGuilbault for implementing this enhancement: https://github.com/MichaIng/DietPi/issues/2791
- DietPi-Autostart | When choosing an autostart option that does not require a manual UNIX user login, the autologin user can now be chosen (which was always "root" previously). This can be applied automatically on firstrun setup with the new "AUTO_SETUP_AUTOSTART_LOGIN_USER" setting within dietpi.txt. If the user does not exist, is a system user (UID < 1000) or does not have a valid login shell, it will be reverted to root. Many thanks to @FredericGuilbault for suggesting this feature: https://github.com/MichaIng/DietPi/pull/2926
- DietPi-Globals | G_OBTAIN_CPU_TEMP(): Added support for Core2Duo CPU temperature to be printed on e.g. DietPi-Banner and "cpu" command output. Many thanks to @OstrovCity for posting the required information: https://github.com/MichaIng/DietPi/pull/2563#issuecomment-494388278
- DietPi-Service 2.0 | Combines dietpi-process_tool into dietpi-services. Adds I/O policies, single/global service control and much more: https://github.com/MichaIng/DietPi/pull/2786
- DietPi-Process_tool | Has been replaced with DietPi-Services. Existing saved options will no longer be available, please use 'dietpi-services' to apply required process_tool options with the upgraded system.
- DietPi-Explorer | Disabled opening of files in nano under select a file/folder mode.
- DietPi-Drive_Manager | Added the option to change the I/O scheduler per drive. Many thanks to @Generator for pointing us onto this topic: https://github.com/MichaIng/DietPi/issues/2233
- DietPi-Drive_Manager | Services are not stopped directly at start of this script any more. Instead this is done only on critical tasks, e.g. transferring of DietPi userdata, the swapfile or RootFS. Further increased navigation speed by re-running the drive detection loop only when affecting changes have been made, and, by several other code enhancements.
- DietPi-Config | APT Cache: We added new options to "dietpi-config" > "Advanced Options" > "APT Cache" to disable the APT cache or move cache, repo lists and/or package download directory to RAM. By default we disable the APT cache, which saves 50 - 100 MiB disk writes on each "apt-get update" call, but slows down "apt-cache" calls: https://github.com/MichaIng/DietPi/issues/2840
- DietPi-Config | RTC mode: When selecting this option, a menu with additional info is shown instead of just toggling the state. Many thanks to @Sopor for this suggestion: https://github.com/MichaIng/DietPi/issues/2826
- DietPi-Config | Audio Options (RPi): I-Sabre-K2M/Q2M sound card drivers are now integrated into the RPi kernel. These are now enabled on selection instead of compiling the drivers from source: https://github.com/MichaIng/DietPi/issues/2690
- DietPi-Software | Mycroft AI FOSS voice assistant is now available for install. Many thanks to @LexiconCode for the initial request and all other requesters, FeatHub voters and testers: https://github.com/MichaIng/DietPi/issues/1701
- DietPi-Software | Resolved some misleading outputs when having VNC Server or GPU using software installed. Many thanks to @mtpiercey for reporting these issues: https://github.com/MichaIng/DietPi/issues/2870
- DietPi-Software | Deluge: Lowered UMask (007 => 002) to allow read access from e.g. custom Samba shares without "dietpi" user. Many thanks to @radsb for reporting the limited access: https://dietpi.com/phpbb/viewtopic.php?t=5847
- DietPi-Software | FFmpeg: On RPi, the new APT repo package will be installed, which now supports RPi hardware acceleration and is some subversion newer then the package hosted on dietpi.com: https://github.com/MichaIng/DietPi/issues/869#issuecomment-490047405
- DietPi-Software | Gitea: Current stable v1.8.X will be installed now and existing instances will be upgraded during DietPi-Update. Many thanks to @msongz for implementing this: https://github.com/MichaIng/DietPi/pull/2881
- DietPi-Software | myMPD: Current upstream version will be installed now and existing instances will be upgraded during DietPi-Update, which requires a config file reset. A backup to recover custom settings from will be created: https://github.com/MichaIng/DietPi/issues/2156#issuecomment-497513129
- DietPi-Software | O!MPD: Current upstream version will be installed now and existing instances will be upgraded during DietPi-Update. Existing config and database will be preserved. YouTube and Tidal support is added now by default. Many thanks to @ArturSierzant for giving valuable feedback and suggestions: https://github.com/MichaIng/DietPi/pull/2884
- DietPi-Software | Ampache: Reinstalls will now preserve existing configs and database.
- DietPi-Software | Medusa: mediainfo is now installed to enable Medusa gathering meta data and resolving related warnings in log. Additionally, on Stretch and above, Python3 is now installed and used, as recommended by Medusa for a while. Many thanks to @bluesmoke for suggesting this enhancement: https://dietpi.com/phpbb/viewtopic.php?t=5945
- DietPi-Software | Node-RED: "sudo" permissions are now enabled by default: https://github.com/MichaIng/DietPi/issues/2910

Bug Fixes:
- Network | Resolved an issue where an unintended Ethernet/WiFi IP value was shown if no IP is assigned.
- DietPi-Boot | Waiting for network timer now includes the start of 'ifup' for the device. This is to speed up boot time by threading the ifup command and allowing the wait timer to be more accurate.
- DietPi-Login | Resolved an issue where login leads to immediate logout if DietPi scripts were not loaded to DietPi-RAMdisk location. Many thanks to @LexiconCode for reporting this issue: https://github.com/MichaIng/DietPi/issues/2841#issuecomment-494567292
- DietPi-Update | Resolved an issue where after update and reboot DietPi-Banner still shows update available with identical current and server versions.
- DietPi-Cleaner | Resolved an issue where the cleaner ran into an endless loop if "Files" cleaner was used. Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/2837
- DietPi-PREP | Resolved an issue where ifupdown (networking service) was autoremoved, which broke running network connections.
- DietPi-Drive_Manager | Resolved an issue where idle spin down selection would always default to 241, instead of currently active value: https://github.com/MichaIng/DietPi/issues/2852
- DietPi-Drive_Manager | Resolved an issue where eCryptfs fstab entries were not detected and preserved correctly. Many thanks to @johnvick for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=18428#p18283
- DietPi-Drive_Manager | Resolved an issue where transferring the RootFS to a BTRFS formatted drive fails. Since BTRFS support is not natively built into the RPi and Odroid kernel, a warning prompts and the transfer is aborted. Many thanks to @dieitpi for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=18164#p18164
- DietPi-Drive_Manager | Resolved an issue where on x86_64 systems a specific Seagate drive, attached via USB, does not spin down on idle. Many thanks to @tomillr for reporting this issue: https://github.com/MichaIng/DietPi/issues/2905
- DietPi-Config | (RPi) Resolved an issue where selecting sound cards with vc4 enabled would result with incorrect ALSA card index: https://github.com/MichaIng/DietPi/issues/2173
- DietPi-Config | Resolved an issue where selecting any locale (language) failed, which does not contain "UTF-8" in its name. DietPi only supports UTF-8 locales, but those available with UTF-8 only, do not have the ".UTF-8" suffix in their name.
- DietPi-Software | Resolved an issue on Buster systems that were dist-upgraded manually from Stretch, where DietPi-Software failed to obtain the global software password. Many thanks to @MattL0 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2937
- DietPi-Software | Resolved an issue where audio software failed to use hardware acceleration on Buster. Users need to be part of the new "render" group on Buster to have permissions. Many thanks to @tomillr for reporting this issue: https://github.com/MichaIng/DietPi/issues/2916
- DietPi-Software | MotionEye: Resolved an issue on ARMv6 where install failed due to PHP Buster repo conflicts. Many thanks to @infinitejones for reporting this issue: https://github.com/MichaIng/DietPi/issues/2888
- DietPi-Software | Ampache: Resolved an issue where database connection failed when a custom global software password (other than "dietpi") was chosen. Many thanks to @WarHawk for reporting this issue and solution: https://dietpi.com/phpbb/viewtopic.php?p=15771#p15771
- DietPi-Software | Desktops: Resolved an issue where PolicyKit failed when logging in via LightDM as non-root user, which broke shutdown and reboot options from logout panel. Many thanks to @magus7091 for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5850
- DietPi-Software | Transmission: Resolved an issue where settings applied via web UI did not survive a service restart or reboot. Many thanks to @chosen_too and @th0maz for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=17927#p17927
- DietPi-Software | Docker: The official Docker installer now supports Debian Buster and a workaround for the still missing Raspbian Buster support has been implemented. Many thanks to @Qarasique for reporting this issue: https://github.com/MichaIng/DietPi/issues/2891

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/2950

-----------------------------------------------------------------------------------------------------------

v6.24.1
(18/05/19 Hotfix)

Bug Fixes:
- DietPi-WiFi-Monitor | Resolved an issue where the service leads to a constant high CPU load. Many thanks for @GulyFMG for reporting this issue: https://github.com/MichaIng/DietPi/issues/2802
- DietPi-Software | PHP: On ARMv6, fine tuned the required Buster branch priority pins to avoid certain APT dependency errors. Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/2808, https://github.com/MichaIng/DietPi/issues/2811
- DietPi-Software | Lighttpd: Resolved an issue where Lighttpd fails to start on ARMv6. Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/2808

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/2819

-----------------------------------------------------------------------------------------------------------

v6.24
(15/05/19 Hotfix)

Changes / Improvements / Optimisations:
- DietPi-Software | Emby + Plex Server: Enabled access to DietPi network mounts and media files by default. Many thanks to @ilgrank for reporting this missing feature: https://github.com/MichaIng/DietPi/issues/2801
- DietPi-Software | ownCloud + phpBB: Support had to be disabled on ARMv6 for now until we either find a way to install PHP7.2 (with all required modules) outside of sury.org (which does not support ARMv6) or those enable support for PHP7.3 (expected with ownCloud 10.3 and phpBB 3.3).

Bug Fixes:
- DietPi-Software | PHP: Resolved a critical issue where PHP install/update broke ARMv6 devices since Debian armhf does not support ARMv6 like Raspbian does. Many thanks for the fast user reports: https://github.com/MichaIng/DietPi/issues/2794
- DietPi-Software | PHP: Resolved an issue where APT upgrade can fail due to insufficient sury.org APT repo preferences. Many thanks to @sifyer for reporting this issue: https://github.com/MichaIng/DietPi/issues/2795
- DietPi-WiFi-Monitor | Resolved a failure due to false concurrency check. Many thanks to @GulyFMG for reporting this issue: https://github.com/MichaIng/DietPi/issues/2802

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/2803

-----------------------------------------------------------------------------------------------------------

v6.23
(12/05/19)

Jessie support:
- The support for Debian Jessie is fading constantly by software titles and Debian itself, increasing the effort for us to work around the raising issues: https://github.com/MichaIng/DietPi/issues/2332
- As a result we move Jessie systems to a dedicated "jessie-support" branch. Next DietPi v6.24 will still be merged into this branch as well, but for following updates it depends on how much additional related issues we face.
- We highly recommend to migrate to Stretch as fast as possible.
- Odroid C1: We have updated the image to Stretch based on Armbian 4.18 kernel. Existing Jessie installations will be moved to the jessie-support branch: https://github.com/MichaIng/DietPi/issues/2561

Buster support:
- DietPi-Software | Resolved the last failing installs on Debian Buster systems by either fixing or disabling them: phpMyAdmin and Tomcat8 are currently not available on non-RPi Buster systems.
- DietPi on Debian Buster x86_64 systems can be considered as compatible and stable now. On ARM devices some last software install tests are outstanding, especially on Raspberry Pi with Raspbian particularities. We will ship experimental images for testing purpose soon.

Changes / Improvements / Optimisations:
- DietPi-Banner | Added support for DietPi message of the day (MOTD). This is enabled by default, however, can be disabled. Checks for latest MOTD once a day.
- DietPi-Banner | Always prints the local IP during boot mode display: https://github.com/MichaIng/DietPi/issues/2681
- DietPi-Benchmark | Increased default survey RootFS and RAM benchmark sizes. 100 MiB (from 10 MiB) for RootFS. RAM is 1/4 of available. This is ensure a more accurate calculation of throughput when we divide bytes against time, to obtain the MB/s result. Benchmarks now also run at Nice -19 and realtime I/O with priority 0 (highest).
- DietPi-Cleaner | Added a confirmation prompt, before removal of offline docs and man pages, as this may cause APT issues in some circumstances. Many thanks to @maartenlangeveld for reporting this issue: https://github.com/MichaIng/DietPi/issues/2751
- DietPi-LetsEncrypt | When applying to Lighttpd, "webroot" authentication is now used instead of "standalone". This allows the auto-renewal service to succeed while Lighttpd is running. Many thanks to @minnux for testing this method: https://github.com/MichaIng/DietPi/issues/2680#issuecomment-480095449
- DietPi-Arr_to_RAM | With v6.18 we silently added a new script (for Stretch and above) that allows linking Sonarr/Radarr/Lidarr database files to RAM, increasing access performance, reducing disk I/O and avoiding constant external HDD spinning due to the very regular access to these files. This script has gone through some rework and polishing and can now be enabled to automatically link those databases to RAM on boot and store them back to disk on shutdown. For more details read: https://dietpi.com/phpbb/viewtopic.php?t=5828. Many thanks to @Dr0bac for providing valuable input and testing the development progress constantly: https://github.com/MichaIng/DietPi/issues/2689
- DietPi-Drive_Manager | eCryptfs and vboxsf (VirtualBox shared folder) fstab entries are now preserved. Many thanks to @johnvick and @Phil1988 for suggesting: https://github.com/MichaIng/DietPi/issues/2078, https://github.com/MichaIng/DietPi/issues/2202
- DietPi-PREP | The script execution can now be fully automated via environment variables. Many thanks to @FredericGuilbault for adding this feature: https://github.com/MichaIng/DietPi/pull/2756
- DietPi-Config | Added support to toggle Intel CPU turbo/boost mode. Requires Intel CPU that supports the feature.
- DietPi-Config | G_CHECK_URL: Added ability to change the connection attempts and timeout, before DietPi URL checking assumes a dead link and failure: https://github.com/MichaIng/DietPi/issues/2717
- DietPi-Config | Serial/UART device handling has been reworked. Serial login consoles can now be toggled for every found serial device individually. On RPi the primary UART can be completely disabled and warnings are prompted if Bluetooth and login console are to be enabled both on ttyAMA0. On update existing systems will be patched so that serial-getty masks and enabled instances are removed if the related serial device does not exist. This solves some error messages during boot.
- DietPi-Config | Network Adapter menu has been cleaned up. Proxy variables are now sourced from "/etc/bashrc.d/dietpi-proxy.sh" and proxy setup outside of DietPi scripts is detected.
- DietPi-NordVPN | Added ability to toggle auto start/connect during boot.
- DietPi-Software | Subsonic: Package has been updated to v6.1.5. Many thanks to @spectrumcomputing: https://github.com/MichaIng/DietPi/pull/2702
- DietPi-Software | PHP: All systems will be upgraded to PHP7.3 for security, performance, compatibility and consistency across distro versions. Ondrejs (official Debian PHP maintainer) PHP repository (sury.org) is used for this on Jessie and Stretch, so general functionality and trustworthiness is assured. ownCloud and phpBB users will stay on PHP7.2 for where PHP7.3 is not yet supported. Your PHP configurations will be backed up and webserver configurations adjusted to match the new version. Nextcloud 13 and earlier, especially Jessie systems, will be upgraded to Nextcloud 14 to allow PHP7.3. A full Nextcloud backup will be done, your data, settings and custom apps will be preserved. We strongly advice to further upgrade to the current Nextcloud major version via its web UI updater.
- DietPi-Software | Subsonic: Runs now as limited user "subsonic". This change is as well applied to existing installs via patch during DietPi-Update: https://github.com/MichaIng/DietPi/pull/2705
- DietPi-Software | WireGuard APT packages are now upgraded when running "apt-get upgrade". Many thanks to @swrobel for reporting this issue: https://github.com/MichaIng/DietPi/issues/2671
- DietPi-Software | LXQt, GIMP, XFCE4 Power manager: Now available for installations.
- DietPi-Software | Plex Media Server: All systems are migrated to the new official APT repository. This allows easy and consistent upgrades via APT. On ARM systems the until now used 3rd party dev2day repo receives no further updates and will be shut down soon, which makes the migration mandatory. Many thanks to @WolfganP for keeping us informed with news about Plex v1.15 and the new APT repo: https://github.com/MichaIng/DietPi/issues/2655
- DietPi-Software | Logitech Media Server: Now installs the latest nightly version, since no public "releases" are done. As well the systemd service has gone through some update and now runs as limited user to align with other media servers, enhance security and follow the defaults of the DPKG package. The update/change is applied to existing installs via DietPi-Update as well. Your settings/date are preserved.
- DietPi-Software | Nextcloud Talk: We do not apply (D)TLS settings to coTURN any more. Since WebRTC is encrypted by itself there is no security benefit. More importantly Nextcloud Talk does not make use of the required TURNS protocol, so there is absolutely no point to apply these settings. The (D)TLS feature is meant to allow passing firewalls that only allow encrypted traffic. WebRTC, although encrypted, might not pass such firewalls since the encryption is not on transport layer. For those how are interested in further details and discussion: https://github.com/coturn/coturn/issues/33, https://github.com/nextcloud/spreed/issues/257
- DietPi-Software | SABnzbd: Install latest version via GitHub master and skip adjusting existing config file. systemd unit and dependencies have been adjusted to match minimum requirements and official documentation. The update will be applied via DietPi v6.23 patch as well. Many thanks to @19eighties for reporting the outdated version: https://github.com/MichaIng/DietPi/issues/2762
- DietPi-Software | Jackett: On non-ARMv6 devices the new (v0.11+) standalone (non-mono) binary is installed now. This is applied on DietPi-Update as well, preserving your settings: https://github.com/MichaIng/DietPi/pull/2773
- DietPi-Software | Blynk: Enabled support for Debian Buster by using the new Java 11 binary.
- DietPi-Software | UrBackup: New version 2.3.8 is installed now. Many thanks to @DeathIsUnknown for informing us about the update: https://github.com/MichaIng/DietPi/issues/2783

Bug Fixes:
- System | Debian has vastly reduced support for Jessie systems from their official APT repository. The limited possible list entries are applied during DietPi-Update. Many thanks to @BerndKohl for reporting this issue: https://github.com/MichaIng/DietPi/issues/2665
- DietPi-Set_swapfile | Resolved an issue where on first boot (and when calling the script manually) the swapfile creation is attempted on target file systems that do not support it (BTRFS). Many thanks to @mzramna for reporting this issue: https://github.com/MichaIng/DietPi/issues/719#issuecomment-484205696
- DietPi-Config | Resolved an issue where proxy settings would not be correct after a reboot. Many thanks to @stephantual for reporting this!: https://github.com/MichaIng/DietPi/issues/2704
- DietPi-Update | Resolved an issue where on older images first run update didn't finalise as intended, leading to several first run setup issues, depending on the image age. The fix has been applied outside of the releases since only the online part of the updater is affected: https://github.com/MichaIng/DietPi/pull/2684
- DietPi-Login | Resolved an issue where login as non-root user could result in a "sudo" password prompt or endless failure loop due to missing sudo permissions. Many thanks to @xsak for reporting this issue: https://github.com/MichaIng/DietPi/issues/2667
- DietPi-Software | Emby Server: Resolved an issue where download failed if the latest release does not contain a Debian package. Many thanks to @niblettr for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5755
- DietPi-Software | Transmission: Resolved an issue where double quotes in global software password caused a service startup failure. Many thanks to @Drew80 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2484#issuecomment-480675168
- DietPi-Software | WireGuard: Resolved an issue where IPv6 connections did not work with enabled IPv6 forwarding. Many thanks to @schnuckz for reporting this issue: https://github.com/MichaIng/DietPi/issues/2691
- DietPi-Software | Subsonic: Resolved an issue where FFmpeg transcoder might not have been applied correctly. Many thanks to @spectrumcomputing for reporting this issue: https://github.com/MichaIng/DietPi/issues/2697
- DietPi-Software | Amiberry: Resolved an issue where no login prompt was present when exiting Amiberry from fastboot mode. Many thanks to @Trigger58 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2703#issuecomment-482471440
- DietPi-Software | Logitech Media Server: Resolved an issue where certain plugins failed due to missing "libio-socket-ssl-perl". Many thanks to @noobian and @Edward for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5824
- DietPi-Software | Fail2Ban: Resolved an issue where the service silently failed due to wrong log level settings on Stretch and Buster systems. Many thanks to @joaofl for reporting this issue: https://github.com/MichaIng/DietPi/issues/90#issuecomment-485140236
- DietPi-Software | Redis: Resolved an issue on Jessie systems where the service fails to start due to wrong shipped permissions from Debian package: https://github.com/MichaIng/DietPi/issues/2736
- DietPi-Software | Nextcloud: Resolved an issue on Lighttpd with HTTPS enabled where OPcache settings were not applied as desired, leading to a warning on Nextcloud admin panel. Many thanks to @Borotes for reporting this issue: https://github.com/MichaIng/DietPi/issues/2489
- DietPi-Software | Nextcloud/ownCloud: Fixed a wrong directive in our Lighttpd configs. Many thanks to @WilburWalsh for reporting this issue: https://github.com/MichaIng/DietPi/issues/2775
- DietPi-Software | Nextcloud Talk: Resolved an issue where coTURN prints two warnings about deprecated settings on Buster systems, due to some changes with latest versions.
- DietPi-Software | Kodi: Resolved an issue on RPi where Kodi (v18) fails to start when a custom screen resolution was chosen. Many thanks to @johnnypea for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?p=17550#p17550
- DietPi-Software | Java: Resolved an issue where install fails on Jessie systems since the used jessie-backports APT repo does not exist any more: https://github.com/MichaIng/DietPi/issues/2752
- DietPi-Software | Java: Resolved an issue where install fails on Buster systems since OpenJDK 8 packages are not available any more on Buster repo. OpenJDK 11 is installed instead, testing with Java software titles is outstanding.
- DietPi-Software | Node.js: Resolved an issue where install failed on ARMv6 since Node 12 does not support it any more. Many thanks to @axwax for reporting this issue: https://github.com/MichaIng/DietPi/issues/2755
- DietPi-Software | Tor/WiFi Hotspot: Resolved an issue where WiFi Hotspot fails to start when Tor Hotspot is installed. Many thanks to @schnuckz for reporting this issue: https://github.com/MichaIng/DietPi/issues/2673#issuecomment-482605700
- DietPi-Software | Jackett: Resolved an issue where service start fails after using the internal updater. Many thanks to @DeathIsUnknown for reporting this issue and providing a solution: https://github.com/MichaIng/DietPi/issues/2593#issuecomment-490096681
- DietPi-Software | Blynk: Resolved an issue where logging failed and changed the default log directory to /var/log/blynk. Many thanks to @Phil1988 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2777

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/2784

-----------------------------------------------------------------------------------------------------------

v6.22
(23/03/19)

Changes / Improvements / Optimisations:
- Security | The DietPi-Software global password is now stored with enhanced security which also resolves a warning on Buster systems: https://github.com/MichaIng/DietPi/issues/2213
- System | /etc/bashrc.d/ now allows ".bash" file ending as well. We merged all contained DietPi scripts into one (/etc/bashrc.d/dietpi.bash): https://github.com/MichaIng/DietPi/pull/2636
- General | DietPi scripts now use the lightweight standalone "7zr" command to handle 7z archives. This allows us to lower the DietPi core package dependency from "p7zip-full" to "p7zip".
- RPi | DietPi does not set or change "framebuffer_depth" in config.txt any more which defaults to 16 which works in every known case. It will be re-added as fast as we find a case where another value is required.
- DietPi-Banner | You can now customise which options to display during system login. These include CPU temps, WAN IP, free disk space and more! Simply run 'dietpi-banner': https://github.com/MichaIng/DietPi/issues/2627
- DietPi-NordVPN | Added sent/received usage stats for VPN tunnel.
- DietPi-Sync | Sync will now abort if the source directory is empty. Merged dry run into real sync, as this was performed anyway to do required free space check. When "Sync" is selected, after dry run the user is presented a summary and given the option to view the detailed dry run log, cancel or continue with real sync. Some other minor fixes and enhancements have been applied as well. Many thanks to @midnightwatcher for doing this request: https://dietpi.com/phpbb/viewtopic.php?t=5588
- DietPi-Software | Emby Server: Now installs the latest version automatically (currently 4.0.2) which as well offers a native ARMv8 package: https://github.com/MichaIng/DietPi/pull/2525
- DietPi-Software | WireGuard: Switched from 10.8.0.0 to 10.9.0.0 IP addresses on fresh installs to avoid doubled IP range use with OpenVPN. Many thanks to @XRay437 for pointing this out: https://github.com/MichaIng/DietPi/issues/2491#issuecomment-461366739
- DietPi-Software | WireGuard: Changed the way users are advised to add multiple clients, to enhance concurrent connections. Many thanks to @curiosity-seeker for reporting and testing this issue: https://github.com/MichaIng/DietPi/issues/2491#issuecomment-462419860
- DietPi-Software | WireGuard: Hardened Debian Sid repo handling on RPi to prevent accidental non-WireGuard package installs. Many thanks to @rucknapucknavitz @1985kasper and @g7kse for reporting this issue: https://github.com/MichaIng/DietPi/issues/2568#issuecomment-465725312
- DietPi-Software | GMediaRender: Enabled support for Debian/Raspbian Buster by using the up-to-date APT repo package.
- DietPi-Software | Aria2: Tweaked settings to enhance 3rd party plugin support and removed deprecated/doubled entries. Many thanks to @msongz for the commit: https://github.com/MichaIng/DietPi/pull/2538
- DietPi-Software | UrBackup: Now installs updated version 2.3.7. Many thanks to @DeathIsUnknown for the information: https://github.com/MichaIng/DietPi/issues/2577
- DietPi-Software | Deluge: Reworked the installer to better match the Debian package defaults and recommendations/examples from official docs. Deluge now runs as user "debian-deluged", logs have been moved to "/var/log/deluged/" and the init.d service with its traces are removed, which are all pre-generated by the Debian APT package. The systemd units have been adjusted according to the official Deluge documentation. These changes are applied as well to existing installs during DietPi update, the old user "deluge" and obsolete configurations are removed. Your active configurations and data are preserved, the installer has been as well enhanced to better handle existing installs and never touch existing configs. Note that access to the Deluge console has to be done as user "debian-deluged" (sudo -u debian-deluged deluge-console). A related access issue to the console has been fixed by this as well. Many thanks to @seanmikhaels for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5525
- DietPi-Software | Amiberry: Updated to latest version (2.25), thanks @midwan: https://github.com/MichaIng/DietPi/issues/2599
- DietPi-Software | Netdata: On Debian Stretch/Buster and Raspbian Buster an up-to-date APT package is available, which will now be installed instead of our custom build. Many thanks to @74cmonty for this information: https://github.com/MichaIng/DietPi/issues/2446
- DietPi-Software | DietPi-RAMlog: When installing/enabling RAMlog, the /var/log mount point will be now cleaned before mounting the tmpfs on it, while preserving the existing logs metadata. This resolves a warning on early boot stage and frees the disk space consumed by the disk log before.
- DietPi-Software | rTorrent: Runs now as user "rtorrent" and creates files as group "dietpi" with 775/664 permissions. Enabled Buster support and enhanced config file handling on reinstall: https://github.com/MichaIng/DietPi/pull/2633
- DietPi-Software | Plex Media Server: Now installs the latest version automatically (currently 1.15) which as well includes official ARM binaries. Many thanks to @WolfganP for informing us about this new release: https://github.com/MichaIng/DietPi/issues/2553
- DietPi-Software | Nextcloud: Resolved an admin panel warning about missing ocm/ocs-provider redirects. Many thanks to @minnux for reporting this issue: https://github.com/MichaIng/DietPi/issues/2638
- DietPi-Software | Allo GUI: Updated to version 13. Provides for view the USB status and sound card status on DietPi Allo web GUI system status page. Many thanks to @sudeep!: https://github.com/sparky-sbc/sparky-test/tree/master/dietpi-gui-usbdebug

Bug Fixes:
- System | Resolved an issue where /etc/bashrc.d entries could be run multiple times. Many thanks to @jonare77 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2529
- System | Resolved an issue where /etc/rc.local was not executed due to an incompatible legacy rc-local.service. Many thanks to @Remonli for reporting this issue: https://github.com/MichaIng/DietPi/issues/2566
- DietPi-Config | RPi: Resolved an issue where I-Sabre-K2M sound card selection failed. Thanks to @klasLiesen for reporting this issue: https://github.com/MichaIng/DietPi/issues/2547
- DietPi-Config | RPi: Resolved an issue where serial console must be disabled, for Bluetooth to function correctly. This is now done automatically during BT enable: https://github.com/MichaIng/DietPi/issues/2607
- DietPi-Config/Banner | Resolved an issue where wrong adapter state is shown if it is not connected but has an IP assigned. Thanks to @msongz for reporting this issue: https://github.com/MichaIng/DietPi/issues/2573
- DietPi-Drive_Manager | Resolved an issue where RootFS R/O would not remain during reboots. Many thanks to @JBatSEEDLING for reporting this issue: https://github.com/MichaIng/DietPi/issues/2604
- DietPi-Software | XU4 + X11: Resolved various issues related to incorrect xorg.conf settings on this device. xorg.conf now used is installed automatically from Meveric's repo, which auto detects 3.x and 4.x kernel configuration and required settings automatically: https://github.com/MichaIng/DietPi/issues/2584 + https://github.com/MichaIng/DietPi/issues/2351
- DietPi-Software | MineOS/Koel: Resolved an issue where installs on ARMv8 devices failed. Many thanks to @DeathIsUnknown for reporting this issue and providing the solution: https://github.com/MichaIng/DietPi/issues/1880#issuecomment-464097174
- DietPi-Software | GMediaRender: Resolved an issue where the daemon can attach to a wrong IP if multiple network devices are present. As well resolved a failing service start on fresh install if/as the log file does not yet exist. Many thanks to @WilburWalsh for reporting these issues and providing the fix: https://github.com/MichaIng/DietPi/issues/2576
- DietPi-Software | OpenSSH Client: Resolved an issue where uninstalling the OpenSSH client will in case also remove the OpenSSH server.
- DietPi-Software | Emby Server: We disabled the install option on Jessie ARM systems. This never succeeded since Debian Jessie does not provide the required minimum libc6 version. Many thanks to @mbone for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5502
- DietPi-Software | Mopidy: Resolved issue with failed audio playback. Many thanks to @arkhub for reporting this issue: https://github.com/MichaIng/DietPi/issues/2536
- DietPi-Software | WireGuard: Resolved an issue with wrong client DNS entry if 127.0.0.1/localhost loopback is used as DNS entry on server. Many thanks to @swrobel for reporting this issue: https://github.com/MichaIng/DietPi/issues/2482
- DietPi-Software | WireGuard: Resolved an issue where on uninstall the Debian Sid repo was not removed from APT sources. Many thanks to @XRay437 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2545
- DietPi-Software | Java: Resolved possible install failures on ARM. Many thanks to @WTFMaster for reporting this issue: https://github.com/MichaIng/DietPi/issues/2524
- DietPi-Software | Remot3.it: Resolved an issue where install failed due to Git repo changes. Additionally Remot3.it is now available on x86_64 and ARMv8 systems as well. Many thanks to @techano for reporting this issue: https://github.com/MichaIng/DietPi/issues/2551
- DietPi-Software | Pi-hole: Resolved an issue where "pihole -up" fails because of wrong file permissions. Many thanks to @jonare77 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2516
- DietPi-Software | MPD: Resolved an issue with failed playback due to permissions. Permissions are now set via systemd service to ensure the MPD user can use both dietpi and audio groups: https://github.com/MichaIng/DietPi/issues/2462
- DietPi-Software | Airsonic: Resolved an issue where during install the FFmpeg transcoder symlink could be placed wrong, leading to a failing Airsonic start. Many thanks to @pecan_pie for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5637
- DietPi-Software | DietPi-RAMlog: Fixed an issue where logging mode could be set wrong when uninstalling and reinstalling RAMlog. Many thanks to @abecvar for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5666
- DietPi-Software | rTorrent: Resolved an issue where the ruTorrent web UI could not connect to the rTorrent daemon. Many thanks to @Chester007 for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5656

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pull/2653/files

-----------------------------------------------------------------------------------------------------------

v6.21
(07/02/19 Hotfix)

Changes / Improvements / Optimisations:
- DietPi-Software | VNC4: Automated VNC password based on $GLOBAL_PW.
- DietPi-Software | GPU memory split: You will now be prompted to increase GPU memory if DietPi detects a higher value is required for installed software: https://github.com/MichaIng/DietPi/issues/2483

Bug Fixes:
- General | G_RUN_CMD: Resolved issue with incorrect exit code return. This also prevented the ability to remove networked drives from dietpi-drive_manager: https://github.com/MichaIng/DietPi/issues/2508
- General | Resolved an issue when updating to v6.20, where DietPi-RAMdisk failed to sync changes to disk, causing several issues after reboot: https://github.com/MichaIng/DietPi/issues/2471#issuecomment-460104856
- DietPi-Software | WireGuard: Server installation also sets port as configured during installation to wg0-client.conf. Disabled installation for ARMv6 (no binaries). Many thanks to @WilburWalsh for reporting this issue: https://github.com/MichaIng/DietPi/issues/2474
- DietPi-Software | VNCserver: Resolved "HOME" variable not set in service.
- DietPi-Software | MariaDB: Resolved an issue with latest MariaDB v10.3 update on Buster due to deprecated/removed settings: https://github.com/MichaIng/DietPi/pull/2490
- PREP | Resolved issues with failed installation, due to missing pre-req directory: https://github.com/MichaIng/DietPi/issues/2487

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pulls?utf8=%E2%9C%93&q=is%3Apr+is%3Aclosed+base%3Amaster

-----------------------------------------------------------------------------------------------------------

v6.20
(28/01/19)

Image line-up:
- We removed Jessie images from our download server (besides for Odroid C1), since we see no advantage to use them anymore. Existing Jessie systems are still supported, but we encourage all users to consider switching to a fresh Stretch image by times: https://github.com/MichaIng/DietPi/issues/2332

Changes / Improvements / Optimisations:
- DietPi-PREP | Removed the option to install a Jessie system. Removed the option to install DietPi on top of a Wheezy image, since an upgrade over two distro version would be required, which is not reliable. It is still possible to install DietPi on top of a Jessie image, where a distro upgrade to Stretch would be applied: https://github.com/MichaIng/DietPi/issues/2332
- General | RPi-Update: In our effort to improve system stability, and, offer software installations which build custom modules (e.g. WireGuard), we can not longer support systems with non-stock APT kernel installed. If "rpi-update" is installed during update, DietPi will prompt and return you back to stock APT kernel.
- General | Moved the remaining conf/* files located on DietPi-RAMdisk to /var/lib/dietpi or into DietPi-PREP, and removed /DietPi/dietpi/conf completely. These files were only used once or never, thus have no business inside the RAMdisk.
- DietPi-Config | RPi: Improved available options for HDMI boost setting: https://github.com/MichaIng/DietPi/issues/2350
- DietPi-Config | RPi: Headless display mode is now applied via undocumented config.txt setting. Removed/Replaced some other obsolete config.txt entries: https://github.com/MichaIng/DietPi/pull/2402
- DietPi-Config | RPi: Added info to "hifiberry-dacplus" sound device overlay that it supports the AMP2 DAC. Thanks to @Lat Dior for reporting the issue and testing the solution: https://dietpi.com/phpbb/viewtopic.php?t=5396
- DietPi-Config | WiFi Hotspot: You can now toggle support for 802.11 N. Please note this is device and compatibility dependent, mileage may vary.
- DietPi-Drive_Manager | Now allows to check & repair the boot file system and trigger it for root file system on next reboot: https://github.com/MichaIng/DietPi/issues/1740#issuecomment-388325204
- DietPi-Software | Amiberry: Updated to v2.24, thanks @midwan! Brings several bug fixes, new features and improvements over the previous version (2.19). Please check the version history for full details on the changes made: https://github.com/midwan/amiberry/wiki/Version-history
- DietPi-Software | DietPi-NordVPN: Now available for installation. Includes a GUI which allows for easy connection to a list of NordVPN servers 'dietpi-nordvpn'. If you need a NordVPN subscription, please use this link: https://go.nordvpn.net/aff_c?offer_id=15&aff_id=5305&url_id=902
- DietPi-Software | WireGuard VPN is now available for installation. Is can be easily configured as client or as server, passing either all client traffic through the tunnel, local network access only, or server access only, e.g. as well in combination with Pi-hole, to have remote ad blocking.
- DietPi-Software | SickRage has been replaced by Medusa, which is now available for install: https://github.com/MichaIng/DietPi/issues/2239
- DietPi-Software | Blynk: Reinstalls now preserve existing config files; New directory structure and blynk user (v6.19) is patched now as well to existing installs: https://github.com/MichaIng/DietPi/pull/2324
- DietPi-Software | Plex Media Server: Updated to v1.14.0 on x86 images, switch to HTTPS ARM repo and automated locale switch to en_US.UTF-8: https://github.com/MichaIng/DietPi/issues/2294
- DietPi-Software | Nextcloud Talk: Disabled the very verbose coturn logging by default to reduce disk I/O. This can be overridden via /etc/turnserver.conf: https://github.com/MichaIng/DietPi/issues/2321
- DietPi-Software | Deluge: UMask 002 applied to all downloads: https://github.com/MichaIng/DietPi/issues/2339
- DietPi-Software | Netdata: Updated to v1.11.1 and now runs as user "netdata": https://github.com/MichaIng/DietPi/pull/2337
- DietPi-Software | ownCloud/Nextcloud: Updated webserver configs to match current recommendations and security hardenings. Only applied on new installs. To apply manually, run "dietpi-software reinstall 47" (ownCloud) or "dietpi-software reinstall 114" (Nextcloud). You will be informed about the new configs, which then need to be manually moved to overwrite the old ones, since we don't want to mess with manual changes: https://github.com/MichaIng/DietPi/pull/2361
- DietPi-Software | OpenSSH: Host keys won't be recreated anymore on reinstall, only on first boot of a fresh image, using now "dpkg-reconfigure openssh-server" to generate default key types based on distro.
- DietPi-Software | Dropbear: Now installs only the "dropbear-run" package on Stretch (and above), which matches the default DietPi setup on our images and PREP script.
- DietPi-Software | NAA Daemon: Updated to 3.5.5-39. Thanks to @volpone for the heads up: https://github.com/MichaIng/DietPi/issues/2387#issue-395321320
- DietPi-Software | MPD: Updated to 0.20.23-1. Includes support for NFS and Samba: https://github.com/MichaIng/DietPi/issues/2377
- DietPi-Software | MPD: Now runs as "mpd" user again, updated systemd unit to match official one and better handle existing cache and log files on reinstall: https://github.com/MichaIng/DietPi/issues/2378
- DietPi-Software | Samba: Moved disk cache to RAM to reduce disk I/O. Thanks to @WolfganP for suggesting this enhancement: https://github.com/MichaIng/DietPi/issues/2396
- DietPi-Software | Kodi RPi: Default GPU memory split is now 320MB for 1GB devices. This should improve overall performance and stability: https://github.com/MichaIng/DietPi/issues/2365
- DietPi-Software | Airsonic: Now installs the latest upstream version automatically: https://github.com/MichaIng/DietPi/pull/2410
- DietPi-Software | You will now receive a whiptail prompt, if config files are overwritten during software installations: https://github.com/MichaIng/DietPi/issues/2325
- DietPi-Software | NoMachine: Enabled ARMv8 support and will now install current version 6.4.6: https://github.com/MichaIng/DietPi/pull/2408
- DietPi-Software | Shairport Sync: Updated to 3.2.2 (previously 3.1.7): https://github.com/MichaIng/DietPi/issues/2439
- DietPi-Software | Gitea: New installations now install 1.7 (previously 1.4). Many thanks to @yumiris for this update! https://github.com/MichaIng/DietPi/pull/2448
- DietPi-Software | Grafana: Now the new official APT repo is used for all architectures (excluding ARMv6), which allows updates to the current upstream version (currently v5.4.3) as well. This change will be applied to existing installs on dietpi-update to v6.20. Thanks to @jvteleco for informing us: https://github.com/MichaIng/DietPi/issues/2449
- DietPi-Update | Added optional ability to automatically update DietPi, when updates are available. Please note, this is disabled by default.
- DietPi-Sync | Removed the compression option, which has no effect on local sync, since files are not stored compressed, but only transferred compressed through remote sync protocols, which are currently not offered by DietPi-Sync.
- DietPi-RAMlog/Logclear | The internally rotated LetsEncrypt (CertBot) log files are now removed, hourly with DietPi-RAMlog enabled, or when executing DietPi-Logclear manually.

Bug Fixes:
- DietPi-Software | LXDE: Installation will no longer enable the weather application. This is due to Yahoo API hard coded into LXpanel, being taken offline: https://github.com/MichaIng/DietPi/issues/2416#issuecomment-456805925
- DietPi-Software | Nextcloud: Resolved an issue, where the Nextcloud Apache config was not downloaded correctly. Thanks to @Stefan3v for reporting this issue: https://github.com/MichaIng/DietPi/issues/2383
- DietPi-Software | ownCloud/Nextcloud (Talk): Resolved an issue, where occ/ncc commands could fail, if Redis server is not running: https://github.com/MichaIng/DietPi/issues/2321
- DietPi-Software | ownCloud/Nextcloud: Resolved an issue, where during fresh installs on v6.19, Apache configs were not enabled correctly.
- DietPi-Software | MPD: Resolved an issue on Stretch, where the mpd binary could not find the configuration file without giving it explicitly as argument. Thanks to @mfeif for reporting this issue: https://github.com/MichaIng/DietPi/issues/2378
- DietPi-Software | Mopidy: Resolved an issue, where playlist files could not be created due to missing permissions. Further improved handling of existing configs, data and cache directories on (re)install. Thanks to @cyberlussi for reporting this issue: https://github.com/MichaIng/DietPi/issues/2384
- DietPi-Software | Deluge: Resolved a visual-only error in systemd unit, since same-line comments are not allowed anymore. Thanks to @Gabba for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5378
- DietPi-Software | No-IP: Fixed an issue, where on "Generic device" (ID 22), the wrong binary could have been installed. As well added failsafe "/usr/local/[bin|etc]" directory pre-creation, in case not present on the system or manually removed by user. Thanks to @walker93 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2426
- DietPi-Software | PHP: Resolved an issue where install fails on Stretch due to package name changes in the Debian repo. Thanks to @rox-wolf for reporting this issue: https://github.com/MichaIng/DietPi/issues/2438
- DietPi-Sync | Resolved an issue, where dry-run and compression options were not applied correctly. Thanks to @WilburWalsh for reporting the issue and identifying the faulty code: https://dietpi.com/phpbb/viewtopic.php?t=5347
- DietPi-Sync | Resolved an issue, where daily sync was not applied due to changed settings file scheme.
- DietPi-Config | RPi: gpu_mem_256/512 are now capped when being applied (to prevent value exceeding limits of each board type): https://github.com/MichaIng/DietPi/issues/2417
- DietPi-Config | Resolved a visual-only issue, where WiFi interface starts throw an error message about unsupported power management: https://github.com/MichaIng/DietPi/issues/2198
- DietPi-WiFi-Monitor | Resolved an issue, where DietPi-WiFi-Monitor stuck in a reconnection loop, if no valid WiFi interface was detected or the WiFi adapter is unplugged.
- DietPi-Cloudshell | Resolved an issue where CPU scene failed on VM and other devices that do not support CPU governors: https://github.com/MichaIng/DietPi/issues/2428
- DietPi-LetsEncrypt | Resolved an issue where Nginx and Apache modules are missing, if one installs CertBot first and the webserver afterwards on a separate dietpi-software run: https://github.com/MichaIng/DietPi/issues/2295
- General | Pinebook: Resolved issue with failed apt-get upgrades due to missing armbian-release data file. Also switched to stable kernel packages and kernel updates over APT are now enabled.
- General | Enhanced and fixed some issue with dependencies and boot order of DietPi systemd units: https://github.com/MichaIng/DietPi/pull/2357
- General | AudioPhonics I-Sabre-K2M: Once the driver is compiled, it will no longer be recompiled. This prevents ALSA installs from re-compiling the driver each time.
- General | Resolved an issue, where login with non-bash session caused an error message. Thanks to @Elijahg for reporting this issue: https://github.com/MichaIng/DietPi/issues/2347
- General | Resolved an issue where G_CHECK_URL would not terminate applications on failure. Also added option to retry + change networking options.

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pulls?utf8=%E2%9C%93&q=is%3Apr+is%3Aclosed+base%3Amaster

-----------------------------------------------------------------------------------------------------------

v6.19.7
(10/12/18 Hotfix)

Bug Fixes:
- DietPi-Software | Netdata: Resolved an issue, where uninstalling Netdata lead to a broken system. Thanks to @PDXUser for reporting this issue: https://github.com/MichaIng/DietPi/issues/2336
- DietPi-Software | Docker: Resolved an issue on RPi, where a faulty "docker-ce" version from repository prevents service start on Raspberry Pi. Thanks to @iaresee and @Garret for reporting this issue, finding and testing workarounds: https://github.com/MichaIng/DietPi/issues/2282

v6.19.6
(05/12/18 Hotfix)

Bug Fixes:
- DietPi-Software | Resolved an issue where "force-reload" of webservers lead to an error prompt, if the service was not actually running: https://github.com/MichaIng/DietPi/pull/2326#issuecomment-444646114
- DietPi-Software | Nginx: Resolved an issue, where software specific webserver configs were not loaded after v6.19 update: https://github.com/MichaIng/DietPi/issues/2325#issuecomment-444564109

v6.19
(04/12/18)

Changes / Improvements / Optimisations:
- General | ASUS TB: Image updated to mainline kernel, with midgard r13 GPU driver. Now supports hardware acceleration and support for Kodi. Please download the image to enable these features.
- General | RPi 3A+: Added hardware code enabling correct naming of device throughout DietPi: https://github.com/MichaIng/DietPi/issues/2301
- DietPi-Software | Renamed several software config files to have a consistent naming scheme: https://github.com/MichaIng/DietPi/pull/2312
- DietPi-Software | LXDE: Applied updated DietPi theme and wallpaper. For new installations only.
- DietPi-Software | Blynk Server: Now installed to DietPi userdata directory, and, runs under blynk user. Many thanks to @joaofl for this PR! https://github.com/MichaIng/DietPi/pull/2287
- DietPi-Software | Reboot prompt: Will now occur prior to the system rebooting. Giving you time to do more, before rebooting! :D
- DietPi-Software | Moved majority of conf/* files located on DietPi-RAMdisk, moved over to github for download during installations. Reducing the size of RAMdisk usage.
- DietPi-Software | Pydio: Added rewrite rules to all webserver configs to allow sync client connection out of the box. Thanks to @MonZon for reporting this issue: https://github.com/MichaIng/DietPi/issues/2308
- PREP | Serial console: Now enabled by default for all future DietPi images. Please note, only v6.19 images and above, will have this set by default. Existing images require edit of /boot/dietpi.txt and 'CONFIG_SERIAL_CONSOLE_ENABLE=1' before 1st run: https://github.com/MichaIng/DietPi/issues/2313

Bug Fixes:
- General | ASUS Tinker Board (based on our recent 2.0.8 Tinker OS pre-image): Resolved issue with corrupt characters in desktops.
- DietPi-Update | Prevented backup prompt during each subversion patch from displaying.
- DietPi-Software | Chromium: Resolved incorrect scale of window under Kiosk mode: https://github.com/MichaIng/DietPi/issues/2298#issuecomment-442995196
- DietPi-Software | OMPD: Resolved a reinstall issue due to SQL table not being correctly dropped, before re-created: https://github.com/MichaIng/DietPi/issues/2305
- DietPi-Autostart | XU4: Resolved an issue with startx failing during boot: https://github.com/MichaIng/DietPi/issues/2130#issuecomment-443475525

Allo GUI:
- GMrender: Resolved service failing to be enabled: https://github.com/MichaIng/DietPi/issues/2305

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pulls?utf8=%E2%9C%93&q=is%3Apr+is%3Aclosed+base%3Amaster

-----------------------------------------------------------------------------------------------------------

v6.18
(26/11/18)

Changes / Improvements / Optimisations:
- General | Concurrent execution detection: Now has a 5 second buffer to wait for exit (G_INIT_WAIT_CONCURRENT), before failing: https://github.com/MichaIng/DietPi/issues/2159#issuecomment-433619721
- DietPi-Config | Added support for changing the brightness of the RPi touchscreen: https://github.com/MichaIng/DietPi/issues/2169
- DietPi-Config | Added support for setting Xorg DPI scale.
- DietPi-Services | MariaDB: DietPi now uses the pre-installed "mariadb" systemd service instead of obsolete "mysql" init.d service: https://github.com/MichaIng/DietPi/pull/2196
- DietPi-Software | Nextcloud Talk video calls with configured TURN server is now available for install: https://github.com/MichaIng/DietPi/pull/2197
- DietPi-Software | NAA Daemon: Added installation support for ARMv8 and x86_64. Thanks Jussi!
- DietPi-Software | Pi-hole: During (re)install you can now decide whether to show a blocking page to clients or not: https://github.com/MichaIng/DietPi/issues/2007
- DietPi-Software | MotionEye: Now available to install for all devices. Removed support from Jessie: https://github.com/MichaIng/DietPi/issues/2229
- DietPi-Software | G_BACKUP_FP: New feature rolled out to MPD and web server base DietPi-Software installations, in which config files are backed up before DietPi overwrites them: https://github.com/MichaIng/DietPi/issues/2187#issuecomment-433626639
- DietPi-Software | SickRage: Is no longer available for installation. We will asses a replacement in v6.19. Sonarr is an excellent alternative with faster performance and stability.: https://github.com/MichaIng/DietPi/issues/2239
- DietPi-Software | Docker: Now runs under 'simple' service type (previously 'notify'), to prevent service start delay which can occur on ARM based devices (e.g. RPi), from delaying other applications starting on the system: https://github.com/MichaIng/DietPi/issues/2238#issuecomment-439474766
- DietPi-Software | Mosquito: Service updated to systemd: https://github.com/MichaIng/DietPi/issues/2243
- DietPi-Software | Radarr/Sonarr/Lidarr: logs (both .txt and .db*) have been moved to DietPi-RAMlog: https://github.com/MichaIng/DietPi/issues/2223
- DietPi-Software | Pydio: WebUI warnings (security, performance) are now resolved for Nginx and Lighttpd webservers as well. Separate config files are created instead of touching the defaults, to enable required settings for Pydio only. Required PHP modules are installed and enabled, to be failsafe. Preserve existing install dirs on (re)install and inform user to update via WebUI updater: https://github.com/MichaIng/DietPi/issues/1913
- DietPi-Software | Grafana: Existing database/plugin directory and admin password is now preserved on reinstall: https://github.com/MichaIng/DietPi/issues/2267
- DietPi-Software | Syncthing: Updated installer to always pull the latest release and better handle existing installs. Thanks to @joaofl for bringing this to our attention.
- DietPi-Software | Tautulli: Install enabled for ARMv8 devices.

Bug Fixes:
- PREP: Resolved an issue where master.zip would always be downloaded, regardless of selected branch.
- PREP: Resolved failed rootFS resize: https://github.com/MichaIng/DietPi/issues/2181#issuecomment-433715556
- General | Resolved various gwtcwd errors during boot and software installations on VM: https://github.com/MichaIng/DietPi/issues/2237
- General | NanoPi Fire3: Resolved an issue with blank HDMI output. Device is now switched to tty2 during boot, as a workaround/fix due to tty1 failing: https://github.com/MichaIng/DietPi/issues/2225
- General | Resolved an issue, where entering passwords via our internal whiptail password box leads to "invalid match", when special characters are used, forcing a retry: https://github.com/MichaIng/DietPi/issues/2215#issuecomment-437683709
- DietPi-Cleaner | Resolved an issue where test runs on -dev package removal, would remove the packages.
- DietPi-Cleaner | Resolved a syntax error with function 'Run_Cleaners', disabling the ability to run cleaners. Many thanks to @optio50 for reporting this issue! https://github.com/MichaIng/DietPi/issues/2241
- DietPi-Config | Resolved an visual error when selecting network options due to 'G_CHECK_VALIDINT'.
- DietPi-Config | Locale: Resolved an issue where DietPi would always display en_GB as the current locale: https://github.com/MichaIng/DietPi/issues/2216#issuecomment-435599419
- DietPi-Config | Resolved an issue where on Odroid C1/2 with current kernel 3.5" LCD shield does not work anymore. Thanks to @Kreeblah for reporting this issue and solution: https://github.com/MichaIng/DietPi/issues/2256
- DietPi-Automation | CONFIG_NTP_MODE is now applied after APT cache, and, initial time sync is updated. Due to packages required for some modes: https://github.com/MichaIng/DietPi/issues/2181#issuecomment-433444882
- DietPi-Software | Resolved an issue where rsyslog APT installation would report a failure, if service was already running previously but not installed via APT (mostly in backup/restore situations): https://github.com/MichaIng/DietPi/pull/2277/#issuecomment-441461982
- DietPi-Software | Kodi: Resolved an issue where restart/shutdown options were not visible, due to lack of systemd-logind: https://github.com/MichaIng/DietPi/issues/2155
- DietPi-Software | Mono applications (Radarr/Sonarr/Lidarr/Jackett): Rolled out "-O=-aot" (ahead of time optimisation) to all applications, which resolves a known external bug with recent Mono update. Many thanks to @Generator for testing and confirming this issue: https://github.com/MichaIng/DietPi/issues/2219#issuecomment-437594645
- DietPi-Software | Roon Bridge: Resolved an issue where the remote update would fail due to underpriv permissions: https://community.roonlabs.com/t/dietpi-allo-units-not-getting-the-roonbridge-b167-update-from-b164/52503/6
- DietPi-Software | Nextcloud: Resolved an issue with failed installation: https://github.com/MichaIng/DietPi/issues/2184
- DietPi-Software | Nextcloud/ownCloud: Resolved an issue where userdata located on external drive would fail the installation: https://github.com/MichaIng/DietPi/issues/2221
- DietPi-Software | OMPD/myMPD: Resolved inability to update database. Currently we have rolled back the versions of these programs to a working state. We will investigate with the devs to find out the cause for future release: https://github.com/MichaIng/DietPi/issues/2156
- DietPi-Software | Jackett: Resolved an issue where reinstall created an additional nested install directory. Thanks @msdos for reporting this issue: https://github.com/MichaIng/DietPi/issues/2212
- DietPi-Software | RoonServer: Resolved an issue where reinstall created an additional nested install directory. Since RoonServer has an automated internal updater, download and install will be skipped, if install already exists.
- DietPi-Software | PHP/databases: Resolved an issue where PHP database modules were not installed, when installing a new database and PHP was already installed before.
- DietPi-Software | PHP: On Buster, moved to PHP7.3, since php-apcu and php-redis are not available for PHP7.2 any more. This resolves both PHP versions being installed concurrently.
- DietPi-Software | OpenBazaar: Resolved an issue where remote OB clients could not connect to server with default configuration: https://github.com/MichaIng/DietPi/pull/2224
- DietPi-Software | Resolved an issue where a global password with special characters lead to failing installs, due to missing escaping within our internal function G_CONFIG_INJECT. Thanks to @MistahDarcy for reporting this issue: https://github.com/MichaIng/DietPi/issues/2215
- DietPi-Software | Docker: Resolved an issue where the Docker daemon fails to start due to invalid command argument. Thanks to @mspieth376 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2238
- DietPi-Software | Grafana: Resolved an issue, where WebUI password is not applied correctly, when containing ";" or "#". Thanks to @Warmbadger for reporting this issue and solution: https://dietpi.com/phpbb/viewtopic.php?t=5248
- DietPi-Software | Tautulli: Resolved an issue where Tautulli service failed to start up. As well improved reinstall, if install directory is already existent. Thanks to @Comfubar for reporting this issue: https://dietpi.com/phpbb/viewtopic.php?t=5256
- DietPi-Obtain_network_details | Resolved a tiny visual-only error message on non-root logins. Thanks to @AndrewZ for reporting: https://dietpi.com/phpbb/viewtopic.php?t=5194
- DietPi-Update | Resolved a visual-only issue, where wrong RC versions could have been shown during incremental patching: https://github.com/MichaIng/DietPi/issues/2190

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pulls?utf8=%E2%9C%93&q=is%3Apr+is%3Aclosed+base%3Amaster

-----------------------------------------------------------------------------------------------------------

v6.17
(25/10/18)

Changes / Improvements / Optimisations:
- General | NanoPC T4: Image updated to include latest kernel (4.4.154). Many thanks to @carlosedp for providing this kernel! https://github.com/MichaIng/DietPi/issues/1829#issuecomment-429324437
- General | DietPi now has 3 branches (master=stable, beta=public testing, dev=dev). By default, all users are on master/stable branch: https://github.com/MichaIng/DietPi/issues/2083#issuecomment-426842537
- General | Improved detection of permissions support during user data transfers: https://github.com/MichaIng/DietPi/issues/2096
- General | IPv6: Due to the requirements of various software titles available in dietpi-software (e.g. Nginx, Redis), and that IPv6 is slowly becoming more common place, IPv6 is now disabled via sysctl on interface level, while it stays enabled on kernel level: https://github.com/MichaIng/DietPi/issues/2027
- DietPi-Autostart | Chromium: You will now be prompted to enter a homepage URL, which will be loaded when the application starts: https://github.com/MichaIng/DietPi/issues/2169#issuecomment-432297343
- DietPi-Config | RPi: Added support for LCD panel "Elecrow ESP01215E 7 inch HDMI IPS with touch input" (basically a cheaper RPi touchscreen): https://www.amazon.co.uk/gp/product/B07H79XMLT/ref=oh_aui_detailpage_o01_s00?ie=UTF8&psc=1
- DietPi-Config | Added ability to benchmark network LAN transfer rates using 2 DietPi systems.
- DietPi-Config | RPi: Changing the display resolution, will also apply to Chromium under kiosk/autostart mode: https://github.com/MichaIng/DietPi/issues/2158
- DietPi-Config | Added an option to toggle preferring IPv4 connections with APT and wget, if IPv6 is enabled. This enhances compatibility and performance in some cases.
- DietPi-Config | Online Benchmarks Database! Now available. Simply run the benchmark from the tools menu, to upload your scores and compare against others: https://dietpi.com/survey
- DietPi-Automation | Added settings to dietpi.txt to toggle IPv6 and IPv4 preference on first boot.
- DietPi-Update | You now have the option to view the changelog, prior to updating: https://github.com/MichaIng/DietPi/issues/2081
- DietPi-Software | SABnzbd: Updated to 2.3.5 for new installations only. Now runs under its own limited user account, and, umask of 0775 for downloads: https://github.com/MichaIng/DietPi/issues/2172
- DietPi-Software | Card/CalDAV request redirection was added to new Baikal, ownCloud and Nextcloud installs. Now only the servers domain/IP need to be entered on Card/CalDAV clients, without any further path to the DAV endpoints: https://github.com/MichaIng/DietPi/issues/2057
- DietPi-Software | Plex Media Server and Transmission services run now as group "dietpi", to allow cross access with download managers and media software: https://github.com/MichaIng/DietPi/issues/2067#issuecomment-427579779
- DietPi-Set_Hardware | Odroid C2: When selecting USB DAC, smp affinity will be applied for USB IRQ's to improve stability: https://github.com/MichaIng/DietPi/issues/2101
- DietPi-Drive_Manager | Formatting: Now has the option to format the whole drive, or partition only, for drives with existing partitions.
- DietPi-Drive_Manager | Mounting NTFS drives now enabled native linux permissions support (e.g. you can use this as your userdata location). Many thanks to @Random90 for making this possible! https://github.com/MichaIng/DietPi/issues/2096#issuecomment-425553333
- DietPi-Drive_Manager | Improved detection and formatting for NVMe based drives: https://github.com/MichaIng/DietPi/issues/2102
- DietPi-Drive_Manager | Removed /proc from fstab. No longer required as this created at kernel/systemd level: https://github.com/MichaIng/DietPi/issues/2154

Bug Fixes:
- General | G_THREAD_START: Resolved issue where this was running in blocking mode. Now uses exit code to identify finished tasks instead of PID.
- DietPi-Cloudshell | Resolved various issues with inability to run service via SSH on another screen, and, G_DIETPI-NOTIFY errors. Many thanks to @potter-91 for reporting this issue! https://github.com/MichaIng/DietPi/issues/2104
- DietPi-Config | WiFi-Monitor: Resolved an issue with syntax, and, incorrectly pinging the default gateway, instead of whats assigned to the wlan interface: https://github.com/MichaIng/DietPi/issues/2103
- DietPi-Config | dietpi-wifi.db code has been optimized, and, also resolves an issue where '/var/lib/dietpi/dietpi-wifi.db' was not generated automatically: https://github.com/MichaIng/DietPi/issues/2087#issuecomment-423836528
- DietPi-Config | Waveshare32b: Resolved inverted inputs under X11/Xorg: https://github.com/MichaIng/DietPi/issues/803
- DietPi-Config | PineA64: HDMI sound is now correctly enabled when selected. 3.5mm support is still under investigation: https://github.com/MichaIng/DietPi/issues/2153
- DietPi-Drive_Manager | Resolved an issue where swapfile would register as enabled when set to 0 size: https://github.com/MichaIng/DietPi/issues/2127
- DietPi-Survey | Resolved an issue where dietpi-survey under mode 1 would not generate the survey file.
- DietPi-Software | MPD: Now runs under the group 'dietpi' and user 'root', allowing access to music directories when contained on samba networked drives: https://github.com/MichaIng/DietPi/issues/2092
- DietPi-Software | Fixed an issue where software uninstalls could have failed due to dependant packages. Thanks to @dynobot for reporting this issue: https://github.com/MichaIng/DietPi/issues/2091
- DietPi-Software | Webservers/PHP: Fixed an issue, where PHP was not installed when a webserver was installed directly via "dietpi-software install 8X".
- DietPi-Software | Nextcloud: On Jessie systems, no newer version than latest NC13 will be installed, because PHP5 support was dropped with NC14: https://github.com/MichaIng/DietPi/issues/1778#issuecomment-419918372
- DietPi-Software | myMPD: Resolved an issue where the service would fail to run: https://github.com/MichaIng/DietPi/issues/2088
- DietPi-Software | myMPD: Resolved an issue where the installation would fail, due to a recent myMPD update with new pre-reqs: https://github.com/MichaIng/DietPi/issues/2088#issuecomment-423852124
- DietPi-Software | SiCKRAGE: Resolved failing install due to changed capitalization of SiCKRAGE GitHub repo, and, various additional pre-reqs due to new install method required by SiCKRAGE. Thanks to @mdoary for reporting this issue: https://github.com/MichaIng/DietPi/issues/2126
- DietPi-Software | VNC Server: Resolved an issue where VNC server would fail to start under shared desktop mode, many thanks to @LieDanG for reporting this issue: https://github.com/MichaIng/DietPi/issues/2142#issuecomment-430492281
- DietPi-Process_tool | Resolved an issue where applying process settings on Plex Media Server failed, thanks to @symbios24 for reporting this issue: https://github.com/MichaIng/DietPi/issues/2089
- General | Sparky SBC: Resolved an issue where 'sparky_eth_controller.sh' could incorrectly reboot the device after 20 seconds.
- General | Resolved an issue with Rock64 being unable to run xserver. Please note this device still runs under limited software rendering due to lack of available working drivers/installation method for Debian systems: https://github.com/MichaIng/DietPi/issues/2086
- General | Resolved an issue with Jessie failing to start networking with preboot script: https://github.com/MichaIng/DietPi/issues/2075

Allo GUI v11:
- Minor update to add GUI support for new DietPi version codes.

As always, many smaller code performance and stability improvements, visual and spelling fixes have been done, too much to list all of them here. Check out all code changes of this release on GitHub: https://github.com/MichaIng/DietPi/pulls?utf8=%E2%9C%93&q=is%3Apr+is%3Aclosed+base%3Amaster

-----------------------------------------------------------------------------------------------------------

v6.16
(19/09/18)

Changes / Improvements / Optimizations:
- DietPi-Config | WiFi: Added support for applying up-to 5 SSIDs: https://github.com/MichaIng/DietPi/issues/368
- DietPi-Drive_Manager | Samba Mount: Now mounts with user and group of 'DietPi'. This matches group permissions for DietPi applications that will prevent permission failure, when samba is used for userdata location: https://github.com/MichaIng/DietPi/issues/2067
- DietPi-Software | Pi-hole: You can now install Pi-hole again on Debian Jessie system, as support got re-enabled with Pi-hole v4.0 FTLDNS update.

Bug Fixes:
- General | Resolved an issue where 1st run setup password prompt, would run twice. Once on 1st run and once after updates are completed.
- General | Resolved an external issue where in very rare cases WiFi interfaces were not initiated successfully: https://github.com/MichaIng/DietPi/issues/2074
- DietPi-Config | Sparky SBC: Resolved an issue where Piano DAC firmware was not being fully installed.
- DietPi-Config | Resolved an issue with selected WiFi SSID not being correctly applied: https://github.com/MichaIng/DietPi/issues/2070#issuecomment-421060961
- DietPi-Drive_Manager | RockPro64: Resolved an issue where mtdblock devices would show up in the list. As far as well can tell, these are not currently required for EMMC/SD/USB devices. To ensure the list only shows actual devices, we have disabled them from showing up in view: https://github.com/MichaIng/DietPi/issues/2067#issuecomment-422400520
- DietPi-Postboot | Resolved an issue where user scripts were not being executed '/var/lib/dietpi/postboot.d/*'.

-----------------------------------------------------------------------------------------------------------

v6.15
(12/09/18)

Many thanks to PINE64, for becoming our 1st Patreon Legend and supporting our project! As one of their rewards, you will see PINE64 displayed on login via the DietPi-Banner.

Known issues / In progress:
- DietPi-Software | Open Bazaar: Installation updated to server version 2, which now runs via Go language. At the current state, client OB connections are failing, still under investigation: https://github.com/MichaIng/DietPi/issues/1090#issuecomment-419613346

Changes / Improvements / Optimizations:
- General | Changed Survey and Bugreport uploads to use ssh.dietpi.com (previously IP): https://github.com/MichaIng/DietPi/issues/2022#issuecomment-415470064
- General | 1st run setup and dietpi-update logs are now created in RAM, then copied to disk once completed '/var/tmp/dietpi/logs/dietpi-firstrun-setup.log'. This will speed up 1st run setup installation for slow SBCs and/or rootFS.
- General | PineA64: Image updated to v6.14, also contains the latest kernel/uboot by Ayufan (0.6.2): https://github.com/MichaIng/DietPi/issues/2026
- General | Resolved an issue where the initial 1st run connection test would fail, if timesync had not yet completed, and, the SSL cert of the connection test site is not valid for current date on system: https://github.com/MichaIng/DietPi/issues/2039
- General | Sparky SBC: Support for native DSD playback on iFi Pro iDSD. Many thanks @sudeep: https://github.com/sparky-sbc/sparky-test/tree/master/dsd-marantz
- DietPi-Backup/Sync | rsync transfer: Now shows progress information during the transfer: https://github.com/MichaIng/DietPi/issues/2044#issuecomment-417779406
- DietPi-Backup | Added an option to delete the currently selected backup, if it exists.
- DietPi-Config | Advanced Options: You can now toggle if a real RTC is installed. This adds/removes 'fake-hwclock' package installation as requested: https://github.com/MichaIng/DietPi/issues/2041
- DietPi-Config | Added support for setting CPU min/max frequencies on Intel based CPUs. NB: 'cpu' command will always list the min/max frequencies read from kernel values, Intel CPUs do not update these values, however, you can gauge CPU frequency range by running 'cpu' to monitor the current CPU freq (use of stress test in 'dietpi-config' may also help).
- DietPi-Drive_Manager | Added support to set a global idle duration, before drives are powered down. This feature uses hdparm. Not all drives will support this feature, however, its the best we can do, considering the lack of any standardised system across all drives, compatible with hdparm and visa versa: https://github.com/MichaIng/DietPi/issues/2001
- DietPi-Drive_Manager | When mounting drives to existing directories, if the directory is empty, you will given an option to mount regardless. If the directory contains any files or data, mounting will be denied: https://github.com/MichaIng/DietPi/issues/2056
- DietPi-Software | MPD: Updated to 0.20.21 and now includes SQL (sticker) support by default: https://github.com/MichaIng/DietPi/issues/2032#issuecomment-415559451
- DietPi-Software | myMPD: Now available for installation. A recent fork of YMPD with additional features: https://github.com/MichaIng/DietPi/issues/2032#issuecomment-415559451
- DietPi-Software | Emby: Reworked the installation to use standalone .debs, for fresh installations only. Now supports ARMv8 devices. ARMv6 devices are not supported: https://github.com/MichaIng/DietPi/issues/534#issuecomment-416405968

Bug Fixes:
- General | fake-hwclock: is now installed for all systems, due to 'hwclock' detection reporting incorrect results, for those devices without a RTC attached: https://github.com/MichaIng/DietPi/issues/2035#issuecomment-416345155
- General | Resolved an issue where enabling the RPi camera (dietpi-config or installed via dietpi-software), would result in concurrent execution error: https://github.com/MichaIng/DietPi/issues/2008#issuecomment-414846353
- General | Resolved an issue with RK based network devices, where enabling offloading would cause stability issues. Many thanks to @carlosedp for this fix!: https://github.com/MichaIng/DietPi/issues/2028#issue-352323603
- General | Resolved an issue where automatic swapfile generation, would not run a freespace check prior: https://github.com/MichaIng/DietPi/issues/2048#issuecomment-417855645
- DietPi-Automation | Resolved an issue where 'AUTO_SETUP_INSTALL_SOFTWARE_ID' would include numbers contained within comments: https://github.com/MichaIng/DietPi/issues/2036#issuecomment-416613903
- DietPi-Cloudshell | Resolved incorrect RAM usage readout, and, inability to run from menu on same screen: https://github.com/MichaIng/DietPi/issues/2066
- DietPi-Config | Resolved an issue with PineA64 resolution changes, due to updated uEnv.txt on the latest PineA64 image. NB: for this feature to work, you must have an installation of the latest PineA64 v6.14 image from the DietPi site: https://dietpi.com/phpbb/viewtopic.php?p=14010#p14010
- DietPi-Drive_Manager | Correctly handles bind mounts, contained within '/etc/fstab': https://github.com/MichaIng/DietPi/issues/2013
- DietPi-Process_Tool | Resolved an issue with PIDs no longer existing, causing an apply to fail: https://github.com/MichaIng/DietPi/issues/2059
- DietPi-Software | PlexPy/Tautulli: Resolved an issue with recent pre-req changes for this application, required for start functionality: https://github.com/MichaIng/DietPi/issues/2047
- DietPi-Update | Resolved an issue where all required EMR patches, would not be applied, in the 1st pass of the patch_file.
